<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Cargo Book</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded "><a href="getting-started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="getting-started/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="getting-started/first-steps.html"><strong aria-hidden="true">1.2.</strong> First Steps with Cargo</a></li></ol></li><li class="chapter-item expanded "><a href="guide/index.html"><strong aria-hidden="true">2.</strong> Cargo Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/why-cargo-exists.html"><strong aria-hidden="true">2.1.</strong> Why Cargo Exists</a></li><li class="chapter-item expanded "><a href="guide/creating-a-new-project.html"><strong aria-hidden="true">2.2.</strong> Creating a New Package</a></li><li class="chapter-item expanded "><a href="guide/working-on-an-existing-project.html"><strong aria-hidden="true">2.3.</strong> Working on an Existing Package</a></li><li class="chapter-item expanded "><a href="guide/dependencies.html"><strong aria-hidden="true">2.4.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="guide/project-layout.html"><strong aria-hidden="true">2.5.</strong> Package Layout</a></li><li class="chapter-item expanded "><a href="guide/cargo-toml-vs-cargo-lock.html"><strong aria-hidden="true">2.6.</strong> Cargo.toml vs Cargo.lock</a></li><li class="chapter-item expanded "><a href="guide/tests.html"><strong aria-hidden="true">2.7.</strong> Tests</a></li><li class="chapter-item expanded "><a href="guide/continuous-integration.html"><strong aria-hidden="true">2.8.</strong> Continuous Integration</a></li><li class="chapter-item expanded "><a href="guide/cargo-home.html"><strong aria-hidden="true">2.9.</strong> Cargo Home</a></li><li class="chapter-item expanded "><a href="guide/build-cache.html"><strong aria-hidden="true">2.10.</strong> Build Cache</a></li></ol></li><li class="chapter-item expanded "><a href="reference/index.html"><strong aria-hidden="true">3.</strong> Cargo Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/specifying-dependencies.html"><strong aria-hidden="true">3.1.</strong> Specifying Dependencies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/overriding-dependencies.html"><strong aria-hidden="true">3.1.1.</strong> Overriding Dependencies</a></li></ol></li><li class="chapter-item expanded "><a href="reference/manifest.html"><strong aria-hidden="true">3.2.</strong> The Manifest Format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/cargo-targets.html"><strong aria-hidden="true">3.2.1.</strong> Cargo Targets</a></li></ol></li><li class="chapter-item expanded "><a href="reference/workspaces.html"><strong aria-hidden="true">3.3.</strong> Workspaces</a></li><li class="chapter-item expanded "><a href="reference/features.html"><strong aria-hidden="true">3.4.</strong> Features</a></li><li class="chapter-item expanded "><a href="reference/profiles.html"><strong aria-hidden="true">3.5.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="reference/config.html"><strong aria-hidden="true">3.6.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="reference/environment-variables.html"><strong aria-hidden="true">3.7.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="reference/build-scripts.html"><strong aria-hidden="true">3.8.</strong> Build Scripts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/build-script-examples.html"><strong aria-hidden="true">3.8.1.</strong> Build Script Examples</a></li></ol></li><li class="chapter-item expanded "><a href="reference/publishing.html"><strong aria-hidden="true">3.9.</strong> Publishing on crates.io</a></li><li class="chapter-item expanded "><a href="reference/pkgid-spec.html"><strong aria-hidden="true">3.10.</strong> Package ID Specifications</a></li><li class="chapter-item expanded "><a href="reference/source-replacement.html"><strong aria-hidden="true">3.11.</strong> Source Replacement</a></li><li class="chapter-item expanded "><a href="reference/external-tools.html"><strong aria-hidden="true">3.12.</strong> External Tools</a></li><li class="chapter-item expanded "><a href="reference/registries.html"><strong aria-hidden="true">3.13.</strong> Registries</a></li><li class="chapter-item expanded "><a href="reference/unstable.html"><strong aria-hidden="true">3.14.</strong> Unstable Features</a></li></ol></li><li class="chapter-item expanded "><a href="commands/index.html"><strong aria-hidden="true">4.</strong> Cargo Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/general-commands.html"><strong aria-hidden="true">4.1.</strong> General Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/cargo.html"><strong aria-hidden="true">4.1.1.</strong> cargo</a></li><li class="chapter-item expanded "><a href="commands/cargo-help.html"><strong aria-hidden="true">4.1.2.</strong> cargo help</a></li><li class="chapter-item expanded "><a href="commands/cargo-version.html"><strong aria-hidden="true">4.1.3.</strong> cargo version</a></li></ol></li><li class="chapter-item expanded "><a href="commands/build-commands.html"><strong aria-hidden="true">4.2.</strong> Build Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/cargo-bench.html"><strong aria-hidden="true">4.2.1.</strong> cargo bench</a></li><li class="chapter-item expanded "><a href="commands/cargo-build.html"><strong aria-hidden="true">4.2.2.</strong> cargo build</a></li><li class="chapter-item expanded "><a href="commands/cargo-check.html"><strong aria-hidden="true">4.2.3.</strong> cargo check</a></li><li class="chapter-item expanded "><a href="commands/cargo-clean.html"><strong aria-hidden="true">4.2.4.</strong> cargo clean</a></li><li class="chapter-item expanded "><a href="commands/cargo-doc.html"><strong aria-hidden="true">4.2.5.</strong> cargo doc</a></li><li class="chapter-item expanded "><a href="commands/cargo-fetch.html"><strong aria-hidden="true">4.2.6.</strong> cargo fetch</a></li><li class="chapter-item expanded "><a href="commands/cargo-fix.html"><strong aria-hidden="true">4.2.7.</strong> cargo fix</a></li><li class="chapter-item expanded "><a href="commands/cargo-run.html"><strong aria-hidden="true">4.2.8.</strong> cargo run</a></li><li class="chapter-item expanded "><a href="commands/cargo-rustc.html"><strong aria-hidden="true">4.2.9.</strong> cargo rustc</a></li><li class="chapter-item expanded "><a href="commands/cargo-rustdoc.html"><strong aria-hidden="true">4.2.10.</strong> cargo rustdoc</a></li><li class="chapter-item expanded "><a href="commands/cargo-test.html"><strong aria-hidden="true">4.2.11.</strong> cargo test</a></li></ol></li><li class="chapter-item expanded "><a href="commands/manifest-commands.html"><strong aria-hidden="true">4.3.</strong> Manifest Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/cargo-generate-lockfile.html"><strong aria-hidden="true">4.3.1.</strong> cargo generate-lockfile</a></li><li class="chapter-item expanded "><a href="commands/cargo-locate-project.html"><strong aria-hidden="true">4.3.2.</strong> cargo locate-project</a></li><li class="chapter-item expanded "><a href="commands/cargo-metadata.html"><strong aria-hidden="true">4.3.3.</strong> cargo metadata</a></li><li class="chapter-item expanded "><a href="commands/cargo-pkgid.html"><strong aria-hidden="true">4.3.4.</strong> cargo pkgid</a></li><li class="chapter-item expanded "><a href="commands/cargo-tree.html"><strong aria-hidden="true">4.3.5.</strong> cargo tree</a></li><li class="chapter-item expanded "><a href="commands/cargo-update.html"><strong aria-hidden="true">4.3.6.</strong> cargo update</a></li><li class="chapter-item expanded "><a href="commands/cargo-vendor.html"><strong aria-hidden="true">4.3.7.</strong> cargo vendor</a></li><li class="chapter-item expanded "><a href="commands/cargo-verify-project.html"><strong aria-hidden="true">4.3.8.</strong> cargo verify-project</a></li></ol></li><li class="chapter-item expanded "><a href="commands/package-commands.html"><strong aria-hidden="true">4.4.</strong> Package Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/cargo-init.html"><strong aria-hidden="true">4.4.1.</strong> cargo init</a></li><li class="chapter-item expanded "><a href="commands/cargo-install.html"><strong aria-hidden="true">4.4.2.</strong> cargo install</a></li><li class="chapter-item expanded "><a href="commands/cargo-new.html"><strong aria-hidden="true">4.4.3.</strong> cargo new</a></li><li class="chapter-item expanded "><a href="commands/cargo-search.html"><strong aria-hidden="true">4.4.4.</strong> cargo search</a></li><li class="chapter-item expanded "><a href="commands/cargo-uninstall.html"><strong aria-hidden="true">4.4.5.</strong> cargo uninstall</a></li></ol></li><li class="chapter-item expanded "><a href="commands/publishing-commands.html"><strong aria-hidden="true">4.5.</strong> Publishing Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/cargo-login.html"><strong aria-hidden="true">4.5.1.</strong> cargo login</a></li><li class="chapter-item expanded "><a href="commands/cargo-owner.html"><strong aria-hidden="true">4.5.2.</strong> cargo owner</a></li><li class="chapter-item expanded "><a href="commands/cargo-package.html"><strong aria-hidden="true">4.5.3.</strong> cargo package</a></li><li class="chapter-item expanded "><a href="commands/cargo-publish.html"><strong aria-hidden="true">4.5.4.</strong> cargo publish</a></li><li class="chapter-item expanded "><a href="commands/cargo-yank.html"><strong aria-hidden="true">4.5.5.</strong> cargo yank</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">5.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="appendix/glossary.html"><strong aria-hidden="true">6.</strong> Appendix: Glossary</a></li><li class="chapter-item expanded "><a href="appendix/git-authentication.html"><strong aria-hidden="true">7.</strong> Appendix: Git Authentication</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Cargo Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rust-lang/cargo/tree/master/src/doc/src" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#the-cargo-book" id="the-cargo-book">The Cargo Book</a></h1>
<p><img src="images/Cargo-Logo-Small.png" alt="Cargo Logo" /></p>
<p>Cargo is the <a href="https://www.rust-lang.org/">Rust</a> <em>package manager</em>. Cargo downloads your Rust package’s
dependencies, compiles your packages, makes distributable packages, and uploads them to
<a href="https://crates.io/">crates.io</a>, the Rust community’s <em>package registry</em>. You can contribute
to this book on <a href="https://github.com/rust-lang/cargo/tree/master/src/doc">GitHub</a>.</p>
<h3><a class="header" href="#sections" id="sections">Sections</a></h3>
<p><strong><a href="getting-started/index.html">Getting Started</a></strong></p>
<p>To get started with Cargo, install Cargo (and Rust) and set up your first crate.</p>
<p><strong><a href="guide/index.html">Cargo Guide</a></strong></p>
<p>The guide will give you all you need to know about how to use Cargo to develop
Rust packages.</p>
<p><strong><a href="reference/index.html">Cargo Reference</a></strong></p>
<p>The reference covers the details of various areas of Cargo.</p>
<p><strong><a href="commands/index.html">Cargo Commands</a></strong></p>
<p>The commands will let you interact with Cargo using its command-line interface.</p>
<p><strong><a href="faq.html">Frequently Asked Questions</a></strong></p>
<p><strong>Appendices:</strong></p>
<ul>
<li><a href="appendix/glossary.html">Glossary</a></li>
<li><a href="appendix/git-authentication.html">Git Authentication</a></li>
</ul>
<p><strong>Other Documentation:</strong></p>
<ul>
<li><a href="https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md">Changelog</a> —
Detailed notes about changes in Cargo in each release.</li>
<li><a href="https://doc.rust-lang.org/">Rust documentation website</a> — Links to official
Rust documentation and tools.</li>
</ul>
<h2><a class="header" href="#getting-started" id="getting-started">Getting Started</a></h2>
<p>To get started with Cargo, install Cargo (and Rust) and set up your first crate.</p>
<ul>
<li><a href="getting-started/installation.html">Installation</a></li>
<li><a href="getting-started/first-steps.html">First steps with Cargo</a></li>
</ul>
<h2><a class="header" href="#installation" id="installation">Installation</a></h2>
<h3><a class="header" href="#install-rust-and-cargo" id="install-rust-and-cargo">Install Rust and Cargo</a></h3>
<p>The easiest way to get Cargo is to install the current stable release of <a href="https://www.rust-lang.org/">Rust</a>
by using <code>rustup</code>. Installing Rust using <code>rustup</code> will also install <code>cargo</code>.</p>
<p>On Linux and macOS systems, this is done as follows:</p>
<pre><code class="language-console">$ curl https://sh.rustup.rs -sSf | sh
</code></pre>
<p>It will download a script, and start the installation. If everything goes well,
you’ll see this appear:</p>
<pre><code class="language-console">Rust is installed now. Great!
</code></pre>
<p>On Windows, download and run <a href="https://win.rustup.rs/">rustup-init.exe</a>. It will start the installation
in a console and present the above message on success.</p>
<p>After this, you can use the <code>rustup</code> command to also install <code>beta</code> or <code>nightly</code>
channels for Rust and Cargo.</p>
<p>For other installation options and information, visit the
<a href="https://www.rust-lang.org/tools/install">install</a> page of the Rust website.</p>
<h3><a class="header" href="#build-and-install-cargo-from-source" id="build-and-install-cargo-from-source">Build and Install Cargo from Source</a></h3>
<p>Alternatively, you can <a href="https://github.com/rust-lang/cargo#compiling-from-source">build Cargo from source</a>.</p>
<h2><a class="header" href="#first-steps-with-cargo" id="first-steps-with-cargo">First Steps with Cargo</a></h2>
<p>To start a new package with Cargo, use <code>cargo new</code>:</p>
<pre><code class="language-console">$ cargo new hello_world
</code></pre>
<p>Cargo defaults to <code>--bin</code> to make a binary program. To make a library, we'd
pass <code>--lib</code>.</p>
<p>Let’s check out what Cargo has generated for us:</p>
<pre><code class="language-console">$ cd hello_world
$ tree .
.
├── Cargo.toml
└── src
    └── main.rs

1 directory, 2 files
</code></pre>
<p>This is all we need to get started. First, let’s check out <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]
</code></pre>
<p>This is called a <strong>manifest</strong>, and it contains all of the metadata that Cargo
needs to compile your package.</p>
<p>Here’s what’s in <code>src/main.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre></pre>
<p>Cargo generated a “hello world” for us. Let’s compile it:</p>
<pre><code class="language-console">$ cargo build
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
</code></pre>
<p>And then run it:</p>
<pre><code class="language-console">$ ./target/debug/hello_world
Hello, world!
</code></pre>
<p>We can also use <code>cargo run</code> to compile and then run it, all in one step:</p>
<pre><code class="language-console">$ cargo run
     Fresh hello_world v0.1.0 (file:///path/to/package/hello_world)
   Running `target/hello_world`
Hello, world!
</code></pre>
<h3><a class="header" href="#going-further" id="going-further">Going further</a></h3>
<p>For more details on using Cargo, check out the <a href="getting-started/../guide/index.html">Cargo Guide</a></p>
<h2><a class="header" href="#cargo-guide" id="cargo-guide">Cargo Guide</a></h2>
<p>This guide will give you all that you need to know about how to use Cargo to
develop Rust packages.</p>
<ul>
<li><a href="guide/why-cargo-exists.html">Why Cargo Exists</a></li>
<li><a href="guide/creating-a-new-project.html">Creating a New Package</a></li>
<li><a href="guide/working-on-an-existing-project.html">Working on an Existing Cargo Package</a></li>
<li><a href="guide/dependencies.html">Dependencies</a></li>
<li><a href="guide/project-layout.html">Package Layout</a></li>
<li><a href="guide/cargo-toml-vs-cargo-lock.html">Cargo.toml vs Cargo.lock</a></li>
<li><a href="guide/tests.html">Tests</a></li>
<li><a href="guide/continuous-integration.html">Continuous Integration</a></li>
<li><a href="guide/cargo-home.html">Cargo Home</a></li>
<li><a href="guide/build-cache.html">Build Cache</a></li>
</ul>
<h2><a class="header" href="#why-cargo-exists" id="why-cargo-exists">Why Cargo Exists</a></h2>
<p>Cargo is a tool that allows Rust packages to declare their various
dependencies and ensure that you’ll always get a repeatable build.</p>
<p>To accomplish this goal, Cargo does four things:</p>
<ul>
<li>Introduces two metadata files with various bits of package information.</li>
<li>Fetches and builds your package’s dependencies.</li>
<li>Invokes <code>rustc</code> or another build tool with the correct parameters to build
your package.</li>
<li>Introduces conventions to make working with Rust packages easier.</li>
</ul>
<h2><a class="header" href="#creating-a-new-package" id="creating-a-new-package">Creating a New Package</a></h2>
<p>To start a new package with Cargo, use <code>cargo new</code>:</p>
<pre><code class="language-console">$ cargo new hello_world --bin
</code></pre>
<p>We’re passing <code>--bin</code> because we’re making a binary program: if we
were making a library, we’d pass <code>--lib</code>. This also initializes a new <code>git</code>
repository by default. If you don't want it to do that, pass <code>--vcs none</code>.</p>
<p>Let’s check out what Cargo has generated for us:</p>
<pre><code class="language-console">$ cd hello_world
$ tree .
.
├── Cargo.toml
└── src
    └── main.rs

1 directory, 2 files
</code></pre>
<p>Let’s take a closer look at <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]

</code></pre>
<p>This is called a <strong>manifest</strong>, and it contains all of the metadata that Cargo
needs to compile your package.</p>
<p>Here’s what’s in <code>src/main.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    println!(&quot;Hello, world!&quot;);
}
</code></pre></pre>
<p>Cargo generated a “hello world” for us. Let’s compile it:</p>
<pre><code class="language-console">$ cargo build
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
</code></pre>
<p>And then run it:</p>
<pre><code class="language-console">$ ./target/debug/hello_world
Hello, world!
</code></pre>
<p>We can also use <code>cargo run</code> to compile and then run it, all in one step (You
won't see the <code>Compiling</code> line if you have not made any changes since you last
compiled):</p>
<pre><code class="language-console">$ cargo run
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
     Running `target/debug/hello_world`
Hello, world!
</code></pre>
<p>You’ll now notice a new file, <code>Cargo.lock</code>. It contains information about our
dependencies. Since we don’t have any yet, it’s not very interesting.</p>
<p>Once you’re ready for release, you can use <code>cargo build --release</code> to compile
your files with optimizations turned on:</p>
<pre><code class="language-console">$ cargo build --release
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
</code></pre>
<p><code>cargo build --release</code> puts the resulting binary in <code>target/release</code> instead of
<code>target/debug</code>.</p>
<p>Compiling in debug mode is the default for development. Compilation time is
shorter since the compiler doesn't do optimizations, but the code will run
slower. Release mode takes longer to compile, but the code will run faster.</p>
<h2><a class="header" href="#working-on-an-existing-cargo-package" id="working-on-an-existing-cargo-package">Working on an Existing Cargo Package</a></h2>
<p>If you download an existing package that uses Cargo, it’s really easy
to get going.</p>
<p>First, get the package from somewhere. In this example, we’ll use <code>rand</code>
cloned from its repository on GitHub:</p>
<pre><code class="language-console">$ git clone https://github.com/rust-lang-nursery/rand.git
$ cd rand
</code></pre>
<p>To build, use <code>cargo build</code>:</p>
<pre><code class="language-console">$ cargo build
   Compiling rand v0.1.0 (file:///path/to/package/rand)
</code></pre>
<p>This will fetch all of the dependencies and then build them, along with the
package.</p>
<h2><a class="header" href="#dependencies" id="dependencies">Dependencies</a></h2>
<p><a href="https://crates.io/">crates.io</a> is the Rust community's central package registry that serves as a
location to discover and download packages. <code>cargo</code> is configured to use it by
default to find requested packages.</p>
<p>To depend on a library hosted on <a href="https://crates.io/">crates.io</a>, add it to your <code>Cargo.toml</code>.</p>
<h3><a class="header" href="#adding-a-dependency" id="adding-a-dependency">Adding a dependency</a></h3>
<p>If your <code>Cargo.toml</code> doesn't already have a <code>[dependencies]</code> section, add that,
then list the crate name and version that you would like to use. This example
adds a dependency of the <code>time</code> crate:</p>
<pre><code class="language-toml">[dependencies]
time = &quot;0.1.12&quot;
</code></pre>
<p>The version string is a <a href="https://github.com/steveklabnik/semver#requirements">semver</a> version requirement. The <a href="guide/../reference/specifying-dependencies.html">specifying
dependencies</a> docs have more information about
the options you have here.</p>
<p>If we also wanted to add a dependency on the <code>regex</code> crate, we would not need
to add <code>[dependencies]</code> for each crate listed. Here's what your whole
<code>Cargo.toml</code> file would look like with dependencies on the <code>time</code> and <code>regex</code>
crates:</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;

[dependencies]
time = &quot;0.1.12&quot;
regex = &quot;0.1.41&quot;
</code></pre>
<p>Re-run <code>cargo build</code>, and Cargo will fetch the new dependencies and all of
their dependencies, compile them all, and update the <code>Cargo.lock</code>:</p>
<pre><code class="language-console">$ cargo build
      Updating crates.io index
   Downloading memchr v0.1.5
   Downloading libc v0.1.10
   Downloading regex-syntax v0.2.1
   Downloading memchr v0.1.5
   Downloading aho-corasick v0.3.0
   Downloading regex v0.1.41
     Compiling memchr v0.1.5
     Compiling libc v0.1.10
     Compiling regex-syntax v0.2.1
     Compiling memchr v0.1.5
     Compiling aho-corasick v0.3.0
     Compiling regex v0.1.41
     Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
</code></pre>
<p>Our <code>Cargo.lock</code> contains the exact information about which revision of all of
these dependencies we used.</p>
<p>Now, if <code>regex</code> gets updated, we will still build with the same revision until
we choose to <code>cargo update</code>.</p>
<p>You can now use the <code>regex</code> library in <code>main.rs</code>.</p>
<pre><pre class="playground"><code class="language-rust">use regex::Regex;

fn main() {
    let re = Regex::new(r&quot;^\d{4}-\d{2}-\d{2}$&quot;).unwrap();
    println!(&quot;Did our date match? {}&quot;, re.is_match(&quot;2014-01-01&quot;));
}
</code></pre></pre>
<p>Running it will show:</p>
<pre><code class="language-console">$ cargo run
   Running `target/hello_world`
Did our date match? true
</code></pre>
<h2><a class="header" href="#package-layout" id="package-layout">Package Layout</a></h2>
<p>Cargo uses conventions for file placement to make it easy to dive into a new
Cargo package:</p>
<pre><code class="language-text">.
├── Cargo.lock
├── Cargo.toml
├── src/
│   ├── lib.rs
│   ├── main.rs
│   └── bin/
│       ├── named-executable.rs
│       ├── another-executable.rs
│       └── multi-file-executable/
│           ├── main.rs
│           └── some_module.rs
├── benches/
│   ├── large-input.rs
│   └── multi-file-bench/
│       ├── main.rs
│       └── bench_module.rs
├── examples/
│   ├── simple.rs
│   └── multi-file-example/
│       ├── main.rs
│       └── ex_module.rs
└── tests/
    ├── some-integration-tests.rs
    └── multi-file-test/
        ├── main.rs
        └── test_module.rs
</code></pre>
<ul>
<li><code>Cargo.toml</code> and <code>Cargo.lock</code> are stored in the root of your package (<em>package
root</em>).</li>
<li>Source code goes in the <code>src</code> directory.</li>
<li>The default library file is <code>src/lib.rs</code>.</li>
<li>The default executable file is <code>src/main.rs</code>.
<ul>
<li>Other executables can be placed in <code>src/bin/</code>.</li>
</ul>
</li>
<li>Benchmarks go in the <code>benches</code> directory.</li>
<li>Examples go in the <code>examples</code> directory.</li>
<li>Integration tests go in the <code>tests</code> directory.</li>
</ul>
<p>If a binary, example, bench, or integration test consists of multiple source
files, place a <code>main.rs</code> file along with the extra modules within a
subdirectory of the <code>src/bin</code>, <code>examples</code>, <code>benches</code>, or <code>tests</code> directory.
The name of the executable will be the directory name.</p>
<p>You can learn more about Rust's module system in <a href="guide/../../book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html">the book</a>.</p>
<p>See <a href="guide/../reference/cargo-targets.html#configuring-a-target">Configuring a target</a> for more details on manually configuring targets.
See <a href="guide/../reference/cargo-targets.html#target-auto-discovery">Target auto-discovery</a> for more information on controlling how Cargo
automatically infers target names.</p>
<h2><a class="header" href="#cargotoml-vs-cargolock" id="cargotoml-vs-cargolock">Cargo.toml vs Cargo.lock</a></h2>
<p><code>Cargo.toml</code> and <code>Cargo.lock</code> serve two different purposes. Before we talk
about them, here’s a summary:</p>
<ul>
<li><code>Cargo.toml</code> is about describing your dependencies in a broad sense, and is
written by you.</li>
<li><code>Cargo.lock</code> contains exact information about your dependencies. It is
maintained by Cargo and should not be manually edited.</li>
</ul>
<p>If you’re building a non-end product, such as a rust library that other rust packages will depend on, put
<code>Cargo.lock</code> in your <code>.gitignore</code>. If you’re building an end product, which are executable
like command-line tool or an application, or a system library with crate-type of <code>staticlib</code> or <code>cdylib</code>,
check <code>Cargo.lock</code> into <code>git</code>. If you're curious about why that is, see
<a href="guide/../faq.html#why-do-binaries-have-cargolock-in-version-control-but-not-libraries">&quot;Why do binaries have <code>Cargo.lock</code> in version control, but not libraries?&quot; in the
FAQ</a>.</p>
<p>Let’s dig in a little bit more.</p>
<p><code>Cargo.toml</code> is a <strong>manifest</strong> file in which we can specify a bunch of
different metadata about our package. For example, we can say that we depend
on another package:</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]

[dependencies]
rand = { git = &quot;https://github.com/rust-lang-nursery/rand.git&quot; }
</code></pre>
<p>This package has a single dependency, on the <code>rand</code> library. We’ve stated in
this case that we’re relying on a particular Git repository that lives on
GitHub. Since we haven’t specified any other information, Cargo assumes that
we intend to use the latest commit on the <code>master</code> branch to build our package.</p>
<p>Sound good? Well, there’s one problem: If you build this package today, and
then you send a copy to me, and I build this package tomorrow, something bad
could happen. There could be more commits to <code>rand</code> in the meantime, and my
build would include new commits while yours would not. Therefore, we would
get different builds. This would be bad because we want reproducible builds.</p>
<p>We could fix this problem by putting a <code>rev</code> line in our <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
rand = { git = &quot;https://github.com/rust-lang-nursery/rand.git&quot;, rev = &quot;9f35b8e&quot; }
</code></pre>
<p>Now our builds will be the same. But there’s a big drawback: now we have to
manually think about SHA-1s every time we want to update our library. This is
both tedious and error prone.</p>
<p>Enter the <code>Cargo.lock</code>. Because of its existence, we don’t need to manually
keep track of the exact revisions: Cargo will do it for us. When we have a
manifest like this:</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]

[dependencies]
rand = { git = &quot;https://github.com/rust-lang-nursery/rand.git&quot; }
</code></pre>
<p>Cargo will take the latest commit and write that information out into our
<code>Cargo.lock</code> when we build for the first time. That file will look like this:</p>
<pre><code class="language-toml">[[package]]
name = &quot;hello_world&quot;
version = &quot;0.1.0&quot;
dependencies = [
 &quot;rand 0.1.0 (git+https://github.com/rust-lang-nursery/rand.git#9f35b8e439eeedd60b9414c58f389bdc6a3284f9)&quot;,
]

[[package]]
name = &quot;rand&quot;
version = &quot;0.1.0&quot;
source = &quot;git+https://github.com/rust-lang-nursery/rand.git#9f35b8e439eeedd60b9414c58f389bdc6a3284f9&quot;
</code></pre>
<p>You can see that there’s a lot more information here, including the exact
revision we used to build. Now when you give your package to someone else,
they’ll use the exact same SHA, even though we didn’t specify it in our
<code>Cargo.toml</code>.</p>
<p>When we’re ready to opt in to a new version of the library, Cargo can
re-calculate the dependencies and update things for us:</p>
<pre><code class="language-console">$ cargo update           # updates all dependencies
$ cargo update -p rand   # updates just “rand”
</code></pre>
<p>This will write out a new <code>Cargo.lock</code> with the new version information. Note
that the argument to <code>cargo update</code> is actually a
<a href="guide/../reference/pkgid-spec.html">Package ID Specification</a> and <code>rand</code> is just a short
specification.</p>
<h2><a class="header" href="#tests" id="tests">Tests</a></h2>
<p>Cargo can run your tests with the <code>cargo test</code> command. Cargo looks for tests
to run in two places: in each of your <code>src</code> files and any tests in <code>tests/</code>.
Tests in your <code>src</code> files should be unit tests, and tests in <code>tests/</code> should be
integration-style tests. As such, you’ll need to import your crates into
the files in <code>tests</code>.</p>
<p>Here's an example of running <code>cargo test</code> in our package, which currently has
no tests:</p>
<pre><code class="language-console">$ cargo test
   Compiling rand v0.1.0 (https://github.com/rust-lang-nursery/rand.git#9f35b8e)
   Compiling hello_world v0.1.0 (file:///path/to/package/hello_world)
     Running target/test/hello_world-9c2b65bbb79eabce

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
</code></pre>
<p>If our package had tests, we would see more output with the correct number of
tests.</p>
<p>You can also run a specific test by passing a filter:</p>
<pre><code class="language-console">$ cargo test foo
</code></pre>
<p>This will run any test with <code>foo</code> in its name.</p>
<p><code>cargo test</code> runs additional checks as well. For example, it will compile any
examples you’ve included and will also test the examples in your
documentation. Please see the <a href="guide/../../book/ch11-00-testing.html">testing guide</a> in the Rust
documentation for more details.</p>
<h2><a class="header" href="#continuous-integration" id="continuous-integration">Continuous Integration</a></h2>
<h3><a class="header" href="#travis-ci" id="travis-ci">Travis CI</a></h3>
<p>To test your package on Travis CI, here is a sample <code>.travis.yml</code> file:</p>
<pre><code class="language-yaml">language: rust
rust:
  - stable
  - beta
  - nightly
matrix:
  allow_failures:
    - rust: nightly
</code></pre>
<p>This will test all three release channels, but any breakage in nightly
will not fail your overall build. Please see the <a href="https://docs.travis-ci.com/user/languages/rust/">Travis CI Rust
documentation</a> for more
information.</p>
<h3><a class="header" href="#gitlab-ci" id="gitlab-ci">GitLab CI</a></h3>
<p>To test your package on GitLab CI, here is a sample <code>.gitlab-ci.yml</code> file:</p>
<pre><code class="language-yaml">stages:
  - build

rust-latest:
  stage: build
  image: rust:latest
  script:
    - cargo build --verbose
    - cargo test --verbose

rust-nightly:
  stage: build
  image: rustlang/rust:nightly
  script:
    - cargo build --verbose
    - cargo test --verbose
  allow_failure: true
</code></pre>
<p>This will test on the stable channel and nightly channel, but any
breakage in nightly will not fail your overall build. Please see the
<a href="https://docs.gitlab.com/ce/ci/yaml/README.html">GitLab CI</a> for more
information.</p>
<h3><a class="header" href="#buildssrht" id="buildssrht">builds.sr.ht</a></h3>
<p>To test your package on sr.ht, here is a sample <code>.build.yml</code> file.
Be sure to change <code>&lt;your repo&gt;</code> and <code>&lt;your project&gt;</code> to the repo to clone and
the directory where it was cloned.</p>
<pre><code class="language-yaml">image: archlinux
packages:
  - rustup
sources:
  - &lt;your repo&gt;
tasks:
  - setup: |
      rustup toolchain install nightly stable
      cd &lt;your project&gt;/
      rustup run stable cargo fetch
  - stable: |
      rustup default stable
      cd &lt;your project&gt;/
      cargo build --verbose
      cargo test --verbose
  - nightly: |
      rustup default nightly
      cd &lt;your project&gt;/
      cargo build --verbose ||:
      cargo test --verbose  ||:
  - docs: |
      cd &lt;your project&gt;/
      rustup run stable cargo doc --no-deps
      rustup run nightly cargo doc --no-deps ||:
</code></pre>
<p>This will test and build documentation on the stable channel and nightly
channel, but any breakage in nightly will not fail your overall build. Please
see the <a href="https://man.sr.ht/builds.sr.ht/">builds.sr.ht documentation</a> for more
information.</p>
<h2><a class="header" href="#cargo-home" id="cargo-home">Cargo Home</a></h2>
<p>The &quot;Cargo home&quot; functions as a download and source cache.
When building a crate, Cargo stores downloaded build dependencies in the Cargo home.
You can alter the location of the Cargo home by setting the <code>CARGO_HOME</code> <a href="guide/../reference/environment-variables.html">environmental variable</a>.
The <a href="https://crates.io/crates/home">home</a> crate provides an API for getting this location if you need this information inside your Rust crate.
By default, the Cargo home is located in <code>$HOME/.cargo/</code>.</p>
<p>Please note that the internal structure of the Cargo home is not stabilized and may be subject to change at any time.</p>
<p>The Cargo home consists of following components:</p>
<h2><a class="header" href="#files" id="files">Files:</a></h2>
<ul>
<li>
<p><code>config.toml</code>
Cargo's global configuration file, see the <a href="guide/../reference/config.html">config entry in the reference</a>.</p>
</li>
<li>
<p><code>credentials.toml</code>
Private login credentials from <a href="guide/../commands/cargo-login.html"><code>cargo login</code></a> in order to log in to a registry.</p>
</li>
<li>
<p><code>.crates.toml</code>
This hidden file contains package information of crates installed via <a href="guide/../commands/cargo-install.html"><code>cargo install</code></a>. Do NOT edit by hand!</p>
</li>
</ul>
<h2><a class="header" href="#directories" id="directories">Directories:</a></h2>
<ul>
<li>
<p><code>bin</code>
The bin directory contains executables of crates that were installed via <a href="guide/../commands/cargo-install.html"><code>cargo install</code></a> or <a href="https://github.com/rust-lang/rustup.rs"><code>rustup</code></a>.
To be able to make these binaries accessible, add the path of the directory to your <code>$PATH</code> environment variable.</p>
</li>
<li>
<p><code>git</code>
Git sources are stored here:</p>
<ul>
<li>
<p><code>git/db</code>
When a crate depends on a git repository, Cargo clones the repo as a bare repo into this directory and updates it if necessary.</p>
</li>
<li>
<p><code>git/checkouts</code>
If a git source is used, the required commit of the repo is checked out from the bare repo inside <code>git/db</code> into this directory.
This provides the compiler with the actual files contained in the repo of the commit specified for that dependency.
Multiple checkouts of different commits of the same repo are possible.</p>
</li>
</ul>
</li>
<li>
<p><code>registry</code>
Packages and metadata of crate registries (such as <a href="https://crates.io/">crates.io</a>) are located here.</p>
<ul>
<li>
<p><code>registry/index</code>
The index is a bare git repository which contains the metadata (versions, dependencies etc) of all available crates of a registry.</p>
</li>
<li>
<p><code>registry/cache</code>
Downloaded dependencies are stored in the cache. The crates are compressed gzip archives named with a <code>.crate</code> extension.</p>
</li>
<li>
<p><code>registry/src</code>
If a downloaded <code>.crate</code> archive is required by a package, it is unpacked into <code>registry/src</code> folder where rustc will find the <code>.rs</code> files.</p>
</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#caching-the-cargo-home-in-ci" id="caching-the-cargo-home-in-ci">Caching the Cargo home in CI</a></h2>
<p>To avoid redownloading all crate dependencies during continuous integration, you can cache the <code>$CARGO_HOME</code> directory.
However, caching the entire directory is often inefficient as it will contain downloaded sources twice.
If we depend on a crate such as <code>serde 1.0.92</code> and cache the entire <code>$CARGO_HOME</code> we would actually cache the sources twice, the <code>serde-1.0.92.crate</code> inside <code>registry/cache</code> and the extracted <code>.rs</code> files of serde inside <code>registry/src</code>.
That can unnecessarily slow down the build as downloading, extracting, recompressing and reuploading the cache to the CI servers can take some time.</p>
<p>It should be sufficient to only cache the following directories across builds:</p>
<ul>
<li><code>bin/</code></li>
<li><code>registry/index/</code></li>
<li><code>registry/cache/</code></li>
<li><code>git/db/</code></li>
</ul>
<h2><a class="header" href="#vendoring-all-dependencies-of-a-project" id="vendoring-all-dependencies-of-a-project">Vendoring all dependencies of a project</a></h2>
<p>See the <a href="guide/../commands/cargo-vendor.html"><code>cargo vendor</code></a> subcommand.</p>
<h2><a class="header" href="#clearing-the-cache" id="clearing-the-cache">Clearing the cache</a></h2>
<p>In theory, you can always remove any part of the cache and Cargo will do its best to restore sources if a crate needs them either by reextracting an archive or checking out a bare repo or by simply redownloading the sources from the web.</p>
<p>Alternatively, the <a href="https://crates.io/crates/cargo-cache">cargo-cache</a> crate provides a simple CLI tool to only clear selected parts of the cache or show sizes of its components in your command-line.</p>
<h2><a class="header" href="#build-cache" id="build-cache">Build cache</a></h2>
<p>Cargo stores the output of a build into the &quot;target&quot; directory. By default,
this is the directory named <code>target</code> in the root of your workspace. To change
the location, you can set the <code>CARGO_TARGET_DIR</code> <a href="guide/../reference/environment-variables.html">environment variable</a>, the
<a href="guide/../reference/config.html#buildtarget-dir"><code>build.target-dir</code></a> config value, or the <code>--target-dir</code> command-line flag.</p>
<p>The directory layout depends on whether or not you are using the <code>--target</code>
flag to build for a specific platform. If <code>--target</code> is not specified, Cargo
runs in a mode where it builds for the host architecture. The output goes into
the root of the target directory, separated based on whether or not it is a
release build:</p>
<table><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody>
<tr><td><code style="white-space: nowrap">target/debug/</code></td><td> Contains debug build output.</td></tr>
<tr><td><code style="white-space: nowrap">target/release/</code></td><td> Contains release build output (with <code>--release</code> flag).</td></tr>
</tbody></table>
<p>When building for another target with <code>--target</code>, the output is placed in a
directory with the name of the target:</p>
<table><thead><tr><th>Directory</th><th>Example</th></tr></thead><tbody>
<tr><td><code style="white-space: nowrap">target/&lt;triple&gt;/debug/</code></td><td> <code style="white-space: nowrap">target/thumbv7em-none-eabihf/debug/</code></td></tr>
<tr><td><code style="white-space: nowrap">target/&lt;triple&gt;/release/</code></td><td> <code style="white-space: nowrap">target/thumbv7em-none-eabihf/release/</code></td></tr>
</tbody></table>
<blockquote>
<p><strong>Note</strong>: When not using <code>--target</code>, this has a consequence that Cargo will
share your dependencies with build scripts and proc macros. <a href="guide/../reference/config.html#buildrustflags"><code>RUSTFLAGS</code></a>
will be shared with every <code>rustc</code> invocation. With the <code>--target</code> flag,
build scripts and proc macros are built separately (for the host
architecture), and do not share <code>RUSTFLAGS</code>.</p>
</blockquote>
<p>Within the profile directory (<code>debug</code> or <code>release</code>), artifacts are placed into
the following directories:</p>
<table><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody>
<tr><td><code style="white-space: nowrap">target/debug/</code></td><td>Contains the output of the package being built (the <code>[[bin]]</code> executables and <code>[lib]</code> library targets).</td></tr>
<tr><td><code style="white-space: nowrap">target/debug/examples/</code></td><td> Contains examples (<code>[[example]]</code> targets).</td></tr>
</tbody></table>
<p>Some commands place their output in dedicated directories in the top level of
the <code>target</code> directory:</p>
<table><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody>
<tr><td><code style="white-space: nowrap">target/doc/</code></td><td>Contains rustdoc documentation (<a href="guide/../commands/cargo-doc.html"><code>cargo doc</code></a>).</td></tr>
<tr><td><code style="white-space: nowrap">target/package/</code></td><td>Contains the output of the <a href="guide/../commands/cargo-package.html"><code>cargo package</code></a> and <a href="guide/../commands/cargo-publish.html"><code>cargo publish</code></a> commands.</td></tr>
</tbody></table>
<p>Cargo also creates several other directories and files needed for the build
process. Their layout is considered internal to Cargo, and is subject to
change. Some of these directories are:</p>
<table><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody>
<tr><td><code style="white-space: nowrap">target/debug/deps/</code></td><td> Dependencies and other artifacts.</td></tr>
<tr><td><code style="white-space: nowrap">target/debug/incremental/</code></td><td> <code>rustc</code> <a href="guide/../reference/profiles.html#incremental">incremental output</a>, a cache used to speed up subsequent builds.</td></tr>
<tr><td><code style="white-space: nowrap">target/debug/build/</code></td><td> Output from <a href="guide/../reference/build-scripts.html">build scripts</a>.</td></tr>
</tbody></table>
<h3><a class="header" href="#dep-info-files" id="dep-info-files">Dep-info files</a></h3>
<p>Next to each compiled artifact is a file called a &quot;dep info&quot; file with a <code>.d</code>
suffix. This file is a Makefile-like syntax that indicates all of the file
dependencies required to rebuild the artifact. These are intended to be used
with external build systems so that they can detect if Cargo needs to be
re-executed. The paths in the file are absolute by default. See the
<a href="guide/../reference/config.html#builddep-info-basedir"><code>build.dep-info-basedir</code></a> config option to use relative paths.</p>
<pre><code class="language-Makefile"># Example dep-info file found in target/debug/foo.d
/path/to/myproj/target/debug/foo: /path/to/myproj/src/lib.rs /path/to/myproj/src/main.rs
</code></pre>
<h3><a class="header" href="#shared-cache" id="shared-cache">Shared cache</a></h3>
<p>A third party tool, <a href="https://github.com/mozilla/sccache">sccache</a>, can be used to share built dependencies across
different workspaces.</p>
<p>To setup <code>sccache</code>, install it with <code>cargo install sccache</code> and set
<code>RUSTC_WRAPPER</code> environmental variable to <code>sccache</code> before invoking Cargo. If
you use bash, it makes sense to add <code>export RUSTC_WRAPPER=sccache</code> to
<code>.bashrc</code>. Alternatively, you can set [<code>build.rustc-wrapper</code>] in the <a href="guide/../reference/config.html">Cargo
configuration</a>. Refer to sccache documentation for more details.</p>
<h2><a class="header" href="#cargo-reference" id="cargo-reference">Cargo Reference</a></h2>
<p>The reference covers the details of various areas of Cargo.</p>
<ul>
<li><a href="reference/specifying-dependencies.html">Specifying Dependencies</a>
<ul>
<li><a href="reference/overriding-dependencies.html">Overriding Dependencies</a></li>
</ul>
</li>
<li><a href="reference/manifest.html">The Manifest Format</a>
<ul>
<li><a href="reference/cargo-targets.html">Cargo Targets</a></li>
</ul>
</li>
<li><a href="reference/workspaces.html">Workspaces</a></li>
<li><a href="reference/features.html">Features</a></li>
<li><a href="reference/profiles.html">Profiles</a></li>
<li><a href="reference/config.html">Configuration</a></li>
<li><a href="reference/environment-variables.html">Environment Variables</a></li>
<li><a href="reference/build-scripts.html">Build Scripts</a>
<ul>
<li><a href="reference/build-script-examples.html">Build Script Examples</a></li>
</ul>
</li>
<li><a href="reference/publishing.html">Publishing on crates.io</a></li>
<li><a href="reference/pkgid-spec.html">Package ID Specifications</a></li>
<li><a href="reference/source-replacement.html">Source Replacement</a></li>
<li><a href="reference/external-tools.html">External Tools</a></li>
<li><a href="reference/registries.html">Registries</a></li>
<li><a href="reference/unstable.html">Unstable Features</a></li>
</ul>
<h2><a class="header" href="#specifying-dependencies" id="specifying-dependencies">Specifying Dependencies</a></h2>
<p>Your crates can depend on other libraries from <a href="https://crates.io/">crates.io</a> or other
registries, <code>git</code> repositories, or subdirectories on your local file system.
You can also temporarily override the location of a dependency — for example,
to be able to test out a bug fix in the dependency that you are working on
locally. You can have different dependencies for different platforms, and
dependencies that are only used during development. Let's take a look at how
to do each of these.</p>
<h3><a class="header" href="#specifying-dependencies-from-cratesio" id="specifying-dependencies-from-cratesio">Specifying dependencies from crates.io</a></h3>
<p>Cargo is configured to look for dependencies on <a href="https://crates.io/">crates.io</a> by default. Only
the name and a version string are required in this case. In <a href="reference/../guide/index.html">the cargo
guide</a>, we specified a dependency on the <code>time</code> crate:</p>
<pre><code class="language-toml">[dependencies]
time = &quot;0.1.12&quot;
</code></pre>
<p>The string <code>&quot;0.1.12&quot;</code> is a <a href="https://github.com/steveklabnik/semver#requirements">semver</a> version requirement. Since this
string does not have any operators in it, it is interpreted the same way as
if we had specified <code>&quot;^0.1.12&quot;</code>, which is called a caret requirement.</p>
<h3><a class="header" href="#caret-requirements" id="caret-requirements">Caret requirements</a></h3>
<p><strong>Caret requirements</strong> allow SemVer compatible updates to a specified version.
An update is allowed if the new version number does not modify the left-most
non-zero digit in the major, minor, patch grouping. In this case, if we ran
<code>cargo update -p time</code>, cargo should update us to version <code>0.1.13</code> if it is the
latest <code>0.1.z</code> release, but would not update us to <code>0.2.0</code>. If instead we had
specified the version string as <code>^1.0</code>, cargo should update to <code>1.1</code> if it is
the latest <code>1.y</code> release, but not <code>2.0</code>. The version <code>0.0.x</code> is not considered
compatible with any other version.</p>
<p>Here are some more examples of caret requirements and the versions that would
be allowed with them:</p>
<pre><code class="language-notrust">^1.2.3  :=  &gt;=1.2.3, &lt;2.0.0
^1.2    :=  &gt;=1.2.0, &lt;2.0.0
^1      :=  &gt;=1.0.0, &lt;2.0.0
^0.2.3  :=  &gt;=0.2.3, &lt;0.3.0
^0.2    :=  &gt;=0.2.0, &lt;0.3.0
^0.0.3  :=  &gt;=0.0.3, &lt;0.0.4
^0.0    :=  &gt;=0.0.0, &lt;0.1.0
^0      :=  &gt;=0.0.0, &lt;1.0.0
</code></pre>
<p>This compatibility convention is different from SemVer in the way it treats
versions before 1.0.0. While SemVer says there is no compatibility before
1.0.0, Cargo considers <code>0.x.y</code> to be compatible with <code>0.x.z</code>, where <code>y ≥ z</code>
and <code>x &gt; 0</code>.</p>
<h3><a class="header" href="#tilde-requirements" id="tilde-requirements">Tilde requirements</a></h3>
<p><strong>Tilde requirements</strong> specify a minimal version with some ability to update.
If you specify a major, minor, and patch version or only a major and minor
version, only patch-level changes are allowed. If you only specify a major
version, then minor- and patch-level changes are allowed.</p>
<p><code>~1.2.3</code> is an example of a tilde requirement.</p>
<pre><code class="language-notrust">~1.2.3  := &gt;=1.2.3, &lt;1.3.0
~1.2    := &gt;=1.2.0, &lt;1.3.0
~1      := &gt;=1.0.0, &lt;2.0.0
</code></pre>
<h3><a class="header" href="#wildcard-requirements" id="wildcard-requirements">Wildcard requirements</a></h3>
<p><strong>Wildcard requirements</strong> allow for any version where the wildcard is
positioned.</p>
<p><code>*</code>, <code>1.*</code> and <code>1.2.*</code> are examples of wildcard requirements.</p>
<pre><code class="language-notrust">*     := &gt;=0.0.0
1.*   := &gt;=1.0.0, &lt;2.0.0
1.2.* := &gt;=1.2.0, &lt;1.3.0
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> does not allow bare <code>*</code> versions.</p>
</blockquote>
<h3><a class="header" href="#comparison-requirements" id="comparison-requirements">Comparison requirements</a></h3>
<p><strong>Comparison requirements</strong> allow manually specifying a version range or an
exact version to depend on.</p>
<p>Here are some examples of comparison requirements:</p>
<pre><code class="language-notrust">&gt;= 1.2.0
&gt; 1
&lt; 2
= 1.2.3
</code></pre>
<h3><a class="header" href="#multiple-requirements" id="multiple-requirements">Multiple requirements</a></h3>
<p>As shown in the examples above, multiple version requirements can be
separated with a comma, e.g., <code>&gt;= 1.2, &lt; 1.5</code>.</p>
<h3><a class="header" href="#specifying-dependencies-from-other-registries" id="specifying-dependencies-from-other-registries">Specifying dependencies from other registries</a></h3>
<p>To specify a dependency from a registry other than <a href="https://crates.io/">crates.io</a>, first the
registry must be configured in a <code>.cargo/config.toml</code> file. See the <a href="reference/registries.html">registries
documentation</a> for more information. In the dependency, set the <code>registry</code> key
to the name of the registry to use.</p>
<pre><code class="language-toml">[dependencies]
some-crate = { version = &quot;1.0&quot;, registry = &quot;my-registry&quot; }
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> does not allow packages to be published with
dependencies on other registries.</p>
</blockquote>
<h3><a class="header" href="#specifying-dependencies-from-git-repositories" id="specifying-dependencies-from-git-repositories">Specifying dependencies from <code>git</code> repositories</a></h3>
<p>To depend on a library located in a <code>git</code> repository, the minimum information
you need to specify is the location of the repository with the <code>git</code> key:</p>
<pre><code class="language-toml">[dependencies]
rand = { git = &quot;https://github.com/rust-lang-nursery/rand&quot; }
</code></pre>
<p>Cargo will fetch the <code>git</code> repository at this location then look for a
<code>Cargo.toml</code> for the requested crate anywhere inside the <code>git</code> repository
(not necessarily at the root - for example, specifying a member crate name
of a workspace and setting <code>git</code> to the repository containing the workspace).</p>
<p>Since we haven’t specified any other information, Cargo assumes that
we intend to use the latest commit on the main branch to build our package.
You can combine the <code>git</code> key with the <code>rev</code>, <code>tag</code>, or <code>branch</code> keys to
specify something else. Here's an example of specifying that you want to use
the latest commit on a branch named <code>next</code>:</p>
<pre><code class="language-toml">[dependencies]
rand = { git = &quot;https://github.com/rust-lang-nursery/rand&quot;, branch = &quot;next&quot; }
</code></pre>
<p>See <a href="reference/../appendix/git-authentication.html">Git Authentication</a> for help with git authentication for private repos.</p>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> does not allow packages to be published with <code>git</code>
dependencies (<code>git</code> <a href="reference/specifying-dependencies.html#development-dependencies">dev-dependencies</a> are ignored). See the <a href="reference/specifying-dependencies.html#multiple-locations">Multiple
locations</a> section for a fallback alternative.</p>
</blockquote>
<h3><a class="header" href="#specifying-path-dependencies" id="specifying-path-dependencies">Specifying path dependencies</a></h3>
<p>Over time, our <code>hello_world</code> package from <a href="reference/../guide/index.html">the guide</a> has
grown significantly in size! It’s gotten to the point that we probably want to
split out a separate crate for others to use. To do this Cargo supports <strong>path
dependencies</strong> which are typically sub-crates that live within one repository.
Let’s start off by making a new crate inside of our <code>hello_world</code> package:</p>
<pre><code class="language-console"># inside of hello_world/
$ cargo new hello_utils
</code></pre>
<p>This will create a new folder <code>hello_utils</code> inside of which a <code>Cargo.toml</code> and
<code>src</code> folder are ready to be configured. In order to tell Cargo about this, open
up <code>hello_world/Cargo.toml</code> and add <code>hello_utils</code> to your dependencies:</p>
<pre><code class="language-toml">[dependencies]
hello_utils = { path = &quot;hello_utils&quot; }
</code></pre>
<p>This tells Cargo that we depend on a crate called <code>hello_utils</code> which is found
in the <code>hello_utils</code> folder (relative to the <code>Cargo.toml</code> it’s written in).</p>
<p>And that’s it! The next <code>cargo build</code> will automatically build <code>hello_utils</code> and
all of its own dependencies, and others can also start using the crate as well.
However, crates that use dependencies specified with only a path are not
permitted on <a href="https://crates.io/">crates.io</a>. If we wanted to publish our <code>hello_world</code> crate, we
would need to publish a version of <code>hello_utils</code> to <a href="https://crates.io/">crates.io</a>
and specify its version in the dependencies line as well:</p>
<pre><code class="language-toml">[dependencies]
hello_utils = { path = &quot;hello_utils&quot;, version = &quot;0.1.0&quot; }
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> does not allow packages to be published with <code>path</code>
dependencies (<code>path</code> <a href="reference/specifying-dependencies.html#development-dependencies">dev-dependencies</a> are ignored). See the <a href="reference/specifying-dependencies.html#multiple-locations">Multiple
locations</a> section for a fallback alternative.</p>
</blockquote>
<h3><a class="header" href="#multiple-locations" id="multiple-locations">Multiple locations</a></h3>
<p>It is possible to specify both a registry version and a <code>git</code> or <code>path</code>
location. The <code>git</code> or <code>path</code> dependency will be used locally (in which case
the <code>version</code> is ignored), and when published to a registry like <a href="https://crates.io/">crates.io</a>,
it will use the registry version. Other combinations are not allowed.
Examples:</p>
<pre><code class="language-toml">[dependencies]
# Uses `my-bitflags` when used locally, and uses
# version 1.0 from crates.io when published.
bitflags = { path = &quot;my-bitflags&quot;, version = &quot;1.0&quot; }

# Uses the given git repo when used locally, and uses
# version 1.0 from crates.io when published.
smallvec = { git = &quot;https://github.com/servo/rust-smallvec&quot;, version = &quot;1.0&quot; }
</code></pre>
<p>One example where this can be useful is when you have split up a library into
multiple packages within the same workspace. You can then use <code>path</code>
dependencies to point to the local packages within the workspace to use the
local version during development, and then use the <a href="https://crates.io/">crates.io</a> version once it
is published. This is similar to specifying an
<a href="reference/overriding-dependencies.html">override</a>, but only applies to this one
dependency declaration.</p>
<h3><a class="header" href="#platform-specific-dependencies" id="platform-specific-dependencies">Platform specific dependencies</a></h3>
<p>Platform-specific dependencies take the same format, but are listed under a
<code>target</code> section. Normally Rust-like <a href="reference/../../reference/conditional-compilation.html"><code>#[cfg]</code>
syntax</a> will be used to define
these sections:</p>
<pre><code class="language-toml">[target.'cfg(windows)'.dependencies]
winhttp = &quot;0.4.0&quot;

[target.'cfg(unix)'.dependencies]
openssl = &quot;1.0.1&quot;

[target.'cfg(target_arch = &quot;x86&quot;)'.dependencies]
native = { path = &quot;native/i686&quot; }

[target.'cfg(target_arch = &quot;x86_64&quot;)'.dependencies]
native = { path = &quot;native/x86_64&quot; }
</code></pre>
<p>Like with Rust, the syntax here supports the <code>not</code>, <code>any</code>, and <code>all</code> operators
to combine various cfg name/value pairs.</p>
<p>If you want to know which cfg targets are available on your platform, run
<code>rustc --print=cfg</code> from the command line. If you want to know which <code>cfg</code>
targets are available for another platform, such as 64-bit Windows,
run <code>rustc --print=cfg --target=x86_64-pc-windows-msvc</code>.</p>
<p>Unlike in your Rust source code, you cannot use
<code>[target.'cfg(feature = &quot;fancy-feature&quot;)'.dependencies]</code> to add dependencies
based on optional features. Use <a href="reference/features.html">the <code>[features]</code> section</a>
instead:</p>
<pre><code class="language-toml">[dependencies]
foo = { version = &quot;1.0&quot;, optional = true }
bar = { version = &quot;1.0&quot;, optional = true }

[features]
fancy-feature = [&quot;foo&quot;, &quot;bar&quot;]
</code></pre>
<p>The same applies to <code>cfg(debug_assertions)</code>, <code>cfg(test)</code> and <code>cfg(proc_macro)</code>.
These values will not work as expected and will always have the default value
returned by <code>rustc --print=cfg</code>.
There is currently no way to add dependencies based on these configuration values.</p>
<p>In addition to <code>#[cfg]</code> syntax, Cargo also supports listing out the full target
the dependencies would apply to:</p>
<pre><code class="language-toml">[target.x86_64-pc-windows-gnu.dependencies]
winhttp = &quot;0.4.0&quot;

[target.i686-unknown-linux-gnu.dependencies]
openssl = &quot;1.0.1&quot;
</code></pre>
<h4><a class="header" href="#custom-target-specifications" id="custom-target-specifications">Custom target specifications</a></h4>
<p>If you’re using a custom target specification (such as <code>--target foo/bar.json</code>), use the base filename without the <code>.json</code> extension:</p>
<pre><code class="language-toml">[target.bar.dependencies]
winhttp = &quot;0.4.0&quot;

[target.my-special-i686-platform.dependencies]
openssl = &quot;1.0.1&quot;
native = { path = &quot;native/i686&quot; }
</code></pre>
<blockquote>
<p><strong>Note</strong>: Custom target specifications are not usable on the stable channel.</p>
</blockquote>
<h3><a class="header" href="#development-dependencies" id="development-dependencies">Development dependencies</a></h3>
<p>You can add a <code>[dev-dependencies]</code> section to your <code>Cargo.toml</code> whose format
is equivalent to <code>[dependencies]</code>:</p>
<pre><code class="language-toml">[dev-dependencies]
tempdir = &quot;0.3&quot;
</code></pre>
<p>Dev-dependencies are not used when compiling
a package for building, but are used for compiling tests, examples, and
benchmarks.</p>
<p>These dependencies are <em>not</em> propagated to other packages which depend on this
package.</p>
<p>You can also have target-specific development dependencies by using
<code>dev-dependencies</code> in the target section header instead of <code>dependencies</code>. For
example:</p>
<pre><code class="language-toml">[target.'cfg(unix)'.dev-dependencies]
mio = &quot;0.0.1&quot;
</code></pre>
<blockquote>
<p><strong>Note</strong>: When a package is published, only dev-dependencies that specify a
<code>version</code> will be included in the published crate. For most use cases,
dev-dependencies are not needed when published, though some users (like OS
packagers) may want to run tests within a crate, so providing a <code>version</code> if
possible can still be beneficial.</p>
</blockquote>
<h3><a class="header" href="#build-dependencies" id="build-dependencies">Build dependencies</a></h3>
<p>You can depend on other Cargo-based crates for use in your build scripts.
Dependencies are declared through the <code>build-dependencies</code> section of the
manifest:</p>
<pre><code class="language-toml">[build-dependencies]
cc = &quot;1.0.3&quot;
</code></pre>
<p>The build script <strong>does not</strong> have access to the dependencies listed
in the <code>dependencies</code> or <code>dev-dependencies</code> section. Build
dependencies will likewise not be available to the package itself
unless listed under the <code>dependencies</code> section as well. A package
itself and its build script are built separately, so their
dependencies need not coincide. Cargo is kept simpler and cleaner by
using independent dependencies for independent purposes.</p>
<h3><a class="header" href="#choosing-features" id="choosing-features">Choosing features</a></h3>
<p>If a package you depend on offers conditional features, you can
specify which to use:</p>
<pre><code class="language-toml">[dependencies.awesome]
version = &quot;1.3.5&quot;
default-features = false # do not include the default features, and optionally
                         # cherry-pick individual features
features = [&quot;secure-password&quot;, &quot;civet&quot;]
</code></pre>
<p>More information about features can be found in the <a href="reference/features.html">features
chapter</a>.</p>
<h3><a class="header" href="#renaming-dependencies-in-cargotoml" id="renaming-dependencies-in-cargotoml">Renaming dependencies in <code>Cargo.toml</code></a></h3>
<p>When writing a <code>[dependencies]</code> section in <code>Cargo.toml</code> the key you write for a
dependency typically matches up to the name of the crate you import from in the
code. For some projects, though, you may wish to reference the crate with a
different name in the code regardless of how it's published on crates.io. For
example you may wish to:</p>
<ul>
<li>Avoid the need to  <code>use foo as bar</code> in Rust source.</li>
<li>Depend on multiple versions of a crate.</li>
<li>Depend on crates with the same name from different registries.</li>
</ul>
<p>To support this Cargo supports a <code>package</code> key in the <code>[dependencies]</code> section
of which package should be depended on:</p>
<pre><code class="language-toml">[package]
name = &quot;mypackage&quot;
version = &quot;0.0.1&quot;

[dependencies]
foo = &quot;0.1&quot;
bar = { git = &quot;https://github.com/example/project&quot;, package = &quot;foo&quot; }
baz = { version = &quot;0.1&quot;, registry = &quot;custom&quot;, package = &quot;foo&quot; }
</code></pre>
<p>In this example, three crates are now available in your Rust code:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>extern crate foo; // crates.io
extern crate bar; // git repository
extern crate baz; // registry `custom`
<span class="boring">}
</span></code></pre></pre>
<p>All three of these crates have the package name of <code>foo</code> in their own
<code>Cargo.toml</code>, so we're explicitly using the <code>package</code> key to inform Cargo that
we want the <code>foo</code> package even though we're calling it something else locally.
The <code>package</code> key, if not specified, defaults to the name of the dependency
being requested.</p>
<p>Note that if you have an optional dependency like:</p>
<pre><code class="language-toml">[dependencies]
foo = { version = &quot;0.1&quot;, package = 'bar', optional = true }
</code></pre>
<p>you're depending on the crate <code>bar</code> from crates.io, but your crate has a <code>foo</code>
feature instead of a <code>bar</code> feature. That is, names of features take after the
name of the dependency, not the package name, when renamed.</p>
<p>Enabling transitive dependencies works similarly, for example we could add the
following to the above manifest:</p>
<pre><code class="language-toml">[features]
log-debug = ['foo/log-debug'] # using 'bar/log-debug' would be an error!
</code></pre>
<script>
(function() {
    var fragments = {
        "#overriding-dependencies": "overriding-dependencies.html",
        "#testing-a-bugfix": "overriding-dependencies.html#testing-a-bugfix",
        "#working-with-an-unpublished-minor-version": "overriding-dependencies.html#working-with-an-unpublished-minor-version",
        "#overriding-repository-url": "overriding-dependencies.html#overriding-repository-url",
        "#prepublishing-a-breaking-change": "overriding-dependencies.html#prepublishing-a-breaking-change",
        "#overriding-with-local-dependencies": "overriding-dependencies.html#paths-overrides",
    };
    var target = fragments[window.location.hash];
    if (target) {
        var url = window.location.toString();
        var base = url.substring(0, url.lastIndexOf('/'));
        window.location.replace(base + "/" + target);
    }
})();
</script>
<h2><a class="header" href="#overriding-dependencies" id="overriding-dependencies">Overriding Dependencies</a></h2>
<p>The desire to override a dependency can arise through a number of scenarios.
Most of them, however, boil down to the ability to work with a crate before
it's been published to <a href="https://crates.io/">crates.io</a>. For example:</p>
<ul>
<li>A crate you're working on is also used in a much larger application you're
working on, and you'd like to test a bug fix to the library inside of the
larger application.</li>
<li>An upstream crate you don't work on has a new feature or a bug fix on the
master branch of its git repository which you'd like to test out.</li>
<li>You're about to publish a new major version of your crate, but you'd like to
do integration testing across an entire package to ensure the new major
version works.</li>
<li>You've submitted a fix to an upstream crate for a bug you found, but you'd
like to immediately have your application start depending on the fixed
version of the crate to avoid blocking on the bug fix getting merged.</li>
</ul>
<p>These scenarios can be solved with the <a href="reference/overriding-dependencies.html#the-patch-section"><code>[patch]</code> manifest
section</a>.</p>
<p>This chapter walks through a few different use cases, and includes details
on the different ways to override a dependency.</p>
<ul>
<li>Example use cases
<ul>
<li><a href="reference/overriding-dependencies.html#testing-a-bugfix">Testing a bugfix</a></li>
<li><a href="reference/overriding-dependencies.html#working-with-an-unpublished-minor-version">Working with an unpublished minor version</a>
<ul>
<li><a href="reference/overriding-dependencies.html#overriding-repository-url">Overriding repository URL</a></li>
</ul>
</li>
<li><a href="reference/overriding-dependencies.html#prepublishing-a-breaking-change">Prepublishing a breaking change</a></li>
<li><a href="reference/overriding-dependencies.html#using-patch-with-multiple-versions">Using <code>[patch]</code> with multiple versions</a></li>
</ul>
</li>
<li>Reference
<ul>
<li><a href="reference/overriding-dependencies.html#the-patch-section">The <code>[patch]</code> section</a></li>
<li><a href="reference/overriding-dependencies.html#the-replace-section">The <code>[replace]</code> section</a></li>
<li><a href="reference/overriding-dependencies.html#paths-overrides"><code>paths</code> overrides</a></li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Note</strong>: See also specifying a dependency with <a href="reference/specifying-dependencies.html#multiple-locations">multiple locations</a>, which
can be used to override the source for a single dependency declaration in a
local package.</p>
</blockquote>
<h3><a class="header" href="#testing-a-bugfix" id="testing-a-bugfix">Testing a bugfix</a></h3>
<p>Let's say you're working with the <a href="https://crates.io/crates/uuid"><code>uuid</code> crate</a> but while you're working on it
you discover a bug. You are, however, quite enterprising so you decide to also
try to fix the bug! Originally your manifest will look like:</p>
<pre><code class="language-toml">[package]
name = &quot;my-library&quot;
version = &quot;0.1.0&quot;
authors = [&quot;...&quot;]

[dependencies]
uuid = &quot;1.0&quot;
</code></pre>
<p>First thing we'll do is to clone the <a href="https://github.com/uuid-rs/uuid"><code>uuid</code> repository</a>
locally via:</p>
<pre><code class="language-console">$ git clone https://github.com/uuid-rs/uuid
</code></pre>
<p>Next we'll edit the manifest of <code>my-library</code> to contain:</p>
<pre><code class="language-toml">[patch.crates-io]
uuid = { path = &quot;../path/to/uuid&quot; }
</code></pre>
<p>Here we declare that we're <em>patching</em> the source <code>crates-io</code> with a new
dependency. This will effectively add the local checked out version of <code>uuid</code> to
the crates.io registry for our local package.</p>
<p>Next up we need to ensure that our lock file is updated to use this new version
of <code>uuid</code> so our package uses the locally checked out copy instead of one from
crates.io. The way <code>[patch]</code> works is that it'll load the dependency at
<code>../path/to/uuid</code> and then whenever crates.io is queried for versions of <code>uuid</code>
it'll <em>also</em> return the local version.</p>
<p>This means that the version number of the local checkout is significant and will
affect whether the patch is used. Our manifest declared <code>uuid = &quot;1.0&quot;</code> which
means we'll only resolve to <code>&gt;= 1.0.0, &lt; 2.0.0</code>, and Cargo's greedy resolution
algorithm also means that we'll resolve to the maximum version within that
range. Typically this doesn't matter as the version of the git repository will
already be greater or match the maximum version published on crates.io, but it's
important to keep this in mind!</p>
<p>In any case, typically all you need to do now is:</p>
<pre><code class="language-console">$ cargo build
   Compiling uuid v1.0.0 (.../uuid)
   Compiling my-library v0.1.0 (.../my-library)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32 secs
</code></pre>
<p>And that's it! You're now building with the local version of <code>uuid</code> (note the
path in parentheses in the build output). If you don't see the local path version getting
built then you may need to run <code>cargo update -p uuid --precise $version</code> where
<code>$version</code> is the version of the locally checked out copy of <code>uuid</code>.</p>
<p>Once you've fixed the bug you originally found the next thing you'll want to do
is to likely submit that as a pull request to the <code>uuid</code> crate itself. Once
you've done this then you can also update the <code>[patch]</code> section. The listing
inside of <code>[patch]</code> is just like the <code>[dependencies]</code> section, so once your pull
request is merged you could change your <code>path</code> dependency to:</p>
<pre><code class="language-toml">[patch.crates-io]
uuid = { git = 'https://github.com/uuid-rs/uuid' }
</code></pre>
<h3><a class="header" href="#working-with-an-unpublished-minor-version" id="working-with-an-unpublished-minor-version">Working with an unpublished minor version</a></h3>
<p>Let's now shift gears a bit from bug fixes to adding features. While working on
<code>my-library</code> you discover that a whole new feature is needed in the <code>uuid</code>
crate. You've implemented this feature, tested it locally above with <code>[patch]</code>,
and submitted a pull request. Let's go over how you continue to use and test it
before it's actually published.</p>
<p>Let's also say that the current version of <code>uuid</code> on crates.io is <code>1.0.0</code>, but
since then the master branch of the git repository has updated to <code>1.0.1</code>. This
branch includes your new feature you submitted previously. To use this
repository we'll edit our <code>Cargo.toml</code> to look like</p>
<pre><code class="language-toml">[package]
name = &quot;my-library&quot;
version = &quot;0.1.0&quot;
authors = [&quot;...&quot;]

[dependencies]
uuid = &quot;1.0.1&quot;

[patch.crates-io]
uuid = { git = 'https://github.com/uuid-rs/uuid' }
</code></pre>
<p>Note that our local dependency on <code>uuid</code> has been updated to <code>1.0.1</code> as it's
what we'll actually require once the crate is published. This version doesn't
exist on crates.io, though, so we provide it with the <code>[patch]</code> section of the
manifest.</p>
<p>Now when our library is built it'll fetch <code>uuid</code> from the git repository and
resolve to 1.0.1 inside the repository instead of trying to download a version
from crates.io. Once 1.0.1 is published on crates.io the <code>[patch]</code> section can
be deleted.</p>
<p>It's also worth noting that <code>[patch]</code> applies <em>transitively</em>. Let's say you use
<code>my-library</code> in a larger package, such as:</p>
<pre><code class="language-toml">[package]
name = &quot;my-binary&quot;
version = &quot;0.1.0&quot;
authors = [&quot;...&quot;]

[dependencies]
my-library = { git = 'https://example.com/git/my-library' }
uuid = &quot;1.0&quot;

[patch.crates-io]
uuid = { git = 'https://github.com/uuid-rs/uuid' }
</code></pre>
<p>Remember that <code>[patch]</code> is applicable <em>transitively</em> but can only be defined at
the <em>top level</em> so we consumers of <code>my-library</code> have to repeat the <code>[patch]</code> section
if necessary. Here, though, the new <code>uuid</code> crate applies to <em>both</em> our dependency on
<code>uuid</code> and the <code>my-library -&gt; uuid</code> dependency. The <code>uuid</code> crate will be resolved to
one version for this entire crate graph, 1.0.1, and it'll be pulled from the git
repository.</p>
<h4><a class="header" href="#overriding-repository-url" id="overriding-repository-url">Overriding repository URL</a></h4>
<p>In case the dependency you want to override isn't loaded from <code>crates.io</code>,
you'll have to change a bit how you use <code>[patch]</code>. For example, if the
dependency is a git dependency, you can override it to a local path with:</p>
<pre><code class="language-toml">[patch.&quot;https://github.com/your/repository&quot;]
my-library = { path = &quot;../my-library/path&quot; }
</code></pre>
<p>And that's it!</p>
<h3><a class="header" href="#prepublishing-a-breaking-change" id="prepublishing-a-breaking-change">Prepublishing a breaking change</a></h3>
<p>Let's take a look at working with a new major version of a crate, typically
accompanied with breaking changes. Sticking with our previous crates, this
means that we're going to be creating version 2.0.0 of the <code>uuid</code> crate. After
we've submitted all changes upstream we can update our manifest for
<code>my-library</code> to look like:</p>
<pre><code class="language-toml">[dependencies]
uuid = &quot;2.0&quot;

[patch.crates-io]
uuid = { git = &quot;https://github.com/uuid-rs/uuid&quot;, branch = &quot;2.0.0&quot; }
</code></pre>
<p>And that's it! Like with the previous example the 2.0.0 version doesn't actually
exist on crates.io but we can still put it in through a git dependency through
the usage of the <code>[patch]</code> section. As a thought exercise let's take another
look at the <code>my-binary</code> manifest from above again as well:</p>
<pre><code class="language-toml">[package]
name = &quot;my-binary&quot;
version = &quot;0.1.0&quot;
authors = [&quot;...&quot;]

[dependencies]
my-library = { git = 'https://example.com/git/my-library' }
uuid = &quot;1.0&quot;

[patch.crates-io]
uuid = { git = 'https://github.com/uuid-rs/uuid', branch = '2.0.0' }
</code></pre>
<p>Note that this will actually resolve to two versions of the <code>uuid</code> crate. The
<code>my-binary</code> crate will continue to use the 1.x.y series of the <code>uuid</code> crate but
the <code>my-library</code> crate will use the <code>2.0.0</code> version of <code>uuid</code>. This will allow you
to gradually roll out breaking changes to a crate through a dependency graph
without being force to update everything all at once.</p>
<h3><a class="header" href="#using-patch-with-multiple-versions" id="using-patch-with-multiple-versions">Using <code>[patch]</code> with multiple versions</a></h3>
<p>You can patch in multiple versions of the same crate with the <code>package</code> key
used to rename dependencies. For example let's say that the <code>serde</code> crate has
a bugfix that we'd like to use to its <code>1.*</code> series but we'd also like to
prototype using a <code>2.0.0</code> version of serde we have in our git repository. To
configure this we'd do:</p>
<pre><code class="language-toml">[patch.crates-io]
serde = { git = 'https://github.com/serde-rs/serde' }
serde2 = { git = 'https://github.com/example/serde', package = 'serde', branch = 'v2' }
</code></pre>
<p>The first <code>serde = ...</code> directive indicates that serde <code>1.*</code> should be used
from the git repository (pulling in the bugfix we need) and the second <code>serde2 = ...</code> directive indicates that the <code>serde</code> package should also be pulled from
the <code>v2</code> branch of <code>https://github.com/example/serde</code>. We're assuming here
that <code>Cargo.toml</code> on that branch mentions version <code>2.0.0</code>.</p>
<p>Note that when using the <code>package</code> key the <code>serde2</code> identifier here is actually
ignored. We simply need a unique name which doesn't conflict with other patched
crates.</p>
<h3><a class="header" href="#the-patch-section" id="the-patch-section">The <code>[patch]</code> section</a></h3>
<p>The <code>[patch]</code> section of <code>Cargo.toml</code> can be used to override dependencies
with other copies. The syntax is similar to the
<a href="reference/specifying-dependencies.html"><code>[dependencies]</code></a> section:</p>
<pre><code class="language-toml">[patch.crates-io]
foo = { git = 'https://github.com/example/foo' }
bar = { path = 'my/local/bar' }

[dependencies.baz]
git = 'https://github.com/example/baz'

[patch.'https://github.com/example/baz']
baz = { git = 'https://github.com/example/patched-baz', branch = 'my-branch' }
</code></pre>
<p>The <code>[patch]</code> table is made of dependency-like sub-tables. Each key after
<code>[patch]</code> is a URL of the source that is being patched, or the name of a
registry. The name <code>crates-io</code> may be used to override the default registry
<a href="https://crates.io/">crates.io</a>. The first <code>[patch]</code> in the example above demonstrates overriding
<a href="https://crates.io/">crates.io</a>, and the second <code>[patch]</code> demonstrates overriding a git source.</p>
<p>Each entry in these tables is a normal dependency specification, the same as
found in the <code>[dependencies]</code> section of the manifest. The dependencies listed
in the <code>[patch]</code> section are resolved and used to patch the source at the
URL specified. The above manifest snippet patches the <code>crates-io</code> source (e.g.
crates.io itself) with the <code>foo</code> crate and <code>bar</code> crate. It also
patches the <code>https://github.com/example/baz</code> source with a <code>my-branch</code> that
comes from elsewhere.</p>
<p>Sources can be patched with versions of crates that do not exist, and they can
also be patched with versions of crates that already exist. If a source is
patched with a crate version that already exists in the source, then the
source's original crate is replaced.</p>
<h3><a class="header" href="#the-replace-section" id="the-replace-section">The <code>[replace]</code> section</a></h3>
<blockquote>
<p><strong>Note</strong>: <code>[replace]</code> is deprecated. You should use the
<a href="reference/overriding-dependencies.html#the-patch-section"><code>[patch]</code></a> table instead.</p>
</blockquote>
<p>This section of Cargo.toml can be used to override dependencies with other
copies. The syntax is similar to the <code>[dependencies]</code> section:</p>
<pre><code class="language-toml">[replace]
&quot;foo:0.1.0&quot; = { git = 'https://github.com/example/foo' }
&quot;bar:1.0.2&quot; = { path = 'my/local/bar' }
</code></pre>
<p>Each key in the <code>[replace]</code> table is a <a href="reference/pkgid-spec.html">package ID
specification</a>, which allows arbitrarily choosing a node in the
dependency graph to override (the 3-part version number is required). The
value of each key is the same as the <code>[dependencies]</code> syntax for specifying
dependencies, except that you can't specify features. Note that when a crate
is overridden the copy it's overridden with must have both the same name and
version, but it can come from a different source (e.g., git or a local path).</p>
<h3><a class="header" href="#paths-overrides" id="paths-overrides"><code>paths</code> overrides</a></h3>
<p>Sometimes you're only temporarily working on a crate and you don't want to have
to modify <code>Cargo.toml</code> like with the <code>[patch]</code> section above. For this use
case Cargo offers a much more limited version of overrides called <strong>path
overrides</strong>.</p>
<p>Path overrides are specified through <a href="reference/config.html"><code>.cargo/config.toml</code></a> instead of
<code>Cargo.toml</code>. Inside of <code>.cargo/config.toml</code> you'll specify a key called <code>paths</code>:</p>
<pre><code class="language-toml">paths = [&quot;/path/to/uuid&quot;]
</code></pre>
<p>This array should be filled with directories that contain a <code>Cargo.toml</code>. In
this instance, we’re just adding <code>uuid</code>, so it will be the only one that’s
overridden. This path can be either absolute or relative to the directory that
contains the <code>.cargo</code> folder.</p>
<p>Path overrides are more restricted than the <code>[patch]</code> section, however, in
that they cannot change the structure of the dependency graph. When a
path replacement is used then the previous set of dependencies
must all match exactly to the new <code>Cargo.toml</code> specification. For example this
means that path overrides cannot be used to test out adding a dependency to a
crate, instead <code>[patch]</code> must be used in that situation. As a result usage of a
path override is typically isolated to quick bug fixes rather than larger
changes.</p>
<p>Note: using a local configuration to override paths will only work for crates
that have been published to <a href="https://crates.io/">crates.io</a>. You cannot use this feature to tell
Cargo how to find local unpublished crates.</p>
<h2><a class="header" href="#the-manifest-format" id="the-manifest-format">The Manifest Format</a></h2>
<p>The <code>Cargo.toml</code> file for each package is called its <em>manifest</em>. Every manifest
file consists of the following sections:</p>
<ul>
<li><a href="reference/unstable.html"><code>cargo-features</code></a> — Unstable, nightly-only features.</li>
<li><a href="reference/manifest.html#the-package-section"><code>[package]</code></a> — Defines a package.
<ul>
<li><a href="reference/manifest.html#the-name-field"><code>name</code></a> — The name of the package.</li>
<li><a href="reference/manifest.html#the-version-field"><code>version</code></a> — The version of the package.</li>
<li><a href="reference/manifest.html#the-authors-field"><code>authors</code></a> — The authors of the package.</li>
<li><a href="reference/manifest.html#the-edition-field"><code>edition</code></a> — The Rust edition.</li>
<li><a href="reference/manifest.html#the-description-field"><code>description</code></a> — A description of the package.</li>
<li><a href="reference/manifest.html#the-documentation-field"><code>documentation</code></a> — URL of the package documentation.</li>
<li><a href="reference/manifest.html#the-readme-field"><code>readme</code></a> — Path to the package's README file.</li>
<li><a href="reference/manifest.html#the-homepage-field"><code>homepage</code></a> — URL of the package homepage.</li>
<li><a href="reference/manifest.html#the-repository-field"><code>repository</code></a> — URL of the package source repository.</li>
<li><a href="reference/manifest.html#the-license-and-license-file-fields"><code>license</code></a> — The package license.</li>
<li><a href="reference/manifest.html#the-license-and-license-file-fields"><code>license-file</code></a> — Path to the text of the license.</li>
<li><a href="reference/manifest.html#the-keywords-field"><code>keywords</code></a> — Keywords for the package.</li>
<li><a href="reference/manifest.html#the-categories-field"><code>categories</code></a> — Categories of the package.</li>
<li><a href="reference/manifest.html#the-workspace-field"><code>workspace</code></a> — Path to the workspace for the package.</li>
<li><a href="reference/manifest.html#the-build-field"><code>build</code></a> — Path to the package build script.</li>
<li><a href="reference/manifest.html#the-links-field"><code>links</code></a> — Name of the native library the package links with.</li>
<li><a href="reference/manifest.html#the-exclude-and-include-fields"><code>exclude</code></a> — Files to exclude when publishing.</li>
<li><a href="reference/manifest.html#the-exclude-and-include-fields"><code>include</code></a> — Files to include when publishing.</li>
<li><a href="reference/manifest.html#the-publish-field"><code>publish</code></a> — Can be used to prevent publishing the package.</li>
<li><a href="reference/manifest.html#the-metadata-table"><code>metadata</code></a> — Extra settings for external tools.</li>
<li><a href="reference/manifest.html#the-default-run-field"><code>default-run</code></a> — The default binary to run by <a href="reference/../commands/cargo-run.html"><code>cargo run</code></a>.</li>
<li><a href="reference/cargo-targets.html#target-auto-discovery"><code>autobins</code></a> — Disables binary auto discovery.</li>
<li><a href="reference/cargo-targets.html#target-auto-discovery"><code>autoexamples</code></a> — Disables example auto discovery.</li>
<li><a href="reference/cargo-targets.html#target-auto-discovery"><code>autotests</code></a> — Disables test auto discovery.</li>
<li><a href="reference/cargo-targets.html#target-auto-discovery"><code>autobenches</code></a> — Disables bench auto discovery.</li>
</ul>
</li>
<li>Target tables: (see <a href="reference/cargo-targets.html#configuring-a-target">configuration</a> for settings)
<ul>
<li><a href="reference/cargo-targets.html#library"><code>[lib]</code></a> — Library target settings.</li>
<li><a href="reference/cargo-targets.html#binaries"><code>[[bin]]</code></a> — Binary target settings.</li>
<li><a href="reference/cargo-targets.html#examples"><code>[[example]]</code></a> — Example target settings.</li>
<li><a href="reference/cargo-targets.html#tests"><code>[[test]]</code></a> — Test target settings.</li>
<li><a href="reference/cargo-targets.html#benchmarks"><code>[[bench]]</code></a> — Benchmark target settings.</li>
</ul>
</li>
<li>Dependency tables:
<ul>
<li><a href="reference/specifying-dependencies.html"><code>[dependencies]</code></a> — Package library dependencies.</li>
<li><a href="reference/specifying-dependencies.html#development-dependencies"><code>[dev-dependencies]</code></a> — Dependencies for examples, tests, and benchmarks.</li>
<li><a href="reference/specifying-dependencies.html#build-dependencies"><code>[build-dependencies]</code></a> — Dependencies for build scripts.</li>
<li><a href="reference/specifying-dependencies.html#platform-specific-dependencies"><code>[target]</code></a> — Platform-specific dependencies.</li>
</ul>
</li>
<li><a href="reference/manifest.html#the-badges-section"><code>[badges]</code></a> — Badges to display on <a href="https://crates.io/">crates.io</a>.</li>
<li><a href="reference/features.html"><code>[features]</code></a> — Conditional compilation features.</li>
<li><a href="reference/overriding-dependencies.html#the-patch-section"><code>[patch]</code></a> — Override dependencies.</li>
<li><a href="reference/overriding-dependencies.html#the-replace-section"><code>[replace]</code></a> — Override dependencies (deprecated).</li>
<li><a href="reference/profiles.html"><code>[profile]</code></a> — Compiler settings and optimizations.</li>
<li><a href="reference/workspaces.html"><code>[workspace]</code></a> — The workspace definition.</li>
</ul>
<p><a id="package-metadata"></a></p>
<h3><a class="header" href="#the-package-section" id="the-package-section">The <code>[package]</code> section</a></h3>
<p>The first section in a <code>Cargo.toml</code> is <code>[package]</code>.</p>
<pre><code class="language-toml">[package]
name = &quot;hello_world&quot; # the name of the package
version = &quot;0.1.0&quot;    # the current version, obeying semver
authors = [&quot;Alice &lt;a@example.com&gt;&quot;, &quot;Bob &lt;b@example.com&gt;&quot;]
</code></pre>
<p>The only fields required by Cargo are <a href="reference/manifest.html#the-name-field"><code>name</code></a> and
<a href="reference/manifest.html#the-version-field"><code>version</code></a>. If publishing to a registry, the registry may
require additional fields. See the notes below and <a href="reference/publishing.html">the publishing
chapter</a> for requirements for publishing to <a href="https://crates.io/">crates.io</a>.</p>
<h4><a class="header" href="#the-name-field" id="the-name-field">The <code>name</code> field</a></h4>
<p>The package name is an identifier used to refer to the package. It is used
when listed as a dependency in another package, and as the default name of
inferred lib and bin targets.</p>
<p>The name must use only <a href="reference/../../std/primitive.char.html#method.is_alphanumeric">alphanumeric</a> characters or <code>-</code> or <code>_</code>, and cannot be empty.
Note that <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a> and <a href="reference/../commands/cargo-init.html"><code>cargo init</code></a> impose some additional restrictions on
the package name, such as enforcing that it is a valid Rust identifier and not
a keyword. <a href="https://crates.io/">crates.io</a> imposes even more restrictions, such as
enforcing only ASCII characters, not a reserved name, not a special Windows
name such as &quot;nul&quot;, is not too long, etc.</p>
<h4><a class="header" href="#the-version-field" id="the-version-field">The <code>version</code> field</a></h4>
<p>Cargo bakes in the concept of <a href="https://semver.org/">Semantic
Versioning</a>, so make sure you follow some basic rules:</p>
<ul>
<li>Before you reach 1.0.0, anything goes, but if you make breaking changes,
increment the minor version. In Rust, breaking changes include adding fields to
structs or variants to enums.</li>
<li>After 1.0.0, only make breaking changes when you increment the major version.
Don’t break the build.</li>
<li>After 1.0.0, don’t add any new public API (no new <code>pub</code> anything) in patch-level
versions. Always increment the minor version if you add any new <code>pub</code> structs,
traits, fields, types, functions, methods or anything else.</li>
<li>Use version numbers with three numeric parts such as 1.0.0 rather than 1.0.</li>
</ul>
<p><a id="the-authors-field-optional"></a></p>
<h4><a class="header" href="#the-authors-field" id="the-authors-field">The <code>authors</code> field</a></h4>
<p>The <code>authors</code> field lists people or organizations that are considered the
&quot;authors&quot; of the package. The exact meaning is open to interpretation — it may
list the original or primary authors, current maintainers, or owners of the
package. These names will be listed on the crate's page on
<a href="https://crates.io/">crates.io</a>. An optional email address may be included within angled
brackets at the end of each author.</p>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> requires at least one author to be listed.</p>
</blockquote>
<p><a id="the-edition-field-optional"></a></p>
<h4><a class="header" href="#the-edition-field" id="the-edition-field">The <code>edition</code> field</a></h4>
<p>You can opt in to a specific <a href="reference/../../edition-guide/index.html">Rust Edition</a> for your package with the
<code>edition</code> key in <code>Cargo.toml</code>. If you don't specify the edition, it will
default to 2015.</p>
<pre><code class="language-toml">[package]
# ...
edition = '2018'
</code></pre>
<p>The <code>edition</code> key affects which edition your package is compiled with. Cargo
will always generate packages via <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a> with the <code>edition</code> key set to the
latest edition. Setting the <code>edition</code> key in <code>[package]</code> will affect all
targets/crates in the package, including test suites, benchmarks, binaries,
examples, etc.</p>
<h4><a class="header" href="#the-description-field" id="the-description-field">The <code>description</code> field</a></h4>
<p>The description is a short blurb about the package. <a href="https://crates.io/">crates.io</a> will display
this with your package. This should be plain text (not Markdown).</p>
<pre><code class="language-toml">[package]
# ...
description = &quot;A short description of my package&quot;
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> requires the <code>description</code> to be set.</p>
</blockquote>
<p><a id="the-documentation-field-optional"></a></p>
<h4><a class="header" href="#the-documentation-field" id="the-documentation-field">The <code>documentation</code> field</a></h4>
<p>The <code>documentation</code> field specifies a URL to a website hosting the crate's
documentation. If no URL is specified in the manifest file, <a href="https://crates.io/">crates.io</a> will
automatically link your crate to the corresponding <a href="https://docs.rs/">docs.rs</a> page.</p>
<pre><code class="language-toml">[package]
# ...
documentation = &quot;https://docs.rs/bitflags&quot;
</code></pre>
<h4><a class="header" href="#the-readme-field" id="the-readme-field">The <code>readme</code> field</a></h4>
<p>The <code>readme</code> field should be the path to a file in the package root (relative
to this <code>Cargo.toml</code>) that contains general information about the package.
This file will be transferred to the registry when you publish. <a href="https://crates.io/">crates.io</a>
will interpret it as Markdown and render it on the crate's page.</p>
<pre><code class="language-toml">[package]
# ...
readme = &quot;README.md&quot;
</code></pre>
<p>If no value is specified for this field, and a file named <code>README.md</code>,
<code>README.txt</code> or <code>README</code> exists in the package root, then the name of that
file will be used. You can suppress this behavior by setting this field to
<code>false</code>. If the field is set to <code>true</code>, a default value of <code>README.md</code> will
be assumed.</p>
<h4><a class="header" href="#the-homepage-field" id="the-homepage-field">The <code>homepage</code> field</a></h4>
<p>The <code>homepage</code> field should be a URL to a site that is the home page for your
package.</p>
<pre><code class="language-toml">[package]
# ...
homepage = &quot;https://serde.rs/&quot;
</code></pre>
<h4><a class="header" href="#the-repository-field" id="the-repository-field">The <code>repository</code> field</a></h4>
<p>The <code>repository</code> field should be a URL to the source repository for your
package.</p>
<pre><code class="language-toml">[package]
# ...
repository = &quot;https://github.com/rust-lang/cargo/&quot;
</code></pre>
<h4><a class="header" href="#the-license-and-license-file-fields" id="the-license-and-license-file-fields">The <code>license</code> and <code>license-file</code> fields</a></h4>
<p>The <code>license</code> field contains the name of the software license that the package
is released under. The <code>license-file</code> field contains the path to a file
containing the text of the license (relative to this <code>Cargo.toml</code>).</p>
<p><a href="https://crates.io/">crates.io</a> interprets the <code>license</code> field as an <a href="https://spdx.org/spdx-specification-21-web-version#h.jxpfx0ykyb60">SPDX 2.1 license
expression</a>. The name must be a known license
from the <a href="https://github.com/spdx/license-list-data/tree/v3.6">SPDX license list 3.6</a>. Parentheses are not
currently supported. See the <a href="https://spdx.org/license-list">SPDX site</a> for more information.</p>
<p>SPDX license expressions support AND and OR operators to combine multiple
licenses.<sup class="footnote-reference"><a href="#slash">1</a></sup></p>
<pre><code class="language-toml">[package]
# ...
license = &quot;MIT OR Apache-2.0&quot;
</code></pre>
<p>Using <code>OR</code> indicates the user may choose either license. Using <code>AND</code> indicates
the user must comply with both licenses simultaneously. The <code>WITH</code> operator
indicates a license with a special exception. Some examples:</p>
<ul>
<li><code>MIT OR Apache-2.0</code></li>
<li><code>LGPL-2.1 AND MIT AND BSD-2-Clause</code></li>
<li><code>GPL-2.0+ WITH Bison-exception-2.2</code></li>
</ul>
<p>If a package is using a nonstandard license, then the <code>license-file</code> field may
be specified in lieu of the <code>license</code> field.</p>
<pre><code class="language-toml">[package]
# ...
license-file = &quot;LICENSE.txt&quot;
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> requires either <code>license</code> or <code>license-file</code> to be set.</p>
</blockquote>
<div class="footnote-definition" id="slash"><sup class="footnote-definition-label">1</sup>
<p>Previously multiple licenses could be separated with a <code>/</code>, but that
usage is deprecated.</p>
</div>
<h4><a class="header" href="#the-keywords-field" id="the-keywords-field">The <code>keywords</code> field</a></h4>
<p>The <code>keywords</code> field is an array of strings that describe this package. This
can help when searching for the package on a registry, and you may choose any
words that would help someone find this crate.</p>
<pre><code class="language-toml">[package]
# ...
keywords = [&quot;gamedev&quot;, &quot;graphics&quot;]
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> has a maximum of 5 keywords. Each keyword must be
ASCII text, start with a letter, and only contain letters, numbers, <code>_</code> or
<code>-</code>, and have at most 20 characters.</p>
</blockquote>
<h4><a class="header" href="#the-categories-field" id="the-categories-field">The <code>categories</code> field</a></h4>
<p>The <code>categories</code> field is an array of strings of the categories this package
belongs to.</p>
<pre><code class="language-toml">categories = [&quot;command-line-utilities&quot;, &quot;development-tools::cargo-plugins&quot;]
</code></pre>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> has a maximum of 5 categories. Each category should
match one of the strings available at <a href="https://crates.io/category_slugs">https://crates.io/category_slugs</a>, and
must match exactly.</p>
</blockquote>
<p><a id="the-workspace--field-optional"></a></p>
<h4><a class="header" href="#the-workspace-field" id="the-workspace-field">The <code>workspace</code> field</a></h4>
<p>The <code>workspace</code> field can be used to configure the workspace that this package
will be a member of. If not specified this will be inferred as the first
Cargo.toml with <code>[workspace]</code> upwards in the filesystem. Setting this is
useful if the member is not inside a subdirectory of the workspace root.</p>
<pre><code class="language-toml">[package]
# ...
workspace = &quot;path/to/workspace/root&quot;
</code></pre>
<p>This field cannot be specified if the manifest already has a <code>[workspace]</code>
table defined. That is, a crate cannot both be a root crate in a workspace
(contain <code>[workspace]</code>) and also be a member crate of another workspace
(contain <code>package.workspace</code>).</p>
<p>For more information, see the <a href="reference/workspaces.html">workspaces chapter</a>.</p>
<p><a id="package-build"></a>
<a id="the-build-field-optional"></a></p>
<h4><a class="header" href="#the-build-field" id="the-build-field">The <code>build</code> field</a></h4>
<p>The <code>build</code> field specifies a file in the package root which is a <a href="reference/build-scripts.html">build
script</a> for building native code. More information can be found in the <a href="reference/build-scripts.html">build
script guide</a>.</p>
<pre><code class="language-toml">[package]
# ...
build = &quot;build.rs&quot;
</code></pre>
<p>The default is <code>&quot;build.rs&quot;</code>, which loads the script from a file named
<code>build.rs</code> in the root of the package. Use <code>build = &quot;custom_build_name.rs&quot;</code> to
specify a path to a different file or <code>build = false</code> to disable automatic
detection of the build script.</p>
<p><a id="the-links-field-optional"></a></p>
<h4><a class="header" href="#the-links-field" id="the-links-field">The <code>links</code> field</a></h4>
<p>The <code>links</code> field specifies the name of a native library that is being linked
to. More information can be found in the <a href="reference/build-scripts.html#the-links-manifest-key"><code>links</code></a> section of the build
script guide.</p>
<pre><code class="language-toml">[package]
# ...
links = &quot;foo&quot;
</code></pre>
<p><a id="the-exclude-and-include-fields-optional"></a></p>
<h4><a class="header" href="#the-exclude-and-include-fields" id="the-exclude-and-include-fields">The <code>exclude</code> and <code>include</code> fields</a></h4>
<p>You can explicitly specify that a set of file patterns should be ignored or
included for the purposes of packaging. The patterns specified in the
<code>exclude</code> field identify a set of files that are not included, and the
patterns in <code>include</code> specify files that are explicitly included.</p>
<p>The patterns should be <a href="https://git-scm.com/docs/gitignore">gitignore</a>-style patterns. Briefly:</p>
<ul>
<li><code>foo</code> matches any file or directory with the name <code>foo</code> anywhere in the
package. This is equivalent to the pattern <code>**/foo</code>.</li>
<li><code>/foo</code> matches any file or directory with the name <code>foo</code> only in the root of
the package.</li>
<li><code>foo/</code> matches any <em>directory</em> with the name <code>foo</code> anywhere in the package.</li>
<li>Common glob patterns like <code>*</code>, <code>?</code>, and <code>[]</code> are supported:
<ul>
<li><code>*</code> matches zero or more characters except <code>/</code>.  For example, <code>*.html</code>
matches any file or directory with the <code>.html</code> extension anywhere in the
package.</li>
<li><code>?</code> matches any character except <code>/</code>. For example, <code>foo?</code> matches <code>food</code>,
but not <code>foo</code>.</li>
<li><code>[]</code> allows for matching a range of characters. For example, <code>[ab]</code>
matches either <code>a</code> or <code>b</code>. <code>[a-z]</code> matches letters a through z.</li>
</ul>
</li>
<li><code>**/</code> prefix matches in any directory. For example, <code>**/foo/bar</code> matches the
file or directory <code>bar</code> anywhere that is directly under directory <code>foo</code>.</li>
<li><code>/**</code> suffix matches everything inside. For example, <code>foo/**</code> matches all
files inside directory <code>foo</code>, including all files in subdirectories below
<code>foo</code>.</li>
<li><code>/**/</code> matches zero or more directories. For example, <code>a/**/b</code> matches
<code>a/b</code>, <code>a/x/b</code>, <code>a/x/y/b</code>, and so on.</li>
<li><code>!</code> prefix negates a pattern. For example, a pattern of <code>src/**.rs</code> and
<code>!foo.rs</code> would match all files with the <code>.rs</code> extension inside the <code>src</code>
directory, except for any file named <code>foo.rs</code>.</li>
</ul>
<p>If git is being used for a package, the <code>exclude</code> field will be seeded with
the <code>gitignore</code> settings from the repository.</p>
<pre><code class="language-toml">[package]
# ...
exclude = [&quot;build/**/*.o&quot;, &quot;doc/**/*.html&quot;]
</code></pre>
<pre><code class="language-toml">[package]
# ...
include = [&quot;src/**/*&quot;, &quot;Cargo.toml&quot;]
</code></pre>
<p>The options are mutually exclusive: setting <code>include</code> will override an
<code>exclude</code>. Note that <code>include</code> must be an exhaustive list of files as otherwise
necessary source files may not be included. The package's <code>Cargo.toml</code> is
automatically included.</p>
<p>The include/exclude list is also used for change tracking in some situations.
For targets built with <code>rustdoc</code>, it is used to determine the list of files to
track to determine if the target should be rebuilt. If the package has a
<a href="reference/build-scripts.html">build script</a> that does not emit any <code>rerun-if-*</code> directives, then the
include/exclude list is used for tracking if the build script should be re-run
if any of those files change.</p>
<p><a id="the-publish--field-optional"></a></p>
<h4><a class="header" href="#the-publish-field" id="the-publish-field">The <code>publish</code> field</a></h4>
<p>The <code>publish</code> field can be used to prevent a package from being published to a
package registry (like <em>crates.io</em>) by mistake, for instance to keep a package
private in a company.</p>
<pre><code class="language-toml">[package]
# ...
publish = false
</code></pre>
<p>The value may also be an array of strings which are registry names that are
allowed to be published to.</p>
<pre><code class="language-toml">[package]
# ...
publish = [&quot;some-registry-name&quot;]
</code></pre>
<p><a id="the-metadata-table-optional"></a></p>
<h4><a class="header" href="#the-metadata-table" id="the-metadata-table">The <code>metadata</code> table</a></h4>
<p>Cargo by default will warn about unused keys in <code>Cargo.toml</code> to assist in
detecting typos and such. The <code>package.metadata</code> table, however, is completely
ignored by Cargo and will not be warned about. This section can be used for
tools which would like to store package configuration in <code>Cargo.toml</code>. For
example:</p>
<pre><code class="language-toml">[package]
name = &quot;...&quot;
# ...

# Metadata used when generating an Android APK, for example.
[package.metadata.android]
package-name = &quot;my-awesome-android-app&quot;
assets = &quot;path/to/static&quot;
</code></pre>
<p>There is a similar table at the workspace level at
<a href="reference/workspaces.html#the-workspacemetadata-table"><code>workspace.metadata</code></a>. While cargo does not specify a
format for the content of either of these tables, it is suggested that
external tools may wish to use them in a consistent fashion, such as referring
to the data in <code>workspace.metadata</code> if data is missing from <code>package.metadata</code>,
if that makes sense for the tool in question.</p>
<h4><a class="header" href="#the-default-run-field" id="the-default-run-field">The <code>default-run</code> field</a></h4>
<p>The <code>default-run</code> field in the <code>[package]</code> section of the manifest can be used
to specify a default binary picked by <a href="reference/../commands/cargo-run.html"><code>cargo run</code></a>. For example, when there is
both <code>src/bin/a.rs</code> and <code>src/bin/b.rs</code>:</p>
<pre><code class="language-toml">[package]
default-run = &quot;a&quot;
</code></pre>
<h3><a class="header" href="#the-badges-section" id="the-badges-section">The <code>[badges]</code> section</a></h3>
<p><a href="https://crates.io/">crates.io</a> can display various badges for build status, test coverage, etc. for
each crate. All badges are optional.</p>
<ul>
<li>The badges pertaining to build status that are currently available are
Appveyor, CircleCI, Cirrus CI, GitLab, Azure DevOps, Travis CI and Bitbucket
Pipelines.</li>
<li>Available badges pertaining to code test coverage are Codecov and Coveralls.</li>
<li>There are also maintenance-related badges based on isitmaintained.com
which state the issue resolution time, percent of open issues, and future
maintenance intentions.</li>
</ul>
<p>Most badge specifications require a <code>repository</code> key. It is expected to be in
<code>user/repo</code> format.</p>
<pre><code class="language-toml">[badges]

# Appveyor: `repository` is required. `branch` is optional; default is `master`
# `service` is optional; valid values are `github` (default), `bitbucket`, and
# `gitlab`; `id` is optional; you can specify the appveyor project id if you
# want to use that instead. `project_name` is optional; use when the repository
# name differs from the appveyor project name.
appveyor = { repository = &quot;...&quot;, branch = &quot;master&quot;, service = &quot;github&quot; }

# Circle CI: `repository` is required. `branch` is optional; default is `master`
circle-ci = { repository = &quot;...&quot;, branch = &quot;master&quot; }

# Cirrus CI: `repository` is required. `branch` is optional; default is `master`
cirrus-ci = { repository = &quot;...&quot;, branch = &quot;master&quot; }

# GitLab: `repository` is required. `branch` is optional; default is `master`
gitlab = { repository = &quot;...&quot;, branch = &quot;master&quot; }

# Azure DevOps: `project` is required. `pipeline` is required. `build` is optional; default is `1`
# Note: project = `organization/project`, pipeline = `name_of_pipeline`, build = `definitionId`
azure-devops = { project = &quot;...&quot;, pipeline = &quot;...&quot;, build=&quot;2&quot; }

# Travis CI: `repository` in format &quot;&lt;user&gt;/&lt;project&gt;&quot; is required.
# `branch` is optional; default is `master`
travis-ci = { repository = &quot;...&quot;, branch = &quot;master&quot; }

# Bitbucket Pipelines: `repository` is required. `branch` is required
bitbucket-pipelines = { repository = &quot;...&quot;, branch = &quot;master&quot; }

# Codecov: `repository` is required. `branch` is optional; default is `master`
# `service` is optional; valid values are `github` (default), `bitbucket`, and
# `gitlab`.
codecov = { repository = &quot;...&quot;, branch = &quot;master&quot;, service = &quot;github&quot; }

# Coveralls: `repository` is required. `branch` is optional; default is `master`
# `service` is optional; valid values are `github` (default) and `bitbucket`.
coveralls = { repository = &quot;...&quot;, branch = &quot;master&quot;, service = &quot;github&quot; }

# Is it maintained resolution time: `repository` is required.
is-it-maintained-issue-resolution = { repository = &quot;...&quot; }

# Is it maintained percentage of open issues: `repository` is required.
is-it-maintained-open-issues = { repository = &quot;...&quot; }

# Maintenance: `status` is required. Available options are:
# - `actively-developed`: New features are being added and bugs are being fixed.
# - `passively-maintained`: There are no plans for new features, but the maintainer intends to
#   respond to issues that get filed.
# - `as-is`: The crate is feature complete, the maintainer does not intend to continue working on
#   it or providing support, but it works for the purposes it was designed for.
# - `experimental`: The author wants to share it with the community but is not intending to meet
#   anyone's particular use case.
# - `looking-for-maintainer`: The current maintainer would like to transfer the crate to someone
#   else.
# - `deprecated`: The maintainer does not recommend using this crate (the description of the crate
#   can describe why, there could be a better solution available or there could be problems with
#   the crate that the author does not want to fix).
# - `none`: Displays no badge on crates.io, since the maintainer has not chosen to specify
#   their intentions, potential crate users will need to investigate on their own.
maintenance = { status = &quot;...&quot; }
</code></pre>
<h3><a class="header" href="#dependency-sections" id="dependency-sections">Dependency sections</a></h3>
<p>See the <a href="reference/specifying-dependencies.html">specifying dependencies page</a> for
information on the <code>[dependencies]</code>, <code>[dev-dependencies]</code>,
<code>[build-dependencies]</code>, and target-specific <code>[target.*.dependencies]</code> sections.</p>
<h3><a class="header" href="#the-profile-sections" id="the-profile-sections">The <code>[profile.*]</code> sections</a></h3>
<p>The <code>[profile]</code> tables provide a way to customize compiler settings such as
optimizations and debug settings. See <a href="reference/profiles.html">the Profiles chapter</a> for
more detail.</p>
<script>
(function() {
    var fragments = {
        "#the-project-layout": "../guide/project-layout.html",
        "#examples": "cargo-targets.html#examples",
        "#tests": "cargo-targets.html#tests",
        "#integration-tests": "cargo-targets.html#integration-tests",
        "#configuring-a-target": "cargo-targets.html#configuring-a-target",
        "#target-auto-discovery": "cargo-targets.html#target-auto-discovery",
        "#the-required-features-field-optional": "cargo-targets.html#the-required-features-field",
        "#building-dynamic-or-static-libraries": "cargo-targets.html#the-crate-type-field",
        "#the-workspace-section": "workspaces.html#the-workspace-section",
        "#virtual-manifest": "workspaces.html",
        "#package-selection": "workspaces.html#package-selection",
        "#the-features-section": "features.html#the-features-section",
        "#rules": "features.html#rules",
        "#usage-in-end-products": "features.html#usage-in-end-products",
        "#usage-in-packages": "features.html#usage-in-packages",
        "#the-patch-section": "overriding-dependencies.html#the-patch-section",
        "#using-patch-with-multiple-versions": "overriding-dependencies.html#using-patch-with-multiple-versions",
        "#the-replace-section": "overriding-dependencies.html#the-replace-section",
    };
    var target = fragments[window.location.hash];
    if (target) {
        var url = window.location.toString();
        var base = url.substring(0, url.lastIndexOf('/'));
        window.location.replace(base + "/" + target);
    }
})();
</script>
<h2><a class="header" href="#cargo-targets" id="cargo-targets">Cargo Targets</a></h2>
<p>Cargo packages consist of <em>targets</em> which correspond to source files which can
be compiled into a crate. Packages can have <a href="reference/cargo-targets.html#library">library</a>,
<a href="reference/cargo-targets.html#binaries">binary</a>, <a href="reference/cargo-targets.html#examples">example</a>, <a href="reference/cargo-targets.html#tests">test</a>, and
<a href="reference/cargo-targets.html#benchmarks">benchmark</a> targets. The list of targets can be configured in the
<code>Cargo.toml</code> manifest, often <a href="reference/cargo-targets.html#target-auto-discovery">inferred automatically</a>
by the <a href="reference/../guide/project-layout.html">directory layout</a> of the source files.</p>
<p>See <a href="reference/cargo-targets.html#configuring-a-target">Configuring a target</a> below for details on
configuring the settings for a target.</p>
<h3><a class="header" href="#library" id="library">Library</a></h3>
<p>The library target defines a &quot;library&quot; that can be used and linked by other
libraries and executables. The filename defaults to <code>src/lib.rs</code>, and the name
of the library defaults to the name of the package. A package can have only
one library. The settings for the library can be <a href="reference/cargo-targets.html#configuring-a-target">customized</a> in the <code>[lib]</code>
table in <code>Cargo.toml</code>.</p>
<pre><code class="language-toml"># Example of customizing the library in Cargo.toml.
[lib]
crate-type = [&quot;cdylib&quot;]
bench = false
</code></pre>
<h3><a class="header" href="#binaries" id="binaries">Binaries</a></h3>
<p>Binary targets are executables programs that can be run after being compiled.
The default binary filename is <code>src/main.rs</code>, which defaults to the name of
the package. Additional binaries are stored in the <a href="reference/../guide/project-layout.html"><code>src/bin/</code>
directory</a>. The settings for each binary can be <a href="reference/cargo-targets.html#configuring-a-target">customized</a>
in the <code>[[bin]]</code> tables in <code>Cargo.toml</code>.</p>
<p>Binaries can use the public API of the package's library. They are also linked
with the <a href="reference/specifying-dependencies.html"><code>[dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>You can run individual binaries with the <a href="reference/../commands/cargo-run.html"><code>cargo run</code></a> command with the <code>--bin &lt;bin-name&gt;</code> option. <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a> can be used to copy the executable to a
common location.</p>
<pre><code class="language-toml"># Example of customizing binaries in Cargo.toml.
[[bin]]
name = &quot;cool-tool&quot;
test = false
bench = false

[[bin]]
name = &quot;frobnicator&quot;
required-features = [&quot;frobnicate&quot;]
</code></pre>
<h3><a class="header" href="#examples" id="examples">Examples</a></h3>
<p>Files located under the <a href="reference/../guide/project-layout.html"><code>examples</code> directory</a> are example
uses of the functionality provided by the library. When compiled, they are
placed in the <a href="reference/../guide/build-cache.html"><code>target/debug/examples</code> directory</a>.</p>
<p>Examples can use the public API of the package's library. They are also linked
with the <a href="reference/specifying-dependencies.html"><code>[dependencies]</code></a> and
<a href="reference/specifying-dependencies.html#development-dependencies"><code>[dev-dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>By default, examples are executable binaries (with a <code>main()</code> function). You
can specify the <a href="reference/cargo-targets.html#the-crate-type-field"><code>crate-type</code> field</a> to make an example
be compiled as a library:</p>
<pre><code class="language-toml">[[example]]
name = &quot;foo&quot;
crate-type = [&quot;staticlib&quot;]
</code></pre>
<p>You can run individual executable examples with the <a href="reference/../commands/cargo-run.html"><code>cargo run</code></a> command with
the <code>--example &lt;example-name&gt;</code> option. Library examples can be built with
<a href="reference/../commands/cargo-build.html"><code>cargo build</code></a> with the <code>--example &lt;example-name&gt;</code> option. <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a>
with the <code>--example &lt;example-name&gt;</code> option can be used to copy executable
binaries to a common location. Examples are compiled by <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> by
default to protect them from bit-rotting. Set <a href="reference/cargo-targets.html#the-test-field">the <code>test</code>
field</a> to <code>true</code> if you have <code>#[test]</code> functions in the
example that you want to run with <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a>.</p>
<h3><a class="header" href="#tests-1" id="tests-1">Tests</a></h3>
<p>There are two styles of tests within a Cargo project:</p>
<ul>
<li><em>Unit tests</em> which are functions marked with the <a href="reference/../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code>
attribute</a> located within your library or binaries (or any
target enabled with <a href="reference/cargo-targets.html#the-test-field">the <code>test</code> field</a>). These tests have
access to private APIs located within the target they are defined in.</li>
<li><em>Integration tests</em> which is a separate executable binary, also containing
<code>#[test]</code> functions, which is linked with the project's library and has
access to its <em>public</em> API.</li>
</ul>
<p>Tests are run with the <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> command. By default, Cargo and <code>rustc</code>
use the libtest harness which is responsible for collecting functions
annotated with the <a href="reference/../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code> attribute</a> and executing them in
parallel, reporting the success and failure of each test. See <a href="reference/cargo-targets.html#the-harness-field">the <code>harness</code>
field</a> if you want to use a different harness or test
strategy.</p>
<h4><a class="header" href="#integration-tests" id="integration-tests">Integration tests</a></h4>
<p>Files located under the <a href="reference/../guide/project-layout.html"><code>tests</code> directory</a> are integration
tests. When you run <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a>, Cargo will compile each of these files as
a separate crate, and execute them.</p>
<p>Integration tests can use the public API of the package's library. They are
also linked with the <a href="reference/specifying-dependencies.html"><code>[dependencies]</code></a> and
<a href="reference/specifying-dependencies.html#development-dependencies"><code>[dev-dependencies]</code></a> defined in <code>Cargo.toml</code>.</p>
<p>If you want to share code among multiple integration tests, you can place it
in a separate module such as <code>tests/common/mod.rs</code> and then put <code>mod common;</code>
in each test to import it.</p>
<p>Each integration test results in a separate executable binary, and <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> will run them serially. In some cases this can be inefficient, as it
can take longer to compile, and may not make full use of multiple CPUs when
running the tests. If you have a lot of integration tests, you may want to
consider creating a single integration test, and split the tests into multiple
modules. The libtest harness will automatically find all of the <code>#[test]</code>
annotated functions and run them in parallel. You can pass module names to
<a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> to only run the tests within that module.</p>
<p>Binary targets are automatically built if there is an integration test. This
allows an integration test to execute the binary to exercise and test its
behavior. The <code>CARGO_BIN_EXE_&lt;name&gt;</code> <a href="reference/environment-variables.html#environment-variables-cargo-sets-for-crates">environment variable</a> is set when the
integration test is built so that it can use the <a href="reference/../../std/macro.env.html"><code>env</code> macro</a> to locate the
executable.</p>
<h3><a class="header" href="#benchmarks" id="benchmarks">Benchmarks</a></h3>
<p>Benchmarks provide a way to test the performance of your code using the
<a href="reference/../commands/cargo-bench.html"><code>cargo bench</code></a> command. They follow the same structure as <a href="reference/cargo-targets.html#tests">tests</a>,
with each benchmark function annotated with the <code>#[bench]</code> attribute.
Similarly to tests:</p>
<ul>
<li>Benchmarks are placed in the <a href="reference/../guide/project-layout.html"><code>benches</code> directory</a>.</li>
<li>Benchmark functions defined in libraries and binaries have access to the
<em>private</em> API within the target they are defined in. Benchmarks in the
<code>benches</code> directory may use the <em>public</em> API.</li>
<li><a href="reference/cargo-targets.html#the-bench-field">The <code>bench</code> field</a> can be used to define which targets
are benchmarked by default.</li>
<li><a href="reference/cargo-targets.html#the-harness-field">The <code>harness</code> field</a> can be used to disable the
built-in harness.</li>
</ul>
<blockquote>
<p><strong>Note</strong>: The <a href="reference/../../unstable-book/library-features/test.html"><code>#[bench]</code>
attribute</a> is currently
unstable and only available on the <a href="reference/../../book/appendix-07-nightly-rust.html">nightly channel</a>. There are some
packages available on <a href="https://crates.io/keywords/benchmark">crates.io</a> that
may help with running benchmarks on the stable channel, such as
<a href="https://crates.io/crates/criterion">Criterion</a>.</p>
</blockquote>
<h3><a class="header" href="#configuring-a-target" id="configuring-a-target">Configuring a target</a></h3>
<p>All of the  <code>[lib]</code>, <code>[[bin]]</code>, <code>[[example]]</code>, <code>[[test]]</code>, and <code>[[bench]]</code>
sections in <code>Cargo.toml</code> support similar configuration for specifying how a
target should be built. The double-bracket sections like <code>[[bin]]</code> are
array-of-table of <a href="https://github.com/toml-lang/toml#array-of-tables">TOML</a>,
which means you can write more than one <code>[[bin]]</code> section to make several
executables in your crate. You can only specify one library, so <code>[lib]</code> is a
normal TOML table.</p>
<p>The following is an overview of the TOML settings for each target, with each
field described in detail below.</p>
<pre><code class="language-toml">[lib]
name = &quot;foo&quot;           # The name of the target.
path = &quot;src/lib.rs&quot;    # The source file of the target.
test = true            # Is tested by default.
doctest = true         # Documentation examples are tested by default.
bench = true           # Is benchmarked by default.
doc = true             # Is documented by default.
plugin = false         # Used as a compiler plugin (deprecated).
proc-macro = false     # Set to `true` for a proc-macro library.
harness = true         # Use libtest harness.
edition = &quot;2015&quot;       # The edition of the target.
crate-type = [&quot;lib&quot;]   # The crate types to generate.
required-features = [] # Features required to build this target (N/A for lib).
</code></pre>
<h4><a class="header" href="#the-name-field-1" id="the-name-field-1">The <code>name</code> field</a></h4>
<p>The <code>name</code> field specifies the name of the target, which corresponds to the
filename of the artifact that will be generated. For a library, this is the
crate name that dependencies will use to reference it.</p>
<p>For the <code>[lib]</code> and the default binary (<code>src/main.rs</code>), this defaults to the
name of the package, with any dashes replaced with underscores. For other
<a href="reference/cargo-targets.html#target-auto-discovery">auto discovered</a> targets, it defaults to the
directory or file name.</p>
<p>This is required for all targets except <code>[lib]</code>.</p>
<h4><a class="header" href="#the-path-field" id="the-path-field">The <code>path</code> field</a></h4>
<p>The <code>path</code> field specifies where the source for the crate is located, relative
to the <code>Cargo.toml</code> file.</p>
<p>If not specified, the <a href="reference/cargo-targets.html#target-auto-discovery">inferred path</a> is used based on
the target name.</p>
<h4><a class="header" href="#the-test-field" id="the-test-field">The <code>test</code> field</a></h4>
<p>The <code>test</code> field indicates whether or not the target is tested by default by
<a href="reference/../commands/cargo-test.html"><code>cargo test</code></a>. The default is <code>true</code> for lib, bins, and tests.</p>
<blockquote>
<p><strong>Note</strong>: Examples are built by <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> by default to ensure they
continue to compile, but they are not <em>tested</em> by default. Setting <code>test = true</code> for an example will also build it as a test and run any
<a href="reference/../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code></a> functions defined in the example.</p>
</blockquote>
<h4><a class="header" href="#the-doctest-field" id="the-doctest-field">The <code>doctest</code> field</a></h4>
<p>The <code>doctest</code> field indicates whether or not <a href="reference/../../rustdoc/documentation-tests.html">documentation examples</a> are
tested by default by <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a>. This is only relevant for libraries, it
has no effect on other sections. The default is <code>true</code> for the library.</p>
<h4><a class="header" href="#the-bench-field" id="the-bench-field">The <code>bench</code> field</a></h4>
<p>The <code>bench</code> field indicates whether or not the target is benchmarked by
default by <a href="reference/../commands/cargo-bench.html"><code>cargo bench</code></a>. The default is <code>true</code> for lib, bins, and
benchmarks.</p>
<h4><a class="header" href="#the-doc-field" id="the-doc-field">The <code>doc</code> field</a></h4>
<p>The <code>doc</code> field indicates whether or not the target is included in the
documentation generated by <a href="reference/../commands/cargo-doc.html"><code>cargo doc</code></a> by default. The default is <code>true</code> for
libraries and binaries.</p>
<blockquote>
<p><strong>Note</strong>: The binary will be skipped if its name is the same as the lib
target.</p>
</blockquote>
<h4><a class="header" href="#the-plugin-field" id="the-plugin-field">The <code>plugin</code> field</a></h4>
<p>This field is used for <code>rustc</code> plugins, which are being deprecated.</p>
<h4><a class="header" href="#the-proc-macro-field" id="the-proc-macro-field">The <code>proc-macro</code> field</a></h4>
<p>The <code>proc-macro</code> field indicates that the library is a <a href="reference/../../book/ch19-06-macros.html">procedural macro</a>
(<a href="reference/../../reference/procedural-macros.html">reference</a>). This is only valid for the <code>[lib]</code>
target.</p>
<h4><a class="header" href="#the-harness-field" id="the-harness-field">The <code>harness</code> field</a></h4>
<p>The <code>harness</code> field indicates that the <a href="reference/../../rustc/command-line-arguments.html#option-test"><code>--test</code> flag</a> will be passed to
<code>rustc</code> which will automatically include the libtest library which is the
driver for collecting and running tests marked with the <a href="reference/../../reference/attributes/testing.html#the-test-attribute"><code>#[test]</code>
attribute</a> or benchmarks with the <code>#[bench]</code> attribute. The
default is <code>true</code> for all targets.</p>
<p>If set to <code>false</code>, then you are responsible for defining a <code>main()</code> function
to run tests and benchmarks.</p>
<p>Tests have the <a href="reference/../../reference/conditional-compilation.html#test"><code>cfg(test)</code> conditional expression</a> enabled whether
or not the harness is enabled.</p>
<h4><a class="header" href="#the-edition-field-1" id="the-edition-field-1">The <code>edition</code> field</a></h4>
<p>The <code>edition</code> field defines the <a href="reference/../../edition-guide/index.html">Rust edition</a> the target will use. If not
specified, it defaults to the <a href="reference/manifest.html#the-edition-field"><code>edition</code> field</a> for the
<code>[package]</code>. This field should usually not be set, and is only intended for
advanced scenarios such as incrementally transitioning a large package to a
new edition.</p>
<h4><a class="header" href="#the-crate-type-field" id="the-crate-type-field">The <code>crate-type</code> field</a></h4>
<p>The <code>crate-type</code> field defines the <a href="reference/../../reference/linkage.html">crate types</a> that will be generated by the
target. It is an array of strings, allowing you to specify multiple crate
types for a single target. This can only be specified for libraries and
examples. Binaries, tests, and benchmarks are always the &quot;bin&quot; crate type. The
defaults are:</p>
<table><thead><tr><th>Target</th><th>Crate Type</th></tr></thead><tbody>
<tr><td>Normal library</td><td><code>&quot;lib&quot;</code></td></tr>
<tr><td>Proc-macro library</td><td><code>&quot;proc-macro&quot;</code></td></tr>
<tr><td>Example</td><td><code>&quot;bin&quot;</code></td></tr>
</tbody></table>
<p>The available options are <code>bin</code>, <code>lib</code>, <code>rlib</code>, <code>dylib</code>, <code>cdylib</code>,
<code>staticlib</code>, and <code>proc-macro</code>. You can read more about the different crate
types in the <a href="reference/../../reference/linkage.html">Rust Reference Manual</a>.</p>
<h4><a class="header" href="#the-required-features-field" id="the-required-features-field">The <code>required-features</code> field</a></h4>
<p>The <code>required-features</code> field specifies which <a href="reference/features.html">features</a> the target needs in
order to be built. If any of the required features are not enabled, the
target will be skipped. This is only relevant for the <code>[[bin]]</code>, <code>[[bench]]</code>,
<code>[[test]]</code>, and <code>[[example]]</code> sections, it has no effect on <code>[lib]</code>.</p>
<pre><code class="language-toml">[features]
# ...
postgres = []
sqlite = []
tools = []

[[bin]]
name = &quot;my-pg-tool&quot;
required-features = [&quot;postgres&quot;, &quot;tools&quot;]
</code></pre>
<h3><a class="header" href="#target-auto-discovery" id="target-auto-discovery">Target auto-discovery</a></h3>
<p>By default, Cargo automatically determines the targets to build based on the
<a href="reference/../guide/project-layout.html">layout of the files</a> on the filesystem. The target
configuration tables, such as <code>[lib]</code>, <code>[[bin]]</code>, <code>[[test]]</code>, <code>[[bench]]</code>, or
<code>[[example]]</code>, can be used to add additional targets that don't follow the
standard directory layout.</p>
<p>The automatic target discovery can be disabled so that only manually
configured targets will be built. Setting the keys <code>autobins</code>, <code>autoexamples</code>,
<code>autotests</code>, or <code>autobenches</code> to <code>false</code> in the <code>[package]</code> section will
disable auto-discovery of the corresponding target type.</p>
<pre><code class="language-toml">[package]
# ...
autobins = false
autoexamples = false
autotests = false
autobenches = false
</code></pre>
<p>Disabling automatic discovery should only be needed for specialized
situations. For example, if you have a library where you want a <em>module</em> named
<code>bin</code>, this would present a problem because Cargo would usually attempt to
compile anything in the <code>bin</code> directory as an executable. Here is a sample
layout of this scenario:</p>
<pre><code>├── Cargo.toml
└── src
    ├── lib.rs
    └── bin
        └── mod.rs
</code></pre>
<p>To prevent Cargo from inferring <code>src/bin/mod.rs</code> as an executable, set
<code>autobins = false</code> in <code>Cargo.toml</code> to disable auto-discovery:</p>
<pre><code class="language-toml">[package]
# …
autobins = false
</code></pre>
<blockquote>
<p><strong>Note</strong>: For packages with the 2015 edition, the default for auto-discovery
is <code>false</code> if at least one target is manually defined in <code>Cargo.toml</code>.
Beginning with the 2018 edition, the default is always <code>true</code>.</p>
</blockquote>
<h2><a class="header" href="#workspaces" id="workspaces">Workspaces</a></h2>
<p>A <em>workspace</em> is a collection of one or more packages that share common
dependency resolution (with a shared <code>Cargo.lock</code>), output directory, and
various settings such as profiles. Packages that are part of a workspaces are
called <em>workspace members</em>.</p>
<p>A workspace can be created by adding a <a href="reference/workspaces.html#the-workspace-section"><code>[workspace]</code>
section</a> to <code>Cargo.toml</code>. This can be added to a
<code>Cargo.toml</code> that already defines a <code>[package]</code>, in which case the package is
the <em>root package</em> of the workspace. The <em>workspace root</em> is the directory
where the workspace's <code>Cargo.toml</code> is located.</p>
<p>Alternatively, a <code>Cargo.toml</code> file can be created with a <code>[workspace]</code> section
but without a <a href="reference/manifest.html#the-package-section"><code>[package]</code> section</a>. This is called a <em>virtual
manifest</em>. This is typically useful when there isn't a &quot;primary&quot; package, or
you want to keep all the packages organized in separate directories.</p>
<p>The key points of workspaces are:</p>
<ul>
<li>All packages share a common <code>Cargo.lock</code> file which resides in the
<em>workspace root</em>.</li>
<li>All packages share a common <a href="reference/../guide/build-cache.html">output directory</a>, which defaults to a
directory named <code>target</code> in the <em>workspace root</em>.</li>
<li>The <a href="reference/overriding-dependencies.html#the-patch-section"><code>[patch]</code></a>, <a href="reference/overriding-dependencies.html#the-replace-section"><code>[replace]</code></a> and <a href="reference/profiles.html"><code>[profile.*]</code></a>
sections in <code>Cargo.toml</code> are only recognized in the <em>root</em> manifest, and
ignored in member crates' manifests.</li>
</ul>
<h3><a class="header" href="#the-workspace-section" id="the-workspace-section">The <code>[workspace]</code> section</a></h3>
<p>The <code>[workspace]</code> table in <code>Cargo.toml</code> defines which packages are members of
the workspace:</p>
<pre><code class="language-toml">[workspace]
members = [&quot;member1&quot;, &quot;path/to/member2&quot;, &quot;crates/*&quot;]
exclude = [&quot;crates/foo&quot;, &quot;path/to/other&quot;]
</code></pre>
<p>All <a href="reference/specifying-dependencies.html#specifying-path-dependencies"><code>path</code> dependencies</a> residing in the workspace directory automatically
become members. Additional members can be listed with the <code>members</code> key, which
should be an array of strings containing directories with <code>Cargo.toml</code> files.</p>
<p>The <code>members</code> list also supports <a href="https://docs.rs/glob/0.3.0/glob/struct.Pattern.html">globs</a> to match multiple paths, using
typical filename glob patterns like <code>*</code> and <code>?</code>.</p>
<p>The <code>exclude</code> key can be used to prevent paths from being included in a
workspace. This can be useful if some path dependencies aren't desired to be
in the workspace at all, or using a glob pattern and you want to remove a
directory.</p>
<p>An empty <code>[workspace]</code> table can be used with a <code>[package]</code> to conveniently
create a workspace with the package and all of its path dependencies.</p>
<h3><a class="header" href="#workspace-selection" id="workspace-selection">Workspace selection</a></h3>
<p>When inside a subdirectory within the workspace, Cargo will automatically
search the parent directories for a <code>Cargo.toml</code> file with a <code>[workspace]</code>
definition to determine which workspace to use. The <a href="reference/manifest.html#the-workspace-field"><code>package.workspace</code></a>
manifest key can be used in member crates to point at a workspace's root to
override this automatic search. The manual setting can be useful if the member
is not inside a subdirectory of the workspace root.</p>
<h3><a class="header" href="#package-selection" id="package-selection">Package selection</a></h3>
<p>In a workspace, package-related cargo commands like <a href="reference/../commands/cargo-build.html"><code>cargo build</code></a> can use
the <code>-p</code> / <code>--package</code> or <code>--workspace</code> command-line flags to determine which
packages to operate on. If neither of those flags are specified, Cargo will
use the package in the current working directory. If the current directory is
a virtual workspace, it will apply to all members (as if <code>--workspace</code> were
specified on the command-line).</p>
<p>The optional <code>default-members</code> key can be specified to set the members to
operate on when in the workspace root and the package selection flags are not
used:</p>
<pre><code class="language-toml">[workspace]
members = [&quot;path/to/member1&quot;, &quot;path/to/member2&quot;, &quot;path/to/member3/*&quot;]
default-members = [&quot;path/to/member2&quot;, &quot;path/to/member3/foo&quot;]
</code></pre>
<p>When specified, <code>default-members</code> must expand to a subset of <code>members</code>.</p>
<h3><a class="header" href="#the-workspacemetadata-table" id="the-workspacemetadata-table">The <code>workspace.metadata</code> table</a></h3>
<p>The <code>workspace.metadata</code> table is ignored by Cargo and will not be warned
about. This section can be used for tools that would like to store workspace
configuration in <code>Cargo.toml</code>. For example:</p>
<pre><code class="language-toml">[workspace]
members = [&quot;member1&quot;, &quot;member2&quot;]

[workspace.metadata.webcontents]
root = &quot;path/to/webproject&quot;
tool = [&quot;npm&quot;, &quot;run&quot;, &quot;build&quot;]
# ...
</code></pre>
<p>There is a similar set of tables at the package level at
<a href="reference/manifest.html#the-metadata-table"><code>package.metadata</code></a>. While cargo does not specify a
format for the content of either of these tables, it is suggested that
external tools may wish to use them in a consistent fashion, such as referring
to the data in <code>workspace.metadata</code> if data is missing from <code>package.metadata</code>,
if that makes sense for the tool in question.</p>
<h2><a class="header" href="#features" id="features">Features</a></h2>
<p>Cargo supports features to allow expression of:</p>
<ul>
<li>conditional compilation options (usable through <code>cfg</code> attributes);</li>
<li>optional dependencies, which enhance a package, but are not required; and</li>
<li>clusters of optional dependencies, such as <code>postgres-all</code>, that would include the
<code>postgres</code> package, the <code>postgres-macros</code> package, and possibly other packages
(such as development-time mocking libraries, debugging tools, etc.).</li>
</ul>
<p>A feature of a package is either an optional dependency, or a set of other
features.</p>
<h3><a class="header" href="#the-features-section" id="the-features-section">The <code>[features]</code> section</a></h3>
<p>Features are defined in the <code>[features]</code> table of <code>Cargo.toml</code>. The format for
specifying features is:</p>
<pre><code class="language-toml">[package]
name = &quot;awesome&quot;

[features]
# The default set of optional packages. Most people will want to use these
# packages, but they are strictly optional. Note that `session` is not a package
# but rather another feature listed in this manifest.
default = [&quot;jquery&quot;, &quot;uglifier&quot;, &quot;session&quot;]

# A feature with no dependencies is used mainly for conditional compilation,
# like `#[cfg(feature = &quot;go-faster&quot;)]`.
go-faster = []

# The `secure-password` feature depends on the bcrypt package. This aliasing
# will allow people to talk about the feature in a higher-level way and allow
# this package to add more requirements to the feature in the future.
secure-password = [&quot;bcrypt&quot;]

# Features can be used to reexport features of other packages. The `session`
# feature of package `awesome` will ensure that the `session` feature of the
# package `cookie` is also enabled.
session = [&quot;cookie/session&quot;]

[dependencies]
# These packages are mandatory and form the core of this package’s distribution.
cookie = &quot;1.2.0&quot;
oauth = &quot;1.1.0&quot;
route-recognizer = &quot;=2.1.0&quot;

# A list of all of the optional dependencies, some of which are included in the
# above `features`. They can be opted into by apps.
jquery = { version = &quot;1.0.2&quot;, optional = true }
uglifier = { version = &quot;1.5.3&quot;, optional = true }
bcrypt = { version = &quot;*&quot;, optional = true }
civet = { version = &quot;*&quot;, optional = true }
</code></pre>
<p>To use the package <code>awesome</code>:</p>
<pre><code class="language-toml">[dependencies.awesome]
version = &quot;1.3.5&quot;
default-features = false # do not include the default features, and optionally
                         # cherry-pick individual features
features = [&quot;secure-password&quot;, &quot;civet&quot;]
</code></pre>
<h3><a class="header" href="#rules" id="rules">Rules</a></h3>
<p>The usage of features is subject to a few rules:</p>
<ul>
<li>Feature names must not conflict with other package names in the manifest. This
is because they are opted into via <code>features = [...]</code>, which only has a single
namespace.</li>
<li>With the exception of the <code>default</code> feature, all features are opt-in. To opt
out of the default feature, use <code>default-features = false</code> and cherry-pick
individual features.</li>
<li>Feature groups are not allowed to cyclically depend on one another.</li>
<li>Dev-dependencies cannot be optional.</li>
<li>Features groups can only reference optional dependencies.</li>
<li>When a feature is selected, Cargo will call <code>rustc</code> with <code>--cfg feature=&quot;${feature_name}&quot;</code>. If a feature group is included, it and all of its
individual features will be included. This can be tested in code via
<code>#[cfg(feature = &quot;foo&quot;)]</code>.</li>
</ul>
<p>Note that it is explicitly allowed for features to not actually activate any
optional dependencies. This allows packages to internally enable/disable
features without requiring a new dependency.</p>
<blockquote>
<p><strong>Note</strong>: <a href="https://crates.io/">crates.io</a> requires feature names to only contain ASCII letters,
digits, <code>_</code>, or <code>-</code>.</p>
</blockquote>
<h3><a class="header" href="#usage-in-end-products" id="usage-in-end-products">Usage in end products</a></h3>
<p>One major use-case for this feature is specifying optional features in
end-products. For example, the Servo package may want to include optional
features that people can enable or disable when they build it.</p>
<p>In that case, Servo will describe features in its <code>Cargo.toml</code> and they can be
enabled using command-line flags:</p>
<pre><code class="language-console">$ cargo build --release --features &quot;shumway pdf&quot;
</code></pre>
<p>Default features could be excluded using <code>--no-default-features</code>.</p>
<h3><a class="header" href="#usage-in-packages" id="usage-in-packages">Usage in packages</a></h3>
<p>In most cases, the concept of <em>optional dependency</em> in a library is best
expressed as a separate package that the top-level application depends on.</p>
<p>However, high-level packages, like Iron or Piston, may want the ability to
curate a number of packages for easy installation. The current Cargo system
allows them to curate a number of mandatory dependencies into a single package
for easy installation.</p>
<p>In some cases, packages may want to provide additional curation for optional
dependencies:</p>
<ul>
<li>grouping a number of low-level optional dependencies together into a single
high-level feature;</li>
<li>specifying packages that are recommended (or suggested) to be included by
users of the package; and</li>
<li>including a feature (like <code>secure-password</code> in the motivating example) that
will only work if an optional dependency is available, and would be difficult
to implement as a separate package (for example, it may be overly difficult to
design an IO package to be completely decoupled from OpenSSL, with opt-in via
the inclusion of a separate package).</li>
</ul>
<p>In almost all cases, it is an antipattern to use these features outside of
high-level packages that are designed for curation. If a feature is optional, it
can almost certainly be expressed as a separate package.</p>
<h2><a class="header" href="#profiles" id="profiles">Profiles</a></h2>
<p>Profiles provide a way to alter the compiler settings, influencing things like
optimizations and debugging symbols.</p>
<p>Cargo has 4 built-in profiles: <code>dev</code>, <code>release</code>, <code>test</code>, and <code>bench</code>. It
automatically chooses the profile based on which command is being run, the
package and target that is being built, and command-line flags like
<code>--release</code>. The selection process is <a href="reference/profiles.html#profile-selection">described below</a>.</p>
<p>Profile settings can be changed in <a href="reference/manifest.html"><code>Cargo.toml</code></a> with the
<code>[profile]</code> table. Within each named profile, individual settings can be changed
with key/value pairs like this:</p>
<pre><code class="language-toml">[profile.dev]
opt-level = 1               # Use slightly better optimizations.
overflow-checks = false     # Disable integer overflow checks.
</code></pre>
<p>Cargo only looks at the profile settings in the <code>Cargo.toml</code> manifest at the
root of the workspace. Profile settings defined in dependencies will be
ignored.</p>
<p>Additionally, profiles can be overridden from a <a href="reference/config.html">config</a> definition.
Specifying a profile in a config file or environment variable will override
the settings from <code>Cargo.toml</code>.</p>
<h3><a class="header" href="#profile-settings" id="profile-settings">Profile settings</a></h3>
<p>The following is a list of settings that can be controlled in a profile.</p>
<h4><a class="header" href="#opt-level" id="opt-level">opt-level</a></h4>
<p>The <code>opt-level</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#opt-level"><code>-C opt-level</code> flag</a> which controls the level
of optimization. Higher optimization levels may produce faster runtime code at
the expense of longer compiler times. Higher levels may also change and
rearrange the compiled code which may make it harder to use with a debugger.</p>
<p>The valid options are:</p>
<ul>
<li><code>0</code>: no optimizations, also turns on <a href="reference/profiles.html#debug-assertions"><code>cfg(debug_assertions)</code></a>.</li>
<li><code>1</code>: basic optimizations</li>
<li><code>2</code>: some optimizations</li>
<li><code>3</code>: all optimizations</li>
<li><code>&quot;s&quot;</code>: optimize for binary size</li>
<li><code>&quot;z&quot;</code>: optimize for binary size, but also turn off loop vectorization.</li>
</ul>
<p>It is recommended to experiment with different levels to find the right
balance for your project. There may be surprising results, such as level <code>3</code>
being slower than <code>2</code>, or the <code>&quot;s&quot;</code> and <code>&quot;z&quot;</code> levels not being necessarily
smaller. You may also want to reevaluate your settings over time as newer
versions of <code>rustc</code> changes optimization behavior.</p>
<p>See also <a href="reference/../../rustc/profile-guided-optimization.html">Profile Guided Optimization</a> for more advanced optimization
techniques.</p>
<h4><a class="header" href="#debug" id="debug">debug</a></h4>
<p>The <code>debug</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#debuginfo"><code>-C debuginfo</code> flag</a> which controls the
amount of debug information included in the compiled binary.</p>
<p>The valid options are:</p>
<ul>
<li><code>0</code> or <code>false</code>: no debug info at all</li>
<li><code>1</code>: line tables only</li>
<li><code>2</code> or <code>true</code>: full debug info</li>
</ul>
<h4><a class="header" href="#debug-assertions" id="debug-assertions">debug-assertions</a></h4>
<p>The <code>debug-assertions</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#debug-assertions"><code>-C debug-assertions</code> flag</a> which
turns <code>cfg(debug_assertions)</code> <a href="reference/../../reference/conditional-compilation.html#debug_assertions">conditional compilation</a> on or off. Debug
assertions are intended to include runtime validation which is only available
in debug/development builds. These may be things that are too expensive or
otherwise undesirable in a release build. Debug assertions enables the
<a href="reference/../../std/macro.debug_assert.html"><code>debug_assert!</code> macro</a> in the standard library.</p>
<p>The valid options are:</p>
<ul>
<li><code>true</code>: enabled</li>
<li><code>false</code>: disabled</li>
</ul>
<h4><a class="header" href="#overflow-checks" id="overflow-checks">overflow-checks</a></h4>
<p>The <code>overflow-checks</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#overflow-checks"><code>-C overflow-checks</code> flag</a> which
controls the behavior of <a href="reference/../../reference/expressions/operator-expr.html#overflow">runtime integer overflow</a>. When overflow-checks are
enabled, a panic will occur on overflow.</p>
<p>The valid options are:</p>
<ul>
<li><code>true</code>: enabled</li>
<li><code>false</code>: disabled</li>
</ul>
<h4><a class="header" href="#lto" id="lto">lto</a></h4>
<p>The <code>lto</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#lto"><code>-C lto</code> flag</a> which controls LLVM's <a href="https://llvm.org/docs/LinkTimeOptimization.html">link
time optimizations</a>. LTO can produce better optimized code, using
whole-program analysis, at the cost of longer linking time.</p>
<p>The valid options are:</p>
<ul>
<li><code>false</code>: Performs &quot;thin local LTO&quot; which performs &quot;thin&quot; LTO on the local
crate only across its <a href="reference/profiles.html#codegen-units">codegen units</a>. No LTO is performed
if codegen units is 1 or <a href="reference/profiles.html#opt-level">opt-level</a> is 0.</li>
<li><code>true</code> or <code>&quot;fat&quot;</code>: Performs &quot;fat&quot; LTO which attempts to perform
optimizations across all crates within the dependency graph.</li>
<li><code>&quot;thin&quot;</code>: Performs <a href="http://blog.llvm.org/2016/06/thinlto-scalable-and-incremental-lto.html">&quot;thin&quot; LTO</a>. This is similar to &quot;fat&quot;, but takes
substantially less time to run while still achieving performance gains
similar to &quot;fat&quot;.</li>
<li><code>&quot;off&quot;</code>: Disables LTO.</li>
</ul>
<p>See also the <a href="reference/../../rustc/codegen-options/index.html#linker-plugin-lto"><code>-C linker-plugin-lto</code></a> <code>rustc</code> flag for cross-language LTO.</p>
<h4><a class="header" href="#panic" id="panic">panic</a></h4>
<p>The <code>panic</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#panic"><code>-C panic</code> flag</a> which controls which panic
strategy to use.</p>
<p>The valid options are:</p>
<ul>
<li><code>&quot;unwind&quot;</code>: Unwind the stack upon panic.</li>
<li><code>&quot;abort&quot;</code>: Terminate the process upon panic.</li>
</ul>
<p>When set to <code>&quot;unwind&quot;</code>, the actual value depends on the default of the target
platform. For example, the NVPTX platform does not support unwinding, so it
always uses <code>&quot;abort&quot;</code>.</p>
<p>Tests, benchmarks, build scripts, and proc macros ignore the <code>panic</code> setting.
The <code>rustc</code> test harness currently requires <code>unwind</code> behavior. See the
<a href="reference/unstable.html#panic-abort-tests"><code>panic-abort-tests</code></a> unstable flag which enables <code>abort</code> behavior.</p>
<p>Additionally, when using the <code>abort</code> strategy and building a test, all of the
dependencies will also be forced to built with the <code>unwind</code> strategy.</p>
<h4><a class="header" href="#incremental" id="incremental">incremental</a></h4>
<p>The <code>incremental</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#incremental"><code>-C incremental</code> flag</a> which controls
whether or not incremental compilation is enabled. Incremental compilation
causes <code>rustc</code> to to save additional information to disk which will be reused
when recompiling the crate, improving re-compile times. The additional
information is stored in the <code>target</code> directory.</p>
<p>The valid options are:</p>
<ul>
<li><code>true</code>: enabled</li>
<li><code>false</code>: disabled</li>
</ul>
<p>Incremental compilation is only used for workspace members and &quot;path&quot;
dependencies.</p>
<p>The incremental value can be overridden globally with the <code>CARGO_INCREMENTAL</code>
<a href="reference/environment-variables.html">environment variable</a> or the <a href="reference/config.html#buildincremental"><code>build.incremental</code></a> config variable.</p>
<h4><a class="header" href="#codegen-units" id="codegen-units">codegen-units</a></h4>
<p>The <code>codegen-units</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#codegen-units"><code>-C codegen-units</code> flag</a> which
controls how many &quot;code generation units&quot; a crate will be split into. More
code generation units allows more of a crate to be processed in parallel
possibly reducing compile time, but may produce slower code.</p>
<p>This option takes an integer greater than 0.</p>
<p>The default is 256 for <a href="reference/profiles.html#incremental">incremental</a> builds, and 16 for
non-incremental builds.</p>
<h4><a class="header" href="#rpath" id="rpath">rpath</a></h4>
<p>The <code>rpath</code> setting controls the <a href="reference/../../rustc/codegen-options/index.html#rpath"><code>-C rpath</code> flag</a> which controls
whether or not <a href="https://en.wikipedia.org/wiki/Rpath"><code>rpath</code></a> is enabled.</p>
<h3><a class="header" href="#default-profiles" id="default-profiles">Default profiles</a></h3>
<h4><a class="header" href="#dev" id="dev">dev</a></h4>
<p>The <code>dev</code> profile is used for normal development and debugging. It is the
default for build commands like <a href="reference/../commands/cargo-build.html"><code>cargo build</code></a>.</p>
<p>The default settings for the <code>dev</code> profile are:</p>
<pre><code class="language-toml">[profile.dev]
opt-level = 0
debug = true
debug-assertions = true
overflow-checks = true
lto = false
panic = 'unwind'
incremental = true
codegen-units = 256
rpath = false
</code></pre>
<h4><a class="header" href="#release" id="release">release</a></h4>
<p>The <code>release</code> profile is intended for optimized artifacts used for releases
and in production. This profile is used when the <code>--release</code> flag is used, and
is the default for <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a>.</p>
<p>The default settings for the <code>release</code> profile are:</p>
<pre><code class="language-toml">[profile.release]
opt-level = 3
debug = false
debug-assertions = false
overflow-checks = false
lto = false
panic = 'unwind'
incremental = false
codegen-units = 16
rpath = false
</code></pre>
<h4><a class="header" href="#test" id="test">test</a></h4>
<p>The <code>test</code> profile is used for building tests, or when benchmarks are built in
debug mode with <code>cargo build</code>.</p>
<p>The default settings for the <code>test</code> profile are:</p>
<pre><code class="language-toml">[profile.test]
opt-level = 0
debug = 2
debug-assertions = true
overflow-checks = true
lto = false
panic = 'unwind'    # This setting is always ignored.
incremental = true
codegen-units = 256
rpath = false
</code></pre>
<h4><a class="header" href="#bench" id="bench">bench</a></h4>
<p>The <code>bench</code> profile is used for building benchmarks, or when tests are built
with the <code>--release</code> flag.</p>
<p>The default settings for the <code>bench</code> profile are:</p>
<pre><code class="language-toml">[profile.bench]
opt-level = 3
debug = false
debug-assertions = false
overflow-checks = false
lto = false
panic = 'unwind'    # This setting is always ignored.
incremental = false
codegen-units = 16
rpath = false
</code></pre>
<h3><a class="header" href="#profile-selection" id="profile-selection">Profile selection</a></h3>
<p>The profile used depends on the command, the package, the Cargo target, and
command-line flags like <code>--release</code>.</p>
<p>Build commands like <a href="reference/../commands/cargo-build.html"><code>cargo build</code></a>, <a href="reference/../commands/cargo-rustc.html"><code>cargo rustc</code></a>, <a href="reference/../commands/cargo-check.html"><code>cargo check</code></a>, and
<a href="reference/../commands/cargo-run.html"><code>cargo run</code></a> default to using the <code>dev</code> profile. The <code>--release</code> flag may be
used to switch to the <code>release</code> profile.</p>
<p>The <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a> command defaults to the <code>release</code> profile, and may use
the <code>--debug</code> flag to switch to the <code>dev</code> profile.</p>
<p>Test targets are built with the <code>test</code> profile by default. The <code>--release</code>
flag switches tests to the <code>bench</code> profile.</p>
<p>Bench targets are built with the <code>bench</code> profile by default. The <a href="reference/../commands/cargo-build.html"><code>cargo build</code></a> command can be used to build a bench target with the <code>test</code> profile to
enable debugging.</p>
<p>Note that when using the <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> and <a href="reference/../commands/cargo-bench.html"><code>cargo bench</code></a> commands, the
<code>test</code>/<code>bench</code> profiles only apply to the final test executable. Dependencies
will continue to use the <code>dev</code>/<code>release</code> profiles. Also note that when a
library is built for unit tests, then the library is built with the <code>test</code>
profile. However, when building an integration test target, the library target
is built with the <code>dev</code> profile and linked into the integration test
executable.</p>
<p><img src="reference/../images/profile-selection.svg" alt="Profile selection for cargo test" /></p>
<h3><a class="header" href="#overrides" id="overrides">Overrides</a></h3>
<p>Profile settings can be overridden for specific packages and build-time
crates. To override the settings for a specific package, use the <code>package</code>
table to change the settings for the named package:</p>
<pre><code class="language-toml"># The `foo` package will use the -Copt-level=3 flag.
[profile.dev.package.foo]
opt-level = 3
</code></pre>
<p>The package name is actually a <a href="reference/pkgid-spec.html">Package ID Spec</a>, so you can
target individual versions of a package with syntax such as
<code>[profile.dev.package.&quot;foo:2.1.0&quot;]</code>.</p>
<p>To override the settings for all dependencies (but not any workspace member),
use the <code>&quot;*&quot;</code> package name:</p>
<pre><code class="language-toml"># Set the default for dependencies.
[profile.dev.package.&quot;*&quot;]
opt-level = 2
</code></pre>
<p>To override the settings for build scripts, proc macros, and their
dependencies, use the <code>build-override</code> table:</p>
<pre><code class="language-toml"># Set the settings for build scripts and proc-macros.
[profile.dev.build-override]
opt-level = 3
</code></pre>
<blockquote>
<p>Note: When a dependency is both a normal dependency and a build dependency,
Cargo will try to only build it once when <code>--target</code> is not specified. When
using <code>build-override</code>, the dependency may need to be built twice, once as a
normal dependency and once with the overridden build settings. This may
increase initial build times.</p>
</blockquote>
<p>The precedence for which value is used is done in the following order (first
match wins):</p>
<ol>
<li><code>[profile.dev.package.name]</code> — A named package.</li>
<li><code>[profile.dev.package.&quot;*&quot;]</code> — For any non-workspace member.</li>
<li><code>[profile.dev.build-override]</code> — Only for build scripts, proc macros, and
their dependencies.</li>
<li><code>[profile.dev]</code> — Settings in <code>Cargo.toml</code>.</li>
<li>Default values built-in to Cargo.</li>
</ol>
<p>Overrides cannot specify the <code>panic</code>, <code>lto</code>, or <code>rpath</code> settings.</p>
<h4><a class="header" href="#overrides-and-generics" id="overrides-and-generics">Overrides and generics</a></h4>
<p>The location where generic code is instantiated will influence the
optimization settings used for that generic code. This can cause subtle
interactions when using profile overrides to change the optimization level of
a specific crate. If you attempt to raise the optimization level of a
dependency which defines generic functions, those generic functions may not be
optimized when used in your local crate. This is because the code may be
generated in the crate where it is instantiated, and thus may use the
optimization settings of that crate.</p>
<p>For example, <a href="https://crates.io/crates/nalgebra">nalgebra</a> is a library which defines vectors and matrices making
heavy use of generic parameters. If your local code defines concrete nalgebra
types like <code>Vector4&lt;f64&gt;</code> and uses their methods, the corresponding nalgebra
code will be instantiated and built within your crate. Thus, if you attempt to
increase the optimization level of <code>nalgebra</code> using a profile override, it may
not result in faster performance.</p>
<p>Further complicating the issue, <code>rustc</code> has some optimizations where it will
attempt to share monomorphized generics between crates. If the opt-level is 2
or 3, then a crate will not use monomorphized generics from other crates, nor
will it export locally defined monomorphized items to be shared with other
crates. When experimenting with optimizing dependencies for development,
consider trying opt-level 1, which will apply some optimizations while still
allowing monomorphized items to be shared.</p>
<h2><a class="header" href="#configuration" id="configuration">Configuration</a></h2>
<p>This document explains how Cargo’s configuration system works, as well as
available keys or configuration. For configuration of a package through its
manifest, see the <a href="reference/manifest.html">manifest format</a>.</p>
<h3><a class="header" href="#hierarchical-structure" id="hierarchical-structure">Hierarchical structure</a></h3>
<p>Cargo allows local configuration for a particular package as well as global
configuration. It looks for configuration files in the current directory and
all parent directories. If, for example, Cargo were invoked in
<code>/projects/foo/bar/baz</code>, then the following configuration files would be
probed for and unified in this order:</p>
<ul>
<li><code>/projects/foo/bar/baz/.cargo/config.toml</code></li>
<li><code>/projects/foo/bar/.cargo/config.toml</code></li>
<li><code>/projects/foo/.cargo/config.toml</code></li>
<li><code>/projects/.cargo/config.toml</code></li>
<li><code>/.cargo/config.toml</code></li>
<li><code>$CARGO_HOME/config.toml</code> which defaults to:
<ul>
<li>Windows: <code>%USERPROFILE%\.cargo\config.toml</code></li>
<li>Unix: <code>$HOME/.cargo/config.toml</code></li>
</ul>
</li>
</ul>
<p>With this structure, you can specify configuration per-package, and even
possibly check it into version control. You can also specify personal defaults
with a configuration file in your home directory.</p>
<p>If a key is specified in multiple config files, the values will get merged
together. Numbers, strings, and booleans will use the value in the deeper
config directory taking precedence over ancestor directories, where the
home directory is the lowest priority. Arrays will be joined together.</p>
<blockquote>
<p><strong>Note:</strong> Cargo also reads config files without the <code>.toml</code> extension, such as
<code>.cargo/config</code>. Support for the <code>.toml</code> extension was added in version 1.39
and is the preferred form. If both files exist, Cargo will use the file
without the extension.</p>
</blockquote>
<h3><a class="header" href="#configuration-format" id="configuration-format">Configuration format</a></h3>
<p>Configuration files are written in the <a href="https://github.com/toml-lang/toml">TOML format</a> (like the
manifest), with simple key-value pairs inside of sections (tables). The
following is a quick overview of all settings, with detailed descriptions
found below.</p>
<pre><code class="language-toml">paths = [&quot;/path/to/override&quot;] # path dependency overrides

[alias]     # command aliases
b = &quot;build&quot;
c = &quot;check&quot;
t = &quot;test&quot;
r = &quot;run&quot;
rr = &quot;run --release&quot;
space_example = [&quot;run&quot;, &quot;--release&quot;, &quot;--&quot;, &quot;\&quot;command list\&quot;&quot;]

[build]
jobs = 1                  # number of parallel jobs, defaults to # of CPUs
rustc = &quot;rustc&quot;           # the rust compiler tool
rustc-wrapper = &quot;…&quot;       # run this wrapper instead of `rustc`
rustdoc = &quot;rustdoc&quot;       # the doc generator tool
target = &quot;triple&quot;         # build for the target triple (ignored by `cargo install`)
target-dir = &quot;target&quot;     # path of where to place all generated artifacts
rustflags = [&quot;…&quot;, &quot;…&quot;]    # custom flags to pass to all compiler invocations
rustdocflags = [&quot;…&quot;, &quot;…&quot;] # custom flags to pass to rustdoc
incremental = true        # whether or not to enable incremental compilation
dep-info-basedir = &quot;…&quot;    # path for the base directory for targets in depfiles
pipelining = true         # rustc pipelining

[cargo-new]
name = &quot;Your Name&quot;        # name to use in `authors` field
email = &quot;you@example.com&quot; # email address to use in `authors` field
vcs = &quot;none&quot;              # VCS to use ('git', 'hg', 'pijul', 'fossil', 'none')

[http]
debug = false               # HTTP debugging
proxy = &quot;host:port&quot;         # HTTP proxy in libcurl format
ssl-version = &quot;tlsv1.3&quot;     # TLS version to use
ssl-version.max = &quot;tlsv1.3&quot; # maximum TLS version
ssl-version.min = &quot;tlsv1.1&quot; # minimum TLS version
timeout = 30                # timeout for each HTTP request, in seconds
low-speed-limit = 10        # network timeout threshold (bytes/sec)
cainfo = &quot;cert.pem&quot;         # path to Certificate Authority (CA) bundle
check-revoke = true         # check for SSL certificate revocation
multiplexing = true         # HTTP/2 multiplexing
user-agent = &quot;…&quot;            # the user-agent header

[install]
root = &quot;/some/path&quot;         # `cargo install` destination directory

[net]
retry = 2                   # network retries
git-fetch-with-cli = true   # use the `git` executable for git operations
offline = false             # do not access the network

[profile.&lt;name&gt;]         # Modify profile settings via config.
opt-level = 0            # Optimization level.
debug = true             # Include debug info.
debug-assertions = true  # Enables debug assertions.
overflow-checks = true   # Enables runtime integer overflow checks.
lto = false              # Sets link-time optimization.
panic = 'unwind'         # The panic strategy.
incremental = true       # Incremental compilation.
codegen-units = 16       # Number of code generation units.
rpath = false            # Sets the rpath linking option.
[profile.&lt;name&gt;.build-override]  # Overrides build-script settings.
# Same keys for a normal profile.
[profile.&lt;name&gt;.package.&lt;name&gt;]  # Override profile for a package.
# Same keys for a normal profile (minus `panic`, `lto`, and `rpath`).

[registries.&lt;name&gt;]  # registries other than crates.io
index = &quot;…&quot;          # URL of the registry index
token = &quot;…&quot;          # authentication token for the registry

[registry]
default = &quot;…&quot;        # name of the default registry
token = &quot;…&quot;          # authentication token for crates.io

[source.&lt;name&gt;]      # source definition and replacement
replace-with = &quot;…&quot;   # replace this source with the given named source
directory = &quot;…&quot;      # path to a directory source
registry = &quot;…&quot;       # URL to a registry source
local-registry = &quot;…&quot; # path to a local registry source
git = &quot;…&quot;            # URL of a git repository source
branch = &quot;…&quot;         # branch name for the git repository
tag = &quot;…&quot;            # tag name for the git repository
rev = &quot;…&quot;            # revision for the git repository

[target.&lt;triple&gt;]
linker = &quot;…&quot;            # linker to use
runner = &quot;…&quot;            # wrapper to run executables
rustflags = [&quot;…&quot;, &quot;…&quot;]  # custom flags for `rustc`

[target.&lt;cfg&gt;]
runner = &quot;…&quot;            # wrapper to run executables
rustflags = [&quot;…&quot;, &quot;…&quot;]  # custom flags for `rustc`

[target.&lt;triple&gt;.&lt;links&gt;] # `links` build script override
rustc-link-lib = [&quot;foo&quot;]
rustc-link-search = [&quot;/path/to/foo&quot;]
rustc-flags = [&quot;-L&quot;, &quot;/some/path&quot;]
rustc-cfg = ['key=&quot;value&quot;']
rustc-env = {key = &quot;value&quot;}
rustc-cdylib-link-arg = [&quot;…&quot;]
metadata_key1 = &quot;value&quot;
metadata_key2 = &quot;value&quot;

[term]
verbose = false        # whether cargo provides verbose output
color = 'auto'         # whether cargo colorizes output
</code></pre>
<h3><a class="header" href="#environment-variables" id="environment-variables">Environment variables</a></h3>
<p>Cargo can also be configured through environment variables in addition to the
TOML configuration files. For each configuration key of the form <code>foo.bar</code> the
environment variable <code>CARGO_FOO_BAR</code> can also be used to define the value.
Keys are converted to uppercase, dots and dashes are converted to underscores.
For example the <code>target.x86_64-unknown-linux-gnu.runner</code> key can also be
defined by the <code>CARGO_TARGET_X86_64_UNKNOWN_LINUX_GNU_RUNNER</code> environment
variable.</p>
<p>Environment variables will take precedence over TOML configuration files.
Currently only integer, boolean, string and some array values are supported to
be defined by environment variables. Descriptions below indicate which keys
support environment variables.</p>
<p>In addition to the system above, Cargo recognizes a few other specific
<a href="reference/environment-variables.html">environment variables</a>.</p>
<h3><a class="header" href="#config-relative-paths" id="config-relative-paths">Config-relative paths</a></h3>
<p>Paths in config files may be absolute, relative, or a bare name without any
path separators. Paths for executables without a path separator will use the
<code>PATH</code> environment variable to search for the executable. Paths for
non-executables will be relative to where the config value is defined. For
config files, that is relative to the parent directory of the <code>.cargo</code>
directory where the value was defined. For environment variables it is
relative to the current working directory.</p>
<pre><code class="language-toml"># Relative path examples.

[target.x86_64-unknown-linux-gnu]
runner = &quot;foo&quot;  # Searches `PATH` for `foo`.

[source.vendored-sources]
# Directory is relative to the parent where `.cargo/config.toml` is located.
# For example, `/my/project/.cargo/config.toml` would result in `/my/project/vendor`.
directory = &quot;vendor&quot;
</code></pre>
<h3><a class="header" href="#credentials" id="credentials">Credentials</a></h3>
<p>Configuration values with sensitive information are stored in the
<code>$CARGO_HOME/credentials.toml</code> file. This file is automatically created and updated
by <a href="reference/../commands/cargo-login.html"><code>cargo login</code></a>. It follows the same format as Cargo config files.</p>
<pre><code class="language-toml">[registry]
token = &quot;…&quot;   # Access token for crates.io

[registries.&lt;name&gt;]
token = &quot;…&quot;   # Access token for the named registry
</code></pre>
<p>Tokens are used by some Cargo commands such as <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> for
authenticating with remote registries. Care should be taken to protect the
tokens and to keep them secret.</p>
<p>As with most other config values, tokens may be specified with environment
variables. The token for <a href="https://crates.io/">crates.io</a> may be specified with the
<code>CARGO_REGISTRY_TOKEN</code> environment variable. Tokens for other registries may
be specified with environment variables of the form
<code>CARGO_REGISTRIES_&lt;name&gt;_TOKEN</code> where <code>&lt;name&gt;</code> is the name of the registry in
all capital letters.</p>
<h3><a class="header" href="#configuration-keys" id="configuration-keys">Configuration keys</a></h3>
<p>This section documents all configuration keys. The description for keys with
variable parts are annotated with angled brackets like <code>target.&lt;triple&gt;</code> where
the <code>&lt;triple&gt;</code> part can be any target triple like
<code>target.x86_64-pc-windows-msvc</code>.</p>
<h4><a class="header" href="#paths" id="paths"><code>paths</code></a></h4>
<ul>
<li>Type: array of strings (paths)</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>An array of paths to local packages which are to be used as overrides for
dependencies. For more information see the <a href="reference/overriding-dependencies.html#paths-overrides">Overriding Dependencies
guide</a>.</p>
<h4><a class="header" href="#alias" id="alias"><code>[alias]</code></a></h4>
<ul>
<li>Type: string or array of strings</li>
<li>Default: see below</li>
<li>Environment: <code>CARGO_ALIAS_&lt;name&gt;</code></li>
</ul>
<p>The <code>[alias]</code> table defines CLI command aliases. For example, running <code>cargo b</code> is an alias for running <code>cargo build</code>. Each key in the table is the
subcommand, and the value is the actual command to run. The value may be an
array of strings, where the first element is the command and the following are
arguments. It may also be a string, which will be split on spaces into
subcommand and arguments. The following aliases are built-in to Cargo:</p>
<pre><code class="language-toml">[alias]
b = &quot;build&quot;
c = &quot;check&quot;
t = &quot;test&quot;
r = &quot;run&quot;
</code></pre>
<p>Aliases are not allowed to redefine existing built-in commands.</p>
<h4><a class="header" href="#build" id="build"><code>[build]</code></a></h4>
<p>The <code>[build]</code> table controls build-time operations and compiler settings.</p>
<h5><a class="header" href="#buildjobs" id="buildjobs"><code>build.jobs</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: number of logical CPUs</li>
<li>Environment: <code>CARGO_BUILD_JOBS</code></li>
</ul>
<p>Sets the maximum number of compiler processes to run in parallel.</p>
<p>Can be overridden with the <code>--jobs</code> CLI option.</p>
<h5><a class="header" href="#buildrustc" id="buildrustc"><code>build.rustc</code></a></h5>
<ul>
<li>Type: string (program path)</li>
<li>Default: &quot;rustc&quot;</li>
<li>Environment: <code>CARGO_BUILD_RUSTC</code> or <code>RUSTC</code></li>
</ul>
<p>Sets the executable to use for <code>rustc</code>.</p>
<h5><a class="header" href="#buildrustc-wrapper" id="buildrustc-wrapper"><code>build.rustc-wrapper</code></a></h5>
<ul>
<li>Type: string (program path)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_BUILD_RUSTC_WRAPPER</code> or <code>RUSTC_WRAPPER</code></li>
</ul>
<p>Sets a wrapper to execute instead of <code>rustc</code>. The first argument passed to the
wrapper is the path to the actual <code>rustc</code>.</p>
<h5><a class="header" href="#buildrustdoc" id="buildrustdoc"><code>build.rustdoc</code></a></h5>
<ul>
<li>Type: string (program path)</li>
<li>Default: &quot;rustdoc&quot;</li>
<li>Environment: <code>CARGO_BUILD_RUSTDOC</code> or <code>RUSTDOC</code></li>
</ul>
<p>Sets the executable to use for <code>rustdoc</code>.</p>
<h5><a class="header" href="#buildtarget" id="buildtarget"><code>build.target</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: host platform</li>
<li>Environment: <code>CARGO_BUILD_TARGET</code></li>
</ul>
<p>The default target platform triple to compile to.</p>
<p>This may also be a relative path to a <code>.json</code> target spec file.</p>
<p>Can be overridden with the <code>--target</code> CLI option.</p>
<h5><a class="header" href="#buildtarget-dir" id="buildtarget-dir"><code>build.target-dir</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: &quot;target&quot;</li>
<li>Environment: <code>CARGO_BUILD_TARGET_DIR</code> or <code>CARGO_TARGET_DIR</code></li>
</ul>
<p>The path to where all compiler output is placed. The default if not specified
is a directory named <code>target</code> located at the root of the workspace.</p>
<p>Can be overridden with the <code>--target-dir</code> CLI option.</p>
<h5><a class="header" href="#buildrustflags" id="buildrustflags"><code>build.rustflags</code></a></h5>
<ul>
<li>Type: string or array of strings</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_BUILD_RUSTFLAGS</code> or <code>RUSTFLAGS</code></li>
</ul>
<p>Extra command-line flags to pass to <code>rustc</code>. The value may be a array of
strings or a space-separated string.</p>
<p>There are three mutually exclusive sources of extra flags. They are checked in
order, with the first one being used:</p>
<ol>
<li><code>RUSTFLAGS</code> environment variable.</li>
<li>All matching <code>target.&lt;triple&gt;.rustflags</code> and <code>target.&lt;cfg&gt;.rustflags</code>
config entries joined together.</li>
<li><code>build.rustflags</code> config value.</li>
</ol>
<p>Additional flags may also be passed with the <a href="reference/../commands/cargo-rustc.html"><code>cargo rustc</code></a> command.</p>
<p>If the <code>--target</code> flag (or <a href="reference/config.html#buildtarget"><code>build.target</code></a>) is used, then the
flags will only be passed to the compiler for the target. Things being built
for the host, such as build scripts or proc macros, will not receive the args.
Without <code>--target</code>, the flags will be passed to all compiler invocations
(including build scripts and proc macros) because dependencies are shared. If
you have args that you do not want to pass to build scripts or proc macros and
are building for the host, pass <code>--target</code> with the host triple.</p>
<h5><a class="header" href="#buildrustdocflags" id="buildrustdocflags"><code>build.rustdocflags</code></a></h5>
<ul>
<li>Type: string or array of strings</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_BUILD_RUSTDOCFLAGS</code> or <code>RUSTDOCFLAGS</code></li>
</ul>
<p>Extra command-line flags to pass to <code>rustdoc</code>. The value may be a array of
strings or a space-separated string.</p>
<p>There are two mutually exclusive sources of extra flags. They are checked in
order, with the first one being used:</p>
<ol>
<li><code>RUSTDOCFLAGS</code> environment variable.</li>
<li><code>build.rustdocflags</code> config value.</li>
</ol>
<p>Additional flags may also be passed with the <a href="reference/../commands/cargo-rustdoc.html"><code>cargo rustdoc</code></a> command.</p>
<h5><a class="header" href="#buildincremental" id="buildincremental"><code>build.incremental</code></a></h5>
<ul>
<li>Type: bool</li>
<li>Default: from profile</li>
<li>Environment: <code>CARGO_BUILD_INCREMENTAL</code> or <code>CARGO_INCREMENTAL</code></li>
</ul>
<p>Whether or not to perform <a href="reference/profiles.html#incremental">incremental compilation</a>. The default if not set is
to use the value from the <a href="reference/profiles.html">profile</a>. Otherwise this overrides the setting of
all profiles.</p>
<p>The <code>CARGO_INCREMENTAL</code> environment variable can be set to <code>1</code> to force enable
incremental compilation for all profiles, or <code>0</code> to disable it. This env var
overrides the config setting.</p>
<h5><a class="header" href="#builddep-info-basedir" id="builddep-info-basedir"><code>build.dep-info-basedir</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_BUILD_DEP_INFO_BASEDIR</code></li>
</ul>
<p>Strips the given path prefix from <a href="reference/../guide/build-cache.html#dep-info-files">dep
info</a> file paths. This config setting
is intended to convert absolute paths to relative paths for tools that require
relative paths.</p>
<p>The setting itself is a config-relative path. So, for example, a value of
<code>&quot;.&quot;</code> would strip all paths starting with the parent directory of the <code>.cargo</code>
directory.</p>
<h5><a class="header" href="#buildpipelining" id="buildpipelining"><code>build.pipelining</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true</li>
<li>Environment: <code>CARGO_BUILD_PIPELINING</code></li>
</ul>
<p>Controls whether or not build pipelining is used. This allows Cargo to
schedule overlapping invocations of <code>rustc</code> in parallel when possible.</p>
<h4><a class="header" href="#cargo-new" id="cargo-new"><code>[cargo-new]</code></a></h4>
<p>The <code>[cargo-new]</code> table defines defaults for the <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a> command.</p>
<h5><a class="header" href="#cargo-newname" id="cargo-newname"><code>cargo-new.name</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: from environment</li>
<li>Environment: <code>CARGO_NAME</code> or <code>CARGO_CARGO_NEW_NAME</code></li>
</ul>
<p>Defines the name to use in the <code>authors</code> field when creating a new
<code>Cargo.toml</code> file. If not specified in the config, Cargo searches the
environment or your <code>git</code> configuration as described in the <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>
documentation.</p>
<h5><a class="header" href="#cargo-newemail" id="cargo-newemail"><code>cargo-new.email</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: from environment</li>
<li>Environment: <code>CARGO_EMAIL</code> or <code>CARGO_CARGO_NEW_EMAIL</code></li>
</ul>
<p>Defines the email address used in the <code>authors</code> field when creating a new
<code>Cargo.toml</code> file. If not specified in the config, Cargo searches the
environment or your <code>git</code> configuration as described in the <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>
documentation. The <code>email</code> value may be set to an empty string to prevent
Cargo from placing an address in the authors field.</p>
<h5><a class="header" href="#cargo-newvcs" id="cargo-newvcs"><code>cargo-new.vcs</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: &quot;git&quot; or &quot;none&quot;</li>
<li>Environment: <code>CARGO_CARGO_NEW_VCS</code></li>
</ul>
<p>Specifies the source control system to use for initializing a new repository.
Valid values are <code>git</code>, <code>hg</code> (for Mercurial), <code>pijul</code>, <code>fossil</code> or <code>none</code> to
disable this behavior. Defaults to <code>git</code>, or <code>none</code> if already inside a VCS
repository. Can be overridden with the <code>--vcs</code> CLI option.</p>
<h4><a class="header" href="#http" id="http"><code>[http]</code></a></h4>
<p>The <code>[http]</code> table defines settings for HTTP behavior. This includes fetching
crate dependencies and accessing remote git repositories.</p>
<h5><a class="header" href="#httpdebug" id="httpdebug"><code>http.debug</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>CARGO_HTTP_DEBUG</code></li>
</ul>
<p>If <code>true</code>, enables debugging of HTTP requests. The debug information can be
seen by setting the <code>CARGO_LOG=cargo::ops::registry=debug</code> environment
variable (or use <code>trace</code> for even more information).</p>
<p>Be wary when posting logs from this output in a public location. The output
may include headers with authentication tokens which you don't want to leak!
Be sure to review logs before posting them.</p>
<h5><a class="header" href="#httpproxy" id="httpproxy"><code>http.proxy</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_HTTP_PROXY</code> or <code>HTTPS_PROXY</code> or <code>https_proxy</code> or <code>http_proxy</code></li>
</ul>
<p>Sets an HTTP and HTTPS proxy to use. The format is in <a href="https://ec.haxx.se/usingcurl-proxies.html">libcurl format</a> as in
<code>[protocol://]host[:port]</code>. If not set, Cargo will also check the <code>http.proxy</code>
setting in your global git configuration. If none of those are set, the
<code>HTTPS_PROXY</code> or <code>https_proxy</code> environment variables set the proxy for HTTPS
requests, and <code>http_proxy</code> sets it for HTTP requests.</p>
<h5><a class="header" href="#httptimeout" id="httptimeout"><code>http.timeout</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 30</li>
<li>Environment: <code>CARGO_HTTP_TIMEOUT</code> or <code>HTTP_TIMEOUT</code></li>
</ul>
<p>Sets the timeout for each HTTP request, in seconds.</p>
<h5><a class="header" href="#httpcainfo" id="httpcainfo"><code>http.cainfo</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_HTTP_CAINFO</code></li>
</ul>
<p>Path to a Certificate Authority (CA) bundle file, used to verify TLS
certificates. If not specified, Cargo attempts to use the system certificates.</p>
<h5><a class="header" href="#httpcheck-revoke" id="httpcheck-revoke"><code>http.check-revoke</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true (Windows) false (all others)</li>
<li>Environment: <code>CARGO_HTTP_CHECK_REVOKE</code></li>
</ul>
<p>This determines whether or not TLS certificate revocation checks should be
performed. This only works on Windows.</p>
<h5><a class="header" href="#httpssl-version" id="httpssl-version"><code>http.ssl-version</code></a></h5>
<ul>
<li>Type: string or min/max table</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_HTTP_SSL_VERSION</code></li>
</ul>
<p>This sets the minimum TLS version to use. It takes a string, with one of the
possible values of &quot;default&quot;, &quot;tlsv1&quot;, &quot;tlsv1.0&quot;, &quot;tlsv1.1&quot;, &quot;tlsv1.2&quot;, or
&quot;tlsv1.3&quot;.</p>
<p>This may alternatively take a table with two keys, <code>min</code> and <code>max</code>, which each
take a string value of the same kind that specifies the minimum and maximum
range of TLS versions to use.</p>
<p>The default is a minimum version of &quot;tlsv1.0&quot; and a max of the newest version
supported on your platform, typically &quot;tlsv1.3&quot;.</p>
<h5><a class="header" href="#httplow-speed-limit" id="httplow-speed-limit"><code>http.low-speed-limit</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 10</li>
<li>Environment: <code>CARGO_HTTP_LOW_SPEED_LIMIT</code></li>
</ul>
<p>This setting controls timeout behavior for slow connections. If the average
transfer speed in bytes per second is below the given value for
<a href="reference/config.html#httptimeout"><code>http.timeout</code></a> seconds (default 30 seconds), then the
connection is considered too slow and Cargo will abort and retry.</p>
<h5><a class="header" href="#httpmultiplexing" id="httpmultiplexing"><code>http.multiplexing</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: true</li>
<li>Environment: <code>CARGO_HTTP_MULTIPLEXING</code></li>
</ul>
<p>When <code>true</code>, Cargo will attempt to use the HTTP2 protocol with multiplexing.
This allows multiple requests to use the same connection, usually improving
performance when fetching multiple files. If <code>false</code>, Cargo will use HTTP 1.1
without pipelining.</p>
<h5><a class="header" href="#httpuser-agent" id="httpuser-agent"><code>http.user-agent</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: Cargo's version</li>
<li>Environment: <code>CARGO_HTTP_USER_AGENT</code></li>
</ul>
<p>Specifies a custom user-agent header to use. The default if not specified is a
string that includes Cargo's version.</p>
<h4><a class="header" href="#install" id="install"><code>[install]</code></a></h4>
<p>The <code>[install]</code> table defines defaults for the <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a> command.</p>
<h5><a class="header" href="#installroot" id="installroot"><code>install.root</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: Cargo's home directory</li>
<li>Environment: <code>CARGO_INSTALL_ROOT</code></li>
</ul>
<p>Sets the path to the root directory for installing executables for <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a>. Executables go into a <code>bin</code> directory underneath the root.</p>
<p>The default if not specified is Cargo's home directory (default <code>.cargo</code> in
your home directory).</p>
<p>Can be overridden with the <code>--root</code> command-line option.</p>
<h4><a class="header" href="#net" id="net"><code>[net]</code></a></h4>
<p>The <code>[net]</code> table controls networking configuration.</p>
<h5><a class="header" href="#netretry" id="netretry"><code>net.retry</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: 2</li>
<li>Environment: <code>CARGO_NET_RETRY</code></li>
</ul>
<p>Number of times to retry possibly spurious network errors.</p>
<h5><a class="header" href="#netgit-fetch-with-cli" id="netgit-fetch-with-cli"><code>net.git-fetch-with-cli</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>CARGO_NET_GIT_FETCH_WITH_CLI</code></li>
</ul>
<p>If this is <code>true</code>, then Cargo will use the <code>git</code> executable to fetch registry
indexes and git dependencies. If <code>false</code>, then it uses a built-in <code>git</code>
library.</p>
<p>Setting this to <code>true</code> can be helpful if you have special authentication
requirements that Cargo does not support. See <a href="reference/../appendix/git-authentication.html">Git
Authentication</a> for more information about
setting up git authentication.</p>
<h5><a class="header" href="#netoffline" id="netoffline"><code>net.offline</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>CARGO_NET_OFFLINE</code></li>
</ul>
<p>If this is <code>true</code>, then Cargo will avoid accessing the network, and attempt to
proceed with locally cached data. If <code>false</code>, Cargo will access the network as
needed, and generate an error if it encounters a network error.</p>
<p>Can be overridden with the <code>--offline</code> command-line option.</p>
<h4><a class="header" href="#profile" id="profile"><code>[profile]</code></a></h4>
<p>The <code>[profile]</code> table can be used to globally change profile settings, and
override settings specified in <code>Cargo.toml</code>. It has the same syntax and
options as profiles specified in <code>Cargo.toml</code>. See the <a href="reference/profiles.html">Profiles chapter</a> for
details about the options.</p>
<h5><a class="header" href="#profilenamebuild-override" id="profilenamebuild-override"><code>[profile.&lt;name&gt;.build-override]</code></a></h5>
<ul>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_BUILD_OVERRIDE_&lt;key&gt;</code></li>
</ul>
<p>The build-override table overrides settings for build scripts, proc macros,
and their dependencies. It has the same keys as a normal profile. See the
<a href="reference/profiles.html#overrides">overrides section</a> for more details.</p>
<h5><a class="header" href="#profilenamepackagename" id="profilenamepackagename"><code>[profile.&lt;name&gt;.package.&lt;name&gt;]</code></a></h5>
<ul>
<li>Environment: not supported</li>
</ul>
<p>The package table overrides settings for specific packages. It has the same
keys as a normal profile, minus the <code>panic</code>, <code>lto</code>, and <code>rpath</code> settings. See
the <a href="reference/profiles.html#overrides">overrides section</a> for more details.</p>
<h5><a class="header" href="#profilenamecodegen-units" id="profilenamecodegen-units"><code>profile.&lt;name&gt;.codegen-units</code></a></h5>
<ul>
<li>Type: integer</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_CODEGEN_UNITS</code></li>
</ul>
<p>See <a href="reference/profiles.html#codegen-units">codegen-units</a>.</p>
<h5><a class="header" href="#profilenamedebug" id="profilenamedebug"><code>profile.&lt;name&gt;.debug</code></a></h5>
<ul>
<li>Type: integer or boolean</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_DEBUG</code></li>
</ul>
<p>See <a href="reference/profiles.html#debug">debug</a>.</p>
<h5><a class="header" href="#profilenamedebug-assertions" id="profilenamedebug-assertions"><code>profile.&lt;name&gt;.debug-assertions</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_DEBUG_ASSERTIONS</code></li>
</ul>
<p>See <a href="reference/profiles.html#debug-assertions">debug-assertions</a>.</p>
<h5><a class="header" href="#profilenameincremental" id="profilenameincremental"><code>profile.&lt;name&gt;.incremental</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_INCREMENTAL</code></li>
</ul>
<p>See <a href="reference/profiles.html#incremental">incremental</a>.</p>
<h5><a class="header" href="#profilenamelto" id="profilenamelto"><code>profile.&lt;name&gt;.lto</code></a></h5>
<ul>
<li>Type: string or boolean</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_LTO</code></li>
</ul>
<p>See <a href="reference/profiles.html#lto">lto</a>.</p>
<h5><a class="header" href="#profilenameoverflow-checks" id="profilenameoverflow-checks"><code>profile.&lt;name&gt;.overflow-checks</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_OVERFLOW_CHECKS</code></li>
</ul>
<p>See <a href="reference/profiles.html#overflow-checks">overflow-checks</a>.</p>
<h5><a class="header" href="#profilenameopt-level" id="profilenameopt-level"><code>profile.&lt;name&gt;.opt-level</code></a></h5>
<ul>
<li>Type: integer or string</li>
<li>Default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_OPT_LEVEL</code></li>
</ul>
<p>See <a href="reference/profiles.html#opt-level">opt-level</a>.</p>
<h5><a class="header" href="#profilenamepanic" id="profilenamepanic"><code>profile.&lt;name&gt;.panic</code></a></h5>
<ul>
<li>Type: string</li>
<li>default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_PANIC</code></li>
</ul>
<p>See <a href="reference/profiles.html#panic">panic</a>.</p>
<h5><a class="header" href="#profilenamerpath" id="profilenamerpath"><code>profile.&lt;name&gt;.rpath</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>default: See profile docs.</li>
<li>Environment: <code>CARGO_PROFILE_&lt;name&gt;_RPATH</code></li>
</ul>
<p>See <a href="reference/profiles.html#rpath">rpath</a>.</p>
<h4><a class="header" href="#registries" id="registries"><code>[registries]</code></a></h4>
<p>The <code>[registries]</code> table is used for specifying additional <a href="reference/registries.html">registries</a>. It
consists of a sub-table for each named registry.</p>
<h5><a class="header" href="#registriesnameindex" id="registriesnameindex"><code>registries.&lt;name&gt;.index</code></a></h5>
<ul>
<li>Type: string (url)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_REGISTRIES_&lt;name&gt;_INDEX</code></li>
</ul>
<p>Specifies the URL of the git index for the registry.</p>
<h5><a class="header" href="#registriesnametoken" id="registriesnametoken"><code>registries.&lt;name&gt;.token</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_REGISTRIES_&lt;name&gt;_TOKEN</code></li>
</ul>
<p>Specifies the authentication token for the given registry. This value should
only appear in the <a href="reference/config.html#credentials">credentials</a> file. This is used for registry
commands like <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> that require authentication.</p>
<p>Can be overridden with the <code>--token</code> command-line option.</p>
<h4><a class="header" href="#registry" id="registry"><code>[registry]</code></a></h4>
<p>The <code>[registry]</code> table controls the default registry used when one is not
specified.</p>
<h5><a class="header" href="#registryindex" id="registryindex"><code>registry.index</code></a></h5>
<p>This value is no longer accepted and should not be used.</p>
<h5><a class="header" href="#registrydefault" id="registrydefault"><code>registry.default</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: <code>&quot;crates-io&quot;</code></li>
<li>Environment: <code>CARGO_REGISTRY_DEFAULT</code></li>
</ul>
<p>The name of the registry (from the <a href="reference/config.html#registries"><code>registries</code> table</a>) to use
by default for registry commands like <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a>.</p>
<p>Can be overridden with the <code>--registry</code> command-line option.</p>
<h5><a class="header" href="#registrytoken" id="registrytoken"><code>registry.token</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_REGISTRY_TOKEN</code></li>
</ul>
<p>Specifies the authentication token for <a href="https://crates.io/">crates.io</a>. This value should only
appear in the <a href="reference/config.html#credentials">credentials</a> file. This is used for registry
commands like <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> that require authentication.</p>
<p>Can be overridden with the <code>--token</code> command-line option.</p>
<h4><a class="header" href="#source" id="source"><code>[source]</code></a></h4>
<p>The <code>[source]</code> table defines the registry sources available. See <a href="reference/source-replacement.html">Source
Replacement</a> for more information. It consists of a sub-table for each named
source. A source should only define one kind (directory, registry,
local-registry, or git).</p>
<h5><a class="header" href="#sourcenamereplace-with" id="sourcenamereplace-with"><code>source.&lt;name&gt;.replace-with</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>If set, replace this source with the given named source.</p>
<h5><a class="header" href="#sourcenamedirectory" id="sourcenamedirectory"><code>source.&lt;name&gt;.directory</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the path to a directory to use as a directory source.</p>
<h5><a class="header" href="#sourcenameregistry" id="sourcenameregistry"><code>source.&lt;name&gt;.registry</code></a></h5>
<ul>
<li>Type: string (url)</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the URL to use for a registry source.</p>
<h5><a class="header" href="#sourcenamelocal-registry" id="sourcenamelocal-registry"><code>source.&lt;name&gt;.local-registry</code></a></h5>
<ul>
<li>Type: string (path)</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the path to a directory to use as a local registry source.</p>
<h5><a class="header" href="#sourcenamegit" id="sourcenamegit"><code>source.&lt;name&gt;.git</code></a></h5>
<ul>
<li>Type: string (url)</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the URL to use for a git repository source.</p>
<h5><a class="header" href="#sourcenamebranch" id="sourcenamebranch"><code>source.&lt;name&gt;.branch</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the branch name to use for a git repository.</p>
<p>If none of <code>branch</code>, <code>tag</code>, or <code>rev</code> is set, defaults to the <code>master</code> branch.</p>
<h5><a class="header" href="#sourcenametag" id="sourcenametag"><code>source.&lt;name&gt;.tag</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the tag name to use for a git repository.</p>
<p>If none of <code>branch</code>, <code>tag</code>, or <code>rev</code> is set, defaults to the <code>master</code> branch.</p>
<h5><a class="header" href="#sourcenamerev" id="sourcenamerev"><code>source.&lt;name&gt;.rev</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: none</li>
<li>Environment: not supported</li>
</ul>
<p>Sets the <a href="https://git-scm.com/docs/gitrevisions">revision</a> to use for a git repository.</p>
<p>If none of <code>branch</code>, <code>tag</code>, or <code>rev</code> is set, defaults to the <code>master</code> branch.</p>
<h4><a class="header" href="#target" id="target"><code>[target]</code></a></h4>
<p>The <code>[target]</code> table is used for specifying settings for specific platform
targets. It consists of a sub-table which is either a platform triple or a
<a href="reference/../../reference/conditional-compilation.html"><code>cfg()</code> expression</a>. The given values will be used if the target platform
matches either the <code>&lt;triple&gt;</code> value or the <code>&lt;cfg&gt;</code> expression.</p>
<pre><code class="language-toml">[target.thumbv7m-none-eabi]
linker = &quot;arm-none-eabi-gcc&quot;
runner = &quot;my-emulator&quot;
rustflags = [&quot;…&quot;, &quot;…&quot;]

[target.'cfg(all(target_arch = &quot;arm&quot;, target_os = &quot;none&quot;))']
runner = &quot;my-arm-wrapper&quot;
rustflags = [&quot;…&quot;, &quot;…&quot;]
</code></pre>
<p><code>cfg</code> values come from those built-in to the compiler (run <code>rustc --print=cfg</code>
to view), values set by <a href="reference/build-scripts.html">build scripts</a>, and extra <code>--cfg</code> flags passed to
<code>rustc</code> (such as those defined in <code>RUSTFLAGS</code>). Do not try to match on
<code>debug_assertions</code> or Cargo features like <code>feature=&quot;foo&quot;</code>.</p>
<p>If using a target spec JSON file, the <code>&lt;triple&gt;</code> value is the filename stem.
For example <code>--target foo/bar.json</code> would match <code>[target.bar]</code>.</p>
<h5><a class="header" href="#targettriplear" id="targettriplear"><code>target.&lt;triple&gt;.ar</code></a></h5>
<p>This option is deprecated and unused.</p>
<h5><a class="header" href="#targettriplelinker" id="targettriplelinker"><code>target.&lt;triple&gt;.linker</code></a></h5>
<ul>
<li>Type: string (program path)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_TARGET_&lt;triple&gt;_LINKER</code></li>
</ul>
<p>Specifies the linker which is passed to <code>rustc</code> (via <a href="reference/../../rustc/codegen-options/index.html#linker"><code>-C linker</code></a>) when the
<code>&lt;triple&gt;</code> is being compiled for. By default, the linker is not overridden.</p>
<h5><a class="header" href="#targettriplerunner" id="targettriplerunner"><code>target.&lt;triple&gt;.runner</code></a></h5>
<ul>
<li>Type: string or array of strings (program path and args)</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_TARGET_&lt;triple&gt;_RUNNER</code></li>
</ul>
<p>If a runner is provided, executables for the target <code>&lt;triple&gt;</code> will be
executed by invoking the specified runner with the actual executable passed as
an argument. This applies to <a href="reference/../commands/cargo-run.html"><code>cargo run</code></a>, <a href="reference/../commands/cargo-test.html"><code>cargo test</code></a> and <a href="reference/../commands/cargo-bench.html"><code>cargo bench</code></a>
commands. By default, compiled executables are executed directly.</p>
<p>The value may be an array of strings like <code>['/path/to/program', 'somearg']</code> or
a space-separated string like <code>'/path/to/program somearg'</code>. The arguments will
be passed to the runner with the executable to run as the last argument. If
the runner program does not have path separators, it will search <code>PATH</code> for
the runner executable.</p>
<h5><a class="header" href="#targetcfgrunner" id="targetcfgrunner"><code>target.&lt;cfg&gt;.runner</code></a></h5>
<p>This is similar to the <a href="reference/config.html#targettriplerunner">target runner</a>, but using
a <a href="reference/../../reference/conditional-compilation.html"><code>cfg()</code> expression</a>. If both a <code>&lt;triple&gt;</code> and <code>&lt;cfg&gt;</code> runner match,
the <code>&lt;triple&gt;</code> will take precedence. It is an error if more than one
<code>&lt;cfg&gt;</code> runner matches the current target.</p>
<h5><a class="header" href="#targettriplerustflags" id="targettriplerustflags"><code>target.&lt;triple&gt;.rustflags</code></a></h5>
<ul>
<li>Type: string or array of strings</li>
<li>Default: none</li>
<li>Environment: <code>CARGO_TARGET_&lt;triple&gt;_RUSTFLAGS</code></li>
</ul>
<p>Passes a set of custom flags to the compiler for this <code>&lt;triple&gt;</code>. The value
may be a array of strings or a space-separated string.</p>
<p>See <a href="reference/config.html#buildrustflags"><code>build.rustflags</code></a> for more details on the different
ways to specific extra flags.</p>
<h5><a class="header" href="#targetcfgrustflags" id="targetcfgrustflags"><code>target.&lt;cfg&gt;.rustflags</code></a></h5>
<p>This is similar to the <a href="reference/config.html#targettriplerustflags">target rustflags</a>, but
using a <a href="reference/../../reference/conditional-compilation.html"><code>cfg()</code> expression</a>. If several <code>&lt;cfg&gt;</code> and <code>&lt;triple&gt;</code> entries
match the current target, the flags are joined together.</p>
<h5><a class="header" href="#targettriplelinks" id="targettriplelinks"><code>target.&lt;triple&gt;.&lt;links&gt;</code></a></h5>
<p>The links sub-table provides a way to <a href="reference/build-scripts.html#overriding-build-scripts">override a build script</a>. When
specified, the build script for the given <code>links</code> library will not be
run, and the given values will be used instead.</p>
<pre><code class="language-toml">[target.x86_64-unknown-linux-gnu.foo]
rustc-link-lib = [&quot;foo&quot;]
rustc-link-search = [&quot;/path/to/foo&quot;]
rustc-flags = &quot;-L /some/path&quot;
rustc-cfg = ['key=&quot;value&quot;']
rustc-env = {key = &quot;value&quot;}
rustc-cdylib-link-arg = [&quot;…&quot;]
metadata_key1 = &quot;value&quot;
metadata_key2 = &quot;value&quot;
</code></pre>
<h4><a class="header" href="#term" id="term"><code>[term]</code></a></h4>
<p>The <code>[term]</code> table controls terminal output and interaction.</p>
<h5><a class="header" href="#termverbose" id="termverbose"><code>term.verbose</code></a></h5>
<ul>
<li>Type: boolean</li>
<li>Default: false</li>
<li>Environment: <code>CARGO_TERM_VERBOSE</code></li>
</ul>
<p>Controls whether or not extra detailed messages are displayed by Cargo.</p>
<p>Specifying the <code>--quiet</code> flag will override and disable verbose output.
Specifying the <code>--verbose</code> flag will override and force verbose output.</p>
<h5><a class="header" href="#termcolor" id="termcolor"><code>term.color</code></a></h5>
<ul>
<li>Type: string</li>
<li>Default: &quot;auto&quot;</li>
<li>Environment: <code>CARGO_TERM_COLOR</code></li>
</ul>
<p>Controls whether or not colored output is used in the terminal. Possible values:</p>
<ul>
<li><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</li>
<li><code>always</code>: Always display colors.</li>
<li><code>never</code>: Never display colors.</li>
</ul>
<p>Can be overridden with the <code>--color</code> command-line option.</p>
<h2><a class="header" href="#environment-variables-1" id="environment-variables-1">Environment Variables</a></h2>
<p>Cargo sets and reads a number of environment variables which your code can detect
or override. Here is a list of the variables Cargo sets, organized by when it interacts
with them:</p>
<h3><a class="header" href="#environment-variables-cargo-reads" id="environment-variables-cargo-reads">Environment variables Cargo reads</a></h3>
<p>You can override these environment variables to change Cargo's behavior on your
system:</p>
<ul>
<li><code>CARGO_HOME</code> — Cargo maintains a local cache of the registry index and of
git checkouts of crates. By default these are stored under <code>$HOME/.cargo</code>
(<code>%USERPROFILE%\.cargo</code> on Windows), but this variable overrides the
location of this directory. Once a crate is cached it is not removed by the
clean command.
For more details refer to the <a href="reference/../guide/cargo-home.html">guide</a>.</li>
<li><code>CARGO_TARGET_DIR</code> — Location of where to place all generated artifacts,
relative to the current working directory. See <a href="reference/config.html#buildtarget-dir"><code>build.target-dir</code></a> to set
via config.</li>
<li><code>RUSTC</code> — Instead of running <code>rustc</code>, Cargo will execute this specified
compiler instead. See <a href="reference/config.html#buildrustc"><code>build.rustc</code></a> to set via config.</li>
<li><code>RUSTC_WRAPPER</code> — Instead of simply running <code>rustc</code>, Cargo will execute this
specified wrapper instead, passing as its commandline arguments the rustc
invocation, with the first argument being <code>rustc</code>. Useful to set up a build
cache tool such as <code>sccache</code>. See <a href="reference/config.html#buildrustc-wrapper"><code>build.rustc-wrapper</code></a> to set via config.</li>
<li><code>RUSTDOC</code> — Instead of running <code>rustdoc</code>, Cargo will execute this specified
<code>rustdoc</code> instance instead. See <a href="reference/config.html#buildrustdoc"><code>build.rustdoc</code></a> to set via config.</li>
<li><code>RUSTDOCFLAGS</code> — A space-separated list of custom flags to pass to all <code>rustdoc</code>
invocations that Cargo performs. In contrast with [<code>cargo rustdoc</code>], this is
useful for passing a flag to <em>all</em> <code>rustdoc</code> instances. See
<a href="reference/config.html#buildrustdocflags"><code>build.rustdocflags</code></a> for some more ways to set flags.</li>
<li><code>RUSTFLAGS</code> — A space-separated list of custom flags to pass to all compiler
invocations that Cargo performs. In contrast with <a href="reference/../commands/cargo-rustc.html"><code>cargo rustc</code></a>, this is
useful for passing a flag to <em>all</em> compiler instances. See
<a href="reference/config.html#buildrustflags"><code>build.rustflags</code></a> for some more ways to set flags.</li>
<li><code>CARGO_INCREMENTAL</code> — If this is set to 1 then Cargo will force <a href="reference/profiles.html#incremental">incremental
compilation</a> to be enabled for the current compilation, and when set to 0 it
will force disabling it. If this env var isn't present then cargo's defaults
will otherwise be used. See also <a href="reference/config.html#buildincremental"><code>build.incremental</code></a> config value.</li>
<li><code>CARGO_CACHE_RUSTC_INFO</code> — If this is set to 0 then Cargo will not try to cache
compiler version information.</li>
<li><code>CARGO_NAME</code> — The author name to use for <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>.</li>
<li><code>CARGO_EMAIL</code> — The author email to use for <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>.</li>
<li><code>HTTPS_PROXY</code> or <code>https_proxy</code> or <code>http_proxy</code> — The HTTP proxy to use, see
<a href="reference/config.html#httpproxy"><code>http.proxy</code></a> for more detail.</li>
<li><code>HTTP_TIMEOUT</code> — The HTTP timeout in seconds, see <a href="reference/config.html#httptimeout"><code>http.timeout</code></a> for more
detail.</li>
<li><code>TERM</code> — If this is set to <code>dumb</code>, it disables the progress bar.</li>
<li><code>BROWSER</code> — The web browser to execute to open documentation with <a href="reference/../commands/cargo-doc.html"><code>cargo doc</code></a>'s' <code>--open</code> flag.</li>
</ul>
<h4><a class="header" href="#configuration-environment-variables" id="configuration-environment-variables">Configuration environment variables</a></h4>
<p>Cargo reads environment variables for configuration values. See the
<a href="reference/config.html#environment-variables">configuration chapter</a> for more details. In summary, the
supported environment variables are:</p>
<ul>
<li><code>CARGO_ALIAS_&lt;name&gt;</code> — Command aliases, see <a href="reference/config.html#alias"><code>alias</code></a>.</li>
<li><code>CARGO_BUILD_JOBS</code> — Number of parallel jobs, see <a href="reference/config.html#buildjobs"><code>build.jobs</code></a>.</li>
<li><code>CARGO_BUILD_RUSTC</code> — The <code>rustc</code> executable, see <a href="reference/config.html#buildrustc"><code>build.rustc</code></a>.</li>
<li><code>CARGO_BUILD_RUSTC_WRAPPER</code> — The <code>rustc</code> wrapper, see <a href="reference/config.html#buildrustc-wrapper"><code>build.rustc-wrapper</code></a>.</li>
<li><code>CARGO_BUILD_RUSTDOC</code> — The <code>rustdoc</code> executable, see <a href="reference/config.html#buildrustdoc"><code>build.rustdoc</code></a>.</li>
<li><code>CARGO_BUILD_TARGET</code> — The default target platform, see <a href="reference/config.html#buildtarget"><code>build.target</code></a>.</li>
<li><code>CARGO_BUILD_TARGET_DIR</code> — The default output directory, see <a href="reference/config.html#buildtarget-dir"><code>build.target-dir</code></a>.</li>
<li><code>CARGO_BUILD_RUSTFLAGS</code> — Extra <code>rustc</code> flags, see <a href="reference/config.html#buildrustflags"><code>build.rustflags</code></a>.</li>
<li><code>CARGO_BUILD_RUSTDOCFLAGS</code> — Extra <code>rustdoc</code> flags, see <a href="reference/config.html#buildrustdocflags"><code>build.rustdocflags</code></a>.</li>
<li><code>CARGO_BUILD_INCREMENTAL</code> — Incremental compilation, see <a href="reference/config.html#buildincremental"><code>build.incremental</code></a>.</li>
<li><code>CARGO_BUILD_DEP_INFO_BASEDIR</code> — Dep-info relative directory, see <a href="reference/config.html#builddep-info-basedir"><code>build.dep-info-basedir</code></a>.</li>
<li><code>CARGO_BUILD_PIPELINING</code> — Whether or not to use <code>rustc</code> pipelining, see <a href="reference/config.html#buildpipelining"><code>build.pipelining</code></a>.</li>
<li><code>CARGO_CARGO_NEW_NAME</code> — The author name to use with <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>, see <a href="reference/config.html#cargo-newname"><code>cargo-new.name</code></a>.</li>
<li><code>CARGO_CARGO_NEW_EMAIL</code> — The author email to use with <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>, see <a href="reference/config.html#cargo-newemail"><code>cargo-new.email</code></a>.</li>
<li><code>CARGO_CARGO_NEW_VCS</code> — The default source control system with <a href="reference/../commands/cargo-new.html"><code>cargo new</code></a>, see <a href="reference/config.html#cargo-newvcs"><code>cargo-new.vcs</code></a>.</li>
<li><code>CARGO_HTTP_DEBUG</code> — Enables HTTP debugging, see <a href="reference/config.html#httpdebug"><code>http.debug</code></a>.</li>
<li><code>CARGO_HTTP_PROXY</code> — Enables HTTP proxy, see <a href="reference/config.html#httpproxy"><code>http.proxy</code></a>.</li>
<li><code>CARGO_HTTP_TIMEOUT</code> — The HTTP timeout, see <a href="reference/config.html#httptimeout"><code>http.timeout</code></a>.</li>
<li><code>CARGO_HTTP_CAINFO</code> — The TLS certificate Certificate Authority file, see <a href="reference/config.html#httpcainfo"><code>http.cainfo</code></a>.</li>
<li><code>CARGO_HTTP_CHECK_REVOKE</code> — Disables TLS certificate revocation checks, see <a href="reference/config.html#httpcheck-revoke"><code>http.check-revoke</code></a>.</li>
<li><code>CARGO_HTTP_SSL_VERSION</code> — The TLS version to use, see <a href="reference/config.html#httpssl-version"><code>http.ssl-version</code></a>.</li>
<li><code>CARGO_HTTP_LOW_SPEED_LIMIT</code> — The HTTP low-speed limit, see <a href="reference/config.html#httplow-speed-limit"><code>http.low-speed-limit</code></a>.</li>
<li><code>CARGO_HTTP_MULTIPLEXING</code> — Whether HTTP/2 multiplexing is used, see <a href="reference/config.html#httpmultiplexing"><code>http.multiplexing</code></a>.</li>
<li><code>CARGO_HTTP_USER_AGENT</code> — The HTTP user-agent header, see <a href="reference/config.html#httpuser-agent"><code>http.user-agent</code></a>.</li>
<li><code>CARGO_INSTALL_ROOT</code> — The default directory for <a href="reference/../commands/cargo-install.html"><code>cargo install</code></a>, see <a href="reference/config.html#installroot"><code>install.root</code></a>.</li>
<li><code>CARGO_NET_RETRY</code> — Number of times to retry network errors, see <a href="reference/config.html#netretry"><code>net.retry</code></a>.</li>
<li><code>CARGO_NET_GIT_FETCH_WITH_CLI</code> — Enables the use of the <code>git</code> executable to fetch, see <a href="reference/config.html#netgit-fetch-with-cli"><code>net.git-fetch-with-cli</code></a>.</li>
<li><code>CARGO_NET_OFFLINE</code> — Offline mode, see <a href="reference/config.html#netoffline"><code>net.offline</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_BUILD_OVERRIDE_&lt;key&gt;</code> — Override build script profile, see <a href="reference/config.html#profilenamebuild-override"><code>profile.&lt;name&gt;.build-override</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_CODEGEN_UNITS</code> — Set code generation units, see <a href="reference/config.html#profilenamecodegen-units"><code>profile.&lt;name&gt;.codegen-units</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_DEBUG</code> — What kind of debug info to include, see <a href="reference/config.html#profilenamedebug"><code>profile.&lt;name&gt;.debug</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_DEBUG_ASSERTIONS</code> — Enable/disable debug assertions, see <a href="reference/config.html#profilenamedebug-assertions"><code>profile.&lt;name&gt;.debug-assertions</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_INCREMENTAL</code> — Enable/disable incremental compilation, see <a href="reference/config.html#profilenameincremental"><code>profile.&lt;name&gt;.incremental</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_LTO</code> — Link-time optimization, see <a href="reference/config.html#profilenamelto"><code>profile.&lt;name&gt;.lto</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_OVERFLOW_CHECKS</code> — Enable/disable overflow checks, see <a href="reference/config.html#profilenameoverflow-checks"><code>profile.&lt;name&gt;.overflow-checks</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_OPT_LEVEL</code> — Set the optimization level, see <a href="reference/config.html#profilenameopt-level"><code>profile.&lt;name&gt;.opt-level</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_PANIC</code> — The panic strategy to use, see <a href="reference/config.html#profilenamepanic"><code>profile.&lt;name&gt;.panic</code></a>.</li>
<li><code>CARGO_PROFILE_&lt;name&gt;_RPATH</code> — The rpath linking option, see <a href="reference/config.html#profilenamerpath"><code>profile.&lt;name&gt;.rpath</code></a>.</li>
<li><code>CARGO_REGISTRIES_&lt;name&gt;_INDEX</code> — URL of a registry index, see <a href="reference/config.html#registriesnameindex"><code>registries.&lt;name&gt;.index</code></a>.</li>
<li><code>CARGO_REGISTRIES_&lt;name&gt;_TOKEN</code> — Authentication token of a registry, see <a href="reference/config.html#registriesnametoken"><code>registries.&lt;name&gt;.token</code></a>.</li>
<li><code>CARGO_REGISTRY_DEFAULT</code> — Default registry for the <code>--registry</code> flag, see <a href="reference/config.html#registrydefault"><code>registry.default</code></a>.</li>
<li><code>CARGO_REGISTRY_TOKEN</code> — Authentication token for <a href="https://crates.io/">crates.io</a>, see <a href="reference/config.html#registrytoken"><code>registry.token</code></a>.</li>
<li><code>CARGO_TARGET_&lt;triple&gt;_LINKER</code> — The linker to use, see <a href="reference/config.html#targettriplelinker"><code>target.&lt;triple&gt;.linker</code></a>. The triple must be <a href="reference/config.html#environment-variables">converted to uppercase and underscores</a>.</li>
<li><code>CARGO_TARGET_&lt;triple&gt;_RUNNER</code> — The executable runner, see <a href="reference/config.html#targettriplerunner"><code>target.&lt;triple&gt;.runner</code></a>.</li>
<li><code>CARGO_TARGET_&lt;triple&gt;_RUSTFLAGS</code> — Extra <code>rustc</code> flags for a target, see <a href="reference/config.html#targettriplerustflags"><code>target.&lt;triple&gt;.rustflags</code></a>.</li>
<li><code>CARGO_TERM_VERBOSE</code> — The default terminal verbosity, see <a href="reference/config.html#termverbose"><code>term.verbose</code></a>.</li>
<li><code>CARGO_TERM_COLOR</code> — The default color mode, see <a href="reference/config.html#termcolor"><code>term.color</code></a>.</li>
</ul>
<h3><a class="header" href="#environment-variables-cargo-sets-for-crates" id="environment-variables-cargo-sets-for-crates">Environment variables Cargo sets for crates</a></h3>
<p>Cargo exposes these environment variables to your crate when it is compiled.
Note that this applies for running binaries with <code>cargo run</code> and <code>cargo test</code>
as well. To get the value of any of these variables in a Rust program, do
this:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let version = env!(&quot;CARGO_PKG_VERSION&quot;);
<span class="boring">}
</span></code></pre></pre>
<p><code>version</code> will now contain the value of <code>CARGO_PKG_VERSION</code>.</p>
<ul>
<li><code>CARGO</code> — Path to the <code>cargo</code> binary performing the build.</li>
<li><code>CARGO_MANIFEST_DIR</code> — The directory containing the manifest of your package.</li>
<li><code>CARGO_PKG_VERSION</code> — The full version of your package.</li>
<li><code>CARGO_PKG_VERSION_MAJOR</code> — The major version of your package.</li>
<li><code>CARGO_PKG_VERSION_MINOR</code> — The minor version of your package.</li>
<li><code>CARGO_PKG_VERSION_PATCH</code> — The patch version of your package.</li>
<li><code>CARGO_PKG_VERSION_PRE</code> — The pre-release version of your package.</li>
<li><code>CARGO_PKG_AUTHORS</code> — Colon separated list of authors from the manifest of your package.</li>
<li><code>CARGO_PKG_NAME</code> — The name of your package.</li>
<li><code>CARGO_PKG_DESCRIPTION</code> — The description from the manifest of your package.</li>
<li><code>CARGO_PKG_HOMEPAGE</code> — The home page from the manifest of your package.</li>
<li><code>CARGO_PKG_REPOSITORY</code> — The repository from the manifest of your package.</li>
<li><code>CARGO_PKG_LICENSE</code> — The license from the manifest of your package.</li>
<li><code>CARGO_PKG_LICENSE_FILE</code> — The license file from the manifest of your package.</li>
<li><code>CARGO_CRATE_NAME</code> — The name of the crate that is currently being compiled.</li>
<li><code>CARGO_BIN_NAME</code> — The name of the binary that is currently being compiled (if it is a binary). This name does not include any file extension, such as <code>.exe</code>.</li>
<li><code>OUT_DIR</code> — If the package has a build script, this is set to the folder where the build
script should place its output. See below for more information.
(Only set during compilation.)</li>
<li><code>CARGO_BIN_EXE_&lt;name&gt;</code> — The absolute path to a binary target's executable.
This is only set when building an <a href="reference/cargo-targets.html#integration-tests">integration test</a> or benchmark. This may
be used with the <a href="reference/../../std/macro.env.html"><code>env</code> macro</a> to find the executable to run for testing
purposes. The <code>&lt;name&gt;</code> is the name of the binary target, exactly as-is. For
example, <code>CARGO_BIN_EXE_my-program</code> for a binary named <code>my-program</code>.
Binaries are automatically built when the test is built, unless the binary
has required features that are not enabled.</li>
</ul>
<h4><a class="header" href="#dynamic-library-paths" id="dynamic-library-paths">Dynamic library paths</a></h4>
<p>Cargo also sets the dynamic library path when compiling and running binaries
with commands like <code>cargo run</code> and <code>cargo test</code>. This helps with locating
shared libraries that are part of the build process. The variable name depends
on the platform:</p>
<ul>
<li>Windows: <code>PATH</code></li>
<li>macOS: <code>DYLD_FALLBACK_LIBRARY_PATH</code></li>
<li>Unix: <code>LD_LIBRARY_PATH</code></li>
</ul>
<p>The value is extended from the existing value when Cargo starts. macOS has
special consideration where if <code>DYLD_FALLBACK_LIBRARY_PATH</code> is not already
set, it will add the default <code>$HOME/lib:/usr/local/lib:/usr/lib</code>.</p>
<p>Cargo includes the following paths:</p>
<ul>
<li>Search paths included from any build script with the <a href="reference/build-scripts.html#rustc-link-search"><code>rustc-link-search</code>
instruction</a>. Paths outside of the
<code>target</code> directory are removed. It is the responsibility of the user running
Cargo to properly set the environment if additional libraries on the system
are needed in the search path.</li>
<li>The base output directory, such as <code>target/debug</code>, and the &quot;deps&quot; directory.
This is mostly for legacy support of <code>rustc</code> compiler plugins.</li>
<li>The rustc sysroot library path. This generally is not important to most
users.</li>
</ul>
<h3><a class="header" href="#environment-variables-cargo-sets-for-build-scripts" id="environment-variables-cargo-sets-for-build-scripts">Environment variables Cargo sets for build scripts</a></h3>
<p>Cargo sets several environment variables when build scripts are run. Because these variables
are not yet set when the build script is compiled, the above example using <code>env!</code> won't work
and instead you'll need to retrieve the values when the build script is run:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::env;
let out_dir = env::var(&quot;OUT_DIR&quot;).unwrap();
<span class="boring">}
</span></code></pre></pre>
<p><code>out_dir</code> will now contain the value of <code>OUT_DIR</code>.</p>
<ul>
<li><code>CARGO</code> — Path to the <code>cargo</code> binary performing the build.</li>
<li><code>CARGO_MANIFEST_DIR</code> — The directory containing the manifest for the package
being built (the package containing the build
script). Also note that this is the value of the
current working directory of the build script when it
starts.</li>
<li><code>CARGO_MANIFEST_LINKS</code> — the manifest <code>links</code> value.</li>
<li><code>CARGO_FEATURE_&lt;name&gt;</code> — For each activated feature of the package being
built, this environment variable will be present
where <code>&lt;name&gt;</code> is the name of the feature uppercased
and having <code>-</code> translated to <code>_</code>.</li>
<li><code>CARGO_CFG_&lt;cfg&gt;</code> — For each <a href="reference/../../reference/conditional-compilation.html">configuration option</a> of the
package being built, this environment variable will contain the value of the
configuration, where <code>&lt;cfg&gt;</code> is the name of the configuration uppercased and
having <code>-</code> translated to <code>_</code>. Boolean configurations are present if they are
set, and not present otherwise. Configurations with multiple values are
joined to a single variable with the values delimited by <code>,</code>. This includes
values built-in to the compiler (which can be seen with <code>rustc --print=cfg</code>)
and values set by build scripts and extra flags passed to <code>rustc</code> (such as
those defined in <code>RUSTFLAGS</code>). Some examples of what these variables are:
<ul>
<li><code>CARGO_CFG_UNIX</code> — Set on <a href="reference/../../reference/conditional-compilation.html#unix-and-windows">unix-like platforms</a>.</li>
<li><code>CARGO_CFG_WINDOWS</code> — Set on <a href="reference/../../reference/conditional-compilation.html#unix-and-windows">windows-like platforms</a>.</li>
<li><code>CARGO_CFG_TARGET_FAMILY=unix</code> — The <a href="reference/../../reference/conditional-compilation.html#target_family">target family</a>, either <code>unix</code> or <code>windows</code>.</li>
<li><code>CARGO_CFG_TARGET_OS=macos</code> — The <a href="reference/../../reference/conditional-compilation.html#target_os">target operating system</a>.</li>
<li><code>CARGO_CFG_TARGET_ARCH=x86_64</code> — The CPU <a href="reference/../../reference/conditional-compilation.html#target_arch">target architecture</a>.</li>
<li><code>CARGO_CFG_TARGET_VENDOR=apple</code> — The <a href="reference/../../reference/conditional-compilation.html#target_vendor">target vendor</a>.</li>
<li><code>CARGO_CFG_TARGET_ENV=gnu</code> — The <a href="reference/../../reference/conditional-compilation.html#target_env">target environment</a> ABI.</li>
<li><code>CARGO_CFG_TARGET_POINTER_WIDTH=64</code> — The CPU <a href="reference/../../reference/conditional-compilation.html#target_pointer_width">pointer width</a>.</li>
<li><code>CARGO_CFG_TARGET_ENDIAN=little</code> — The CPU <a href="reference/../../reference/conditional-compilation.html#target_endian">target endianness</a>.</li>
<li><code>CARGO_CFG_TARGET_FEATURE=mmx,sse</code> — List of CPU <a href="reference/../../reference/conditional-compilation.html#target_feature">target features</a> enabled.</li>
</ul>
</li>
<li><code>OUT_DIR</code> — the folder in which all output should be placed. This folder is
inside the build directory for the package being built, and it is
unique for the package in question.</li>
<li><code>TARGET</code> — the target triple that is being compiled for. Native code should be
compiled for this triple. See the <a href="reference/../appendix/glossary.html#target">Target Triple</a> description
for more information.</li>
<li><code>HOST</code> — the host triple of the rust compiler.</li>
<li><code>NUM_JOBS</code> — the parallelism specified as the top-level parallelism. This can
be useful to pass a <code>-j</code> parameter to a system like <code>make</code>. Note
that care should be taken when interpreting this environment
variable. For historical purposes this is still provided but
recent versions of Cargo, for example, do not need to run <code>make -j</code> as it'll automatically happen. Cargo implements its own
<a href="https://www.gnu.org/software/make/manual/html_node/Job-Slots.html">jobserver</a> and will allow build scripts to inherit this
information, so programs compatible with GNU make jobservers will
already have appropriately configured parallelism.</li>
<li><code>OPT_LEVEL</code>, <code>DEBUG</code> — values of the corresponding variables for the
profile currently being built.</li>
<li><code>PROFILE</code> — <code>release</code> for release builds, <code>debug</code> for other builds.</li>
<li><code>DEP_&lt;name&gt;_&lt;key&gt;</code> — For more information about this set of environment
variables, see build script documentation about <a href="reference/build-scripts.html#the-links-manifest-key"><code>links</code></a>.</li>
<li><code>RUSTC</code>, <code>RUSTDOC</code> — the compiler and documentation generator that Cargo has
resolved to use, passed to the build script so it might
use it as well.</li>
<li><code>RUSTC_LINKER</code> — The path to the linker binary that Cargo has resolved to use
for the current target, if specified. The linker can be
changed by editing <code>.cargo/config.toml</code>; see the documentation
about <a href="reference/config.html">cargo configuration</a> for more
information.</li>
</ul>
<h3><a class="header" href="#environment-variables-cargo-sets-for-3rd-party-subcommands" id="environment-variables-cargo-sets-for-3rd-party-subcommands">Environment variables Cargo sets for 3rd party subcommands</a></h3>
<p>Cargo exposes this environment variable to 3rd party subcommands
(ie. programs named <code>cargo-foobar</code> placed in <code>$PATH</code>):</p>
<ul>
<li><code>CARGO</code> — Path to the <code>cargo</code> binary performing the build.</li>
</ul>
<h2><a class="header" href="#build-scripts" id="build-scripts">Build Scripts</a></h2>
<p>Some packages need to compile third-party non-Rust code, for example C
libraries. Other packages need to link to C libraries which can either be
located on the system or possibly need to be built from source. Others still
need facilities for functionality such as code generation before building (think
parser generators).</p>
<p>Cargo does not aim to replace other tools that are well-optimized for these
tasks, but it does integrate with them with custom build scripts. Placing a
file named <code>build.rs</code> in the root of a package will cause Cargo to compile
that script and execute it just before building the package.</p>
<pre><code class="language-rust ignore">// Example custom build script.
fn main() {
    // Tell Cargo that if the given file changes, to rerun this build script.
    println!(&quot;cargo:rerun-if-changed=src/hello.c&quot;);
    // Use the `cc` crate to build a C file and statically link it.
    cc::Build::new()
        .file(&quot;src/hello.c&quot;)
        .compile(&quot;hello&quot;);
}
</code></pre>
<p>Some example use cases of build scripts are:</p>
<ul>
<li>Building a bundled C library.</li>
<li>Finding a C library on the host system.</li>
<li>Generating a Rust module from a specification.</li>
<li>Performing any platform-specific configuration needed for the crate.</li>
</ul>
<p>The sections below describe how build scripts work, and the <a href="reference/build-script-examples.html">examples
chapter</a> shows a variety of examples on how to write
scripts.</p>
<blockquote>
<p>Note: The <a href="reference/manifest.html#package-build"><code>package.build</code> manifest key</a> can be
used to change the name of the build script, or disable it entirely.</p>
</blockquote>
<h3><a class="header" href="#life-cycle-of-a-build-script" id="life-cycle-of-a-build-script">Life Cycle of a Build Script</a></h3>
<p>Just before a package is built, Cargo will compile a build script into an
executable (if it has not already been built). It will then run the script,
which may perform any number of tasks. The script may communicate with Cargo
by printing specially formatted commands prefixed with <code>cargo:</code> to stdout.</p>
<p>The build script will be rebuilt if any of its source files or dependencies
change.</p>
<p>By default, Cargo will re-run the build script if any of the files in the
package changes. Typically it is best to use the <code>rerun-if</code> commands,
described in the <a href="reference/build-scripts.html#change-detection">change detection</a> section below, to
narrow the focus of what triggers a build script to run again.</p>
<p>Once the build script successfully finishes executing, the rest of the package
will be compiled. Scripts should exit with a non-zero exit code to halt the
build if there is an error, in which case the build script's output will be
displayed on the terminal.</p>
<h3><a class="header" href="#inputs-to-the-build-script" id="inputs-to-the-build-script">Inputs to the Build Script</a></h3>
<p>When the build script is run, there are a number of inputs to the build script,
all passed in the form of <a href="reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts">environment variables</a>.</p>
<p>In addition to environment variables, the build script’s current directory is
the source directory of the build script’s package.</p>
<h3><a class="header" href="#outputs-of-the-build-script" id="outputs-of-the-build-script">Outputs of the Build Script</a></h3>
<p>Build scripts may save any output files in the directory specified in the
<a href="reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts"><code>OUT_DIR</code> environment variable</a>. Scripts should not modify any
files outside of that directory.</p>
<p>Build scripts communicate with Cargo by printing to stdout. Cargo will
interpret each line that starts with <code>cargo:</code> as an instruction that will
influence compilation of the package. All other lines are ignored.</p>
<p>The output of the script is hidden from the terminal during normal
compilation. If you would like to see the output directly in your terminal,
invoke Cargo as &quot;very verbose&quot; with the <code>-vv</code> flag. This only happens when the
build script is run. If Cargo determines nothing has changed, it will not
re-run the script, see <a href="reference/build-scripts.html#change-detection">change detection</a> below for more.</p>
<p>All the lines printed to stdout by a build script are written to a file like
<code>target/debug/build/&lt;pkg&gt;/output</code> (the precise location may depend on your
configuration). The stderr output is also saved in that same directory.</p>
<p>The following is a summary of the instructions that Cargo recognizes, with each
one detailed below.</p>
<ul>
<li><a href="reference/build-scripts.html#rerun-if-changed"><code>cargo:rerun-if-changed=PATH</code></a> — Tells Cargo when to
re-run the script.</li>
<li><a href="reference/build-scripts.html#rerun-if-env-changed"><code>cargo:rerun-if-env-changed=VAR</code></a> — Tells Cargo when
to re-run the script.</li>
<li><a href="reference/build-scripts.html#rustc-link-lib"><code>cargo:rustc-link-lib=[KIND=]NAME</code></a> — Adds a library to
link.</li>
<li><a href="reference/build-scripts.html#rustc-link-search"><code>cargo:rustc-link-search=[KIND=]PATH</code></a> — Adds to the
library search path.</li>
<li><a href="reference/build-scripts.html#rustc-flags"><code>cargo:rustc-flags=FLAGS</code></a> — Passes certain flags to the
compiler.</li>
<li><a href="reference/build-scripts.html#rustc-cfg"><code>cargo:rustc-cfg=KEY[=&quot;VALUE&quot;]</code></a> — Enables compile-time <code>cfg</code>
settings.</li>
<li><a href="reference/build-scripts.html#rustc-env"><code>cargo:rustc-env=VAR=VALUE</code></a> — Sets an environment variable.</li>
<li><a href="reference/build-scripts.html#rustc-cdylib-link-arg"><code>cargo:rustc-cdylib-link-arg=FLAG</code></a> — Passes custom
flags to a linker for cdylib crates.</li>
<li><a href="reference/build-scripts.html#cargo-warning"><code>cargo:warning=MESSAGE</code></a> — Displays a warning on the
terminal.</li>
<li><a href="reference/build-scripts.html#the-links-manifest-key"><code>cargo:KEY=VALUE</code></a> — Metadata, used by <code>links</code>
scripts.</li>
</ul>
<p><a id="rustc-link-lib"></a></p>
<h4><a class="header" href="#cargorustc-link-libkindname" id="cargorustc-link-libkindname"><code>cargo:rustc-link-lib=[KIND=]NAME</code></a></h4>
<p>The <code>rustc-link-lib</code> instruction tells Cargo to link the given library using
the compiler's <a href="reference/../../rustc/command-line-arguments.html#option-l-link-lib"><code>-l</code> flag</a>. This is typically used to link a
native library using <a href="reference/../../nomicon/ffi.html">FFI</a>.</p>
<p>The <code>-l</code> flag is only passed to the library target of the package, unless
there is no library target, in which case it is passed to all targets. This is
done because all other targets have an implicit dependency on the library
target, and the given library to link should only be included once. This means
that if a package has both a library and a binary target, the <em>library</em> has
access to the symbols from the given lib, and the binary should access them
through the library target's public API.</p>
<p>The optional <code>KIND</code> may be one of <code>dylib</code>, <code>static</code>, or <code>framework</code>. See the
<a href="reference/../../rustc/command-line-arguments.html#option-l-link-lib">rustc book</a> for more detail.</p>
<p><a id="rustc-link-search"></a></p>
<h4><a class="header" href="#cargorustc-link-searchkindpath" id="cargorustc-link-searchkindpath"><code>cargo:rustc-link-search=[KIND=]PATH</code></a></h4>
<p>The <code>rustc-link-search</code> instruction tells Cargo to pass the <a href="reference/../../rustc/command-line-arguments.html#option-l-search-path"><code>-L</code>
flag</a> to the compiler to add a directory to the library search
path.</p>
<p>The optional <code>KIND</code> may be one of <code>dependency</code>, <code>crate</code>, <code>native</code>,
<code>framework</code>, or <code>all</code>. See the <a href="reference/../../rustc/command-line-arguments.html#option-l-search-path">rustc book</a> for more detail.</p>
<p>These paths are also added to the <a href="reference/environment-variables.html#dynamic-library-paths">dynamic library search path environment
variable</a> if they are within
the <code>OUT_DIR</code>. Depending on this behavior is discouraged since this makes it
difficult to use the resulting binary. In general, it is best to avoid
creating dynamic libraries in a build script (using existing system libraries
is fine).</p>
<p><a id="rustc-flags"></a></p>
<h4><a class="header" href="#cargorustc-flagsflags" id="cargorustc-flagsflags"><code>cargo:rustc-flags=FLAGS</code></a></h4>
<p>The <code>rustc-flags</code> instruction tells Cargo to pass the given space-separated
flags to the compiler. This only allows the <code>-l</code> and <code>-L</code> flags, and is
equivalent to using <a href="reference/build-scripts.html#rustc-link-lib"><code>rustc-link-lib</code></a> and
<a href="reference/build-scripts.html#rustc-link-search"><code>rustc-link-search</code></a>.</p>
<p><a id="rustc-cfg"></a></p>
<h4><a class="header" href="#cargorustc-cfgkeyvalue" id="cargorustc-cfgkeyvalue"><code>cargo:rustc-cfg=KEY[=&quot;VALUE&quot;]</code></a></h4>
<p>The <code>rustc-cfg</code> instruction tells Cargo to pass the given value to the
<a href="reference/../../rustc/command-line-arguments.html#option-cfg"><code>--cfg</code> flag</a> to the compiler. This may be used for compile-time
detection of features to enable <a href="reference/../../reference/conditional-compilation.html">conditional compilation</a>.</p>
<p>Note that this does <em>not</em> affect Cargo's dependency resolution. This cannot be
used to enable an optional dependency, or enable other Cargo features.</p>
<p>Be aware that <a href="reference/features.html">Cargo features</a> use the form <code>feature=&quot;foo&quot;</code>. <code>cfg</code> values
passed with this flag are not restricted to that form, and may provide just a
single identifier, or any arbitrary key/value pair. For example, emitting
<code>cargo:rustc-cfg=abc</code> will then allow code to use <code>#[cfg(abc)]</code> (note the lack
of <code>feature=</code>). Or an arbitrary key/value pair may be used with an <code>=</code> symbol
like <code>cargo:rustc-cfg=my_component=&quot;foo&quot;</code>. The key should be a Rust
identifier, the value should be a string.</p>
<p><a id="rustc-env"></a></p>
<h4><a class="header" href="#cargorustc-envvarvalue" id="cargorustc-envvarvalue"><code>cargo:rustc-env=VAR=VALUE</code></a></h4>
<p>The <code>rustc-env</code> instruction tells Cargo to set the given environment variable
when compiling the package. The value can be then retrieved by the <a href="reference/../../std/macro.env.html"><code>env!</code>
macro</a> in the compiled crate. This is useful for embedding
additional metadata in crate's code, such as the hash of git HEAD or the
unique identifier of a continuous integration server.</p>
<p>See also the <a href="reference/environment-variables.html#environment-variables-cargo-sets-for-crates">environment variables automatically included by
Cargo</a>.</p>
<p><a id="rustc-cdylib-link-arg"></a></p>
<h4><a class="header" href="#cargorustc-cdylib-link-argflag" id="cargorustc-cdylib-link-argflag"><code>cargo:rustc-cdylib-link-arg=FLAG</code></a></h4>
<p>The <code>rustc-cdylib-link-arg</code> instruction tells Cargo to pass the <a href="reference/../../rustc/codegen-options/index.html#link-arg"><code>-C link-arg=FLAG</code> option</a> to the compiler, but only when building a
<code>cdylib</code> library target. Its usage is highly platform specific. It is useful
to set the shared library version or the runtime-path.</p>
<p><a id="cargo-warning"></a></p>
<h4><a class="header" href="#cargowarningmessage" id="cargowarningmessage"><code>cargo:warning=MESSAGE</code></a></h4>
<p>The <code>warning</code> instruction tells Cargo to display a warning after the build
script has finished running. Warnings are only shown for <code>path</code> dependencies
(that is, those you're working on locally), so for example warnings printed
out in <a href="https://crates.io/">crates.io</a> crates are not emitted by default. The <code>-vv</code> &quot;very verbose&quot;
flag may be used to have Cargo display warnings for all crates.</p>
<h3><a class="header" href="#build-dependencies-1" id="build-dependencies-1">Build Dependencies</a></h3>
<p>Build scripts are also allowed to have dependencies on other Cargo-based crates.
Dependencies are declared through the <code>build-dependencies</code> section of the
manifest.</p>
<pre><code class="language-toml">[build-dependencies]
cc = &quot;1.0.46&quot;
</code></pre>
<p>The build script <strong>does not</strong> have access to the dependencies listed in the
<code>dependencies</code> or <code>dev-dependencies</code> section (they’re not built yet!). Also,
build dependencies are not available to the package itself unless also
explicitly added in the <code>[dependencies]</code> table.</p>
<p>It is recommended to carefully consider each dependency you add, weighing
against the impact on compile time, licensing, maintenance, etc. Cargo will
attempt to reuse a dependency if it is shared between build dependencies and
normal dependencies. However, this is not always possible, for example when
cross-compiling, so keep that in consideration of the impact on compile time.</p>
<h3><a class="header" href="#change-detection" id="change-detection">Change Detection</a></h3>
<p>When rebuilding a package, Cargo does not necessarily know if the build script
needs to be run again. By default, it takes a conservative approach of always
re-running the build script if any file within the package is changed (or the
list of files controlled by the <a href="reference/manifest.html#the-exclude-and-include-fields"><code>exclude</code> and <code>include</code> fields</a>). For most
cases, this is not a good choice, so it is recommended that every build script
emit at least one of the <code>rerun-if</code> instructions (described below). If these
are emitted, then Cargo will only re-run the script if the given value has
changed.</p>
<p><a id="rerun-if-changed"></a></p>
<h4><a class="header" href="#cargorerun-if-changedpath" id="cargorerun-if-changedpath"><code>cargo:rerun-if-changed=PATH</code></a></h4>
<p>The <code>rerun-if-changed</code> instruction tells Cargo to re-run the build script if
the file at the given path has changed. Currently, Cargo only uses the
filesystem last-modified &quot;mtime&quot; timestamp to determine if the file has
changed. It compares against an internal cached timestamp of when the build
script last ran.</p>
<p>If the path points to a directory, it does <em>not</em> automatically traverse the
directory for changes. Only the mtime change of the directory itself is
considered (which corresponds to some types of changes within the directory,
depending on platform). To request a re-run on any changes within an entire
directory, print a line for the directory and separate lines for everything
inside it, recursively.</p>
<p>If the build script inherently does not need to re-run under any circumstance,
then emitting <code>cargo:rerun-if-changed=build.rs</code> is a simple way to prevent it
from being re-run. Cargo automatically handles whether or not the script
itself needs to be recompiled, and of course the script will be re-run after
it has been recompiled. Otherwise, specifying <code>build.rs</code> is redundant and
unnecessary.</p>
<p><a id="rerun-if-env-changed"></a></p>
<h4><a class="header" href="#cargorerun-if-env-changedname" id="cargorerun-if-env-changedname"><code>cargo:rerun-if-env-changed=NAME</code></a></h4>
<p>The <code>rerun-if-env-changed</code> instruction tells Cargo to re-run the build script
if the value of an environment variable of the given name has changed.</p>
<p>Note that the environment variables here are intended for global environment
variables like <code>CC</code> and such, it is not necessary to use this for environment
variables like <code>TARGET</code> that Cargo sets.</p>
<h3><a class="header" href="#the-links-manifest-key" id="the-links-manifest-key">The <code>links</code> Manifest Key</a></h3>
<p>The <code>package.links</code> key may be set in the <code>Cargo.toml</code> manifest to declare
that the package links with the given native library. The purpose of this
manifest key is to give Cargo an understanding about the set of native
dependencies that a package has, as well as providing a principled system of
passing metadata between package build scripts.</p>
<pre><code class="language-toml">[package]
# ...
links = &quot;foo&quot;
</code></pre>
<p>This manifest states that the package links to the <code>libfoo</code> native library.
When using the <code>links</code> key, the package must have a build script, and the
build script should use the <a href="reference/build-scripts.html#rustc-link-lib"><code>rustc-link-lib</code> instruction</a> to
link the library.</p>
<p>Primarily, Cargo requires that there is at most one package per <code>links</code> value.
In other words, it is forbidden to have two packages link to the same native
library. This helps prevent duplicate symbols between crates. Note, however,
that there are <a href="reference/build-scripts.html#-sys-packages">conventions in place</a> to alleviate this.</p>
<p>As mentioned above in the output format, each build script can generate an
arbitrary set of metadata in the form of key-value pairs. This metadata is
passed to the build scripts of <strong>dependent</strong> packages. For example, if the
package <code>bar</code> depends on <code>foo</code>, then if <code>foo</code> generates <code>key=value</code> as part of
its build script metadata, then the build script of <code>bar</code> will have the
environment variables <code>DEP_FOO_KEY=value</code>. See the <a href="reference/build-script-examples.html#using-another-sys-crate">&quot;Using another <code>sys</code>
crate&quot;</a> for an example of
how this can be used.</p>
<p>Note that metadata is only passed to immediate dependents, not transitive
dependents.</p>
<h3><a class="header" href="#-sys-packages" id="-sys-packages"><code>*-sys</code> Packages</a></h3>
<p>Some Cargo packages that link to system libraries have a naming convention of
having a <code>-sys</code> suffix. Any package named <code>foo-sys</code> should provide two major
pieces of functionality:</p>
<ul>
<li>The library crate should link to the native library <code>libfoo</code>. This will often
probe the current system for <code>libfoo</code> before resorting to building from
source.</li>
<li>The library crate should provide <strong>declarations</strong> for functions in <code>libfoo</code>,
but <strong>not</strong> bindings or higher-level abstractions.</li>
</ul>
<p>The set of <code>*-sys</code> packages provides a common set of dependencies for linking
to native libraries. There are a number of benefits earned from having this
convention of native-library-related packages:</p>
<ul>
<li>Common dependencies on <code>foo-sys</code> alleviates the rule about one package per
value of <code>links</code>.</li>
<li>Other <code>-sys</code> packages can take advantage of the <code>DEP_NAME_KEY=value</code>
environment variables to better integrate with other packages. See the
<a href="reference/build-script-examples.html#using-another-sys-crate">&quot;Using another <code>sys</code> crate&quot;</a> example.</li>
<li>A common dependency allows centralizing logic on discovering <code>libfoo</code> itself
(or building it from source).</li>
<li>These dependencies are easily <a href="reference/build-scripts.html#overriding-build-scripts">overridable</a>.</li>
</ul>
<p>It is common to have a companion package without the <code>-sys</code> suffix that
provides a safe, high-level abstractions on top of the sys package. For
example, the <a href="https://crates.io/crates/git2"><code>git2</code> crate</a> provides a high-level interface to the
<a href="https://crates.io/crates/libgit2-sys"><code>libgit2-sys</code> crate</a>.</p>
<h3><a class="header" href="#overriding-build-scripts" id="overriding-build-scripts">Overriding Build Scripts</a></h3>
<p>If a manifest contains a <code>links</code> key, then Cargo supports overriding the build
script specified with a custom library. The purpose of this functionality is to
prevent running the build script in question altogether and instead supply the
metadata ahead of time.</p>
<p>To override a build script, place the following configuration in any acceptable
Cargo <a href="reference/config.html">configuration location</a>.</p>
<pre><code class="language-toml">[target.x86_64-unknown-linux-gnu.foo]
rustc-link-lib = [&quot;foo&quot;]
rustc-link-search = [&quot;/path/to/foo&quot;]
rustc-flags = &quot;-L /some/path&quot;
rustc-cfg = ['key=&quot;value&quot;']
rustc-env = {key = &quot;value&quot;}
rustc-cdylib-link-arg = [&quot;…&quot;]
metadata_key1 = &quot;value&quot;
metadata_key2 = &quot;value&quot;
</code></pre>
<p>With this configuration, if a package declares that it links to <code>foo</code> then the
build script will <strong>not</strong> be compiled or run, and the metadata specified will
be used instead.</p>
<p>The <code>warning</code>, <code>rerun-if-changed</code>, and <code>rerun-if-env-changed</code> keys should not
be used and will be ignored.</p>
<h3><a class="header" href="#jobserver" id="jobserver">Jobserver</a></h3>
<p>Cargo and <code>rustc</code> use the <a href="http://make.mad-scientist.net/papers/jobserver-implementation/">jobserver protocol</a>, developed for GNU make, to
coordinate concurrency across processes. It is essentially a semaphore that
controls the number of jobs running concurrently. The concurrency may be set
with the <code>--jobs</code> flag, which defaults to the number of logical CPUs.</p>
<p>Each build script inherits one job slot from Cargo, and should endeavor to
only use one CPU while it runs. If the script wants to use more CPUs in
parallel, it should use the <a href="https://crates.io/crates/jobserver"><code>jobserver</code> crate</a> to coordinate with Cargo.</p>
<p>As an example, the <a href="https://crates.io/crates/cc"><code>cc</code> crate</a> may enable the optional <code>parallel</code> feature
which will use the jobserver protocol to attempt to build multiple C files
at the same time.</p>
<h2><a class="header" href="#build-script-examples" id="build-script-examples">Build Script Examples</a></h2>
<p>The following sections illustrate some examples of writing build scripts.</p>
<p>Some common build script functionality can be found via crates on <a href="https://crates.io/">crates.io</a>.
Check out the <a href="https://crates.io/keywords/build-dependencies"><code>build-dependencies</code>
keyword</a> to see what is
available. The following is a sample of some popular crates<sup class="footnote-reference"><a href="#†">1</a></sup>:</p>
<ul>
<li><a href="https://crates.io/crates/bindgen"><code>bindgen</code></a> — Automatically generate Rust
FFI bindings to C libraries.</li>
<li><a href="https://crates.io/crates/cc"><code>cc</code></a> — Compiles C/C++/assembly.</li>
<li><a href="https://crates.io/crates/pkg-config"><code>pkg-config</code></a> — Detect system
libraries using the <code>pkg-config</code> utility.</li>
<li><a href="https://crates.io/crates/cmake"><code>cmake</code></a> — Runs the <code>cmake</code> build tool to build a native library.</li>
<li><a href="https://crates.io/crates/autocfg"><code>autocfg</code></a>,
<a href="https://crates.io/crates/rustc_version"><code>rustc_version</code></a>,
<a href="https://crates.io/crates/version_check"><code>version_check</code></a> — These crates
provide ways to implement conditional compilation based on the current
<code>rustc</code> such as the version of the compiler.</li>
</ul>
<div class="footnote-definition" id="†"><sup class="footnote-definition-label">1</sup>
<p>This list is not an endorsement. Evaluate your dependencies to see which
is right for your project.</p>
</div>
<h3><a class="header" href="#code-generation" id="code-generation">Code generation</a></h3>
<p>Some Cargo packages need to have code generated just before they are compiled
for various reasons. Here we’ll walk through a simple example which generates a
library call as part of the build script.</p>
<p>First, let’s take a look at the directory structure of this package:</p>
<pre><code>.
├── Cargo.toml
├── build.rs
└── src
    └── main.rs

1 directory, 3 files
</code></pre>
<p>Here we can see that we have a <code>build.rs</code> build script and our binary in
<code>main.rs</code>. This package has a basic manifest:</p>
<pre><code class="language-toml"># Cargo.toml

[package]
name = &quot;hello-from-generated-code&quot;
version = &quot;0.1.0&quot;
</code></pre>
<p>Let’s see what’s inside the build script:</p>
<pre><pre class="playground"><code class="language-rust no_run">// build.rs

use std::env;
use std::fs;
use std::path::Path;

fn main() {
    let out_dir = env::var_os(&quot;OUT_DIR&quot;).unwrap();
    let dest_path = Path::new(&amp;out_dir).join(&quot;hello.rs&quot;);
    fs::write(
        &amp;dest_path,
        &quot;pub fn message() -&gt; &amp;'static str {
            \&quot;Hello, World!\&quot;
        }
        &quot;
    ).unwrap();
    println!(&quot;cargo:rerun-if-changed=build.rs&quot;);
}
</code></pre></pre>
<p>There’s a couple of points of note here:</p>
<ul>
<li>The script uses the <code>OUT_DIR</code> environment variable to discover where the
output files should be located. It can use the process’ current working
directory to find where the input files should be located, but in this case we
don’t have any input files.</li>
<li>In general, build scripts should not modify any files outside of <code>OUT_DIR</code>.
It may seem fine on the first blush, but it does cause problems when you use
such crate as a dependency, because there's an <em>implicit</em> invariant that
sources in <code>.cargo/registry</code> should be immutable. <code>cargo</code> won't allow such
scripts when packaging.</li>
<li>This script is relatively simple as it just writes out a small generated file.
One could imagine that other more fanciful operations could take place such as
generating a Rust module from a C header file or another language definition,
for example.</li>
<li>The <a href="reference/build-scripts.html#rerun-if-changed"><code>rerun-if-changed</code> instruction</a>
tells Cargo that the build script only needs to re-run if the build script
itself changes. Without this line, Cargo will automatically run the build
script if any file in the package changes. If your code generation uses some
input files, this is where you would print a list of each of those files.</li>
</ul>
<p>Next, let’s peek at the library itself:</p>
<pre><code class="language-rust ignore">// src/main.rs

include!(concat!(env!(&quot;OUT_DIR&quot;), &quot;/hello.rs&quot;));

fn main() {
    println!(&quot;{}&quot;, message());
}
</code></pre>
<p>This is where the real magic happens. The library is using the rustc-defined
<a href="reference/../../std/macro.include.html"><code>include!</code> macro</a> in combination with the
<a href="reference/../../std/macro.concat.html"><code>concat!</code></a> and <a href="reference/../../std/macro.env.html"><code>env!</code></a> macros to include the
generated file (<code>hello.rs</code>) into the crate’s compilation.</p>
<p>Using the structure shown here, crates can include any number of generated files
from the build script itself.</p>
<h3><a class="header" href="#building-a-native-library" id="building-a-native-library">Building a native library</a></h3>
<p>Sometimes it’s necessary to build some native C or C++ code as part of a
package. This is another excellent use case of leveraging the build script to
build a native library before the Rust crate itself. As an example, we’ll create
a Rust library which calls into C to print “Hello, World!”.</p>
<p>Like above, let’s first take a look at the package layout:</p>
<pre><code>.
├── Cargo.toml
├── build.rs
└── src
    ├── hello.c
    └── main.rs

1 directory, 4 files
</code></pre>
<p>Pretty similar to before! Next, the manifest:</p>
<pre><code class="language-toml"># Cargo.toml

[package]
name = &quot;hello-world-from-c&quot;
version = &quot;0.1.0&quot;
edition = &quot;2018&quot;
</code></pre>
<p>For now we’re not going to use any build dependencies, so let’s take a look at
the build script now:</p>
<pre><pre class="playground"><code class="language-rust no_run">// build.rs

use std::process::Command;
use std::env;
use std::path::Path;

fn main() {
    let out_dir = env::var(&quot;OUT_DIR&quot;).unwrap();

    // Note that there are a number of downsides to this approach, the comments
    // below detail how to improve the portability of these commands.
    Command::new(&quot;gcc&quot;).args(&amp;[&quot;src/hello.c&quot;, &quot;-c&quot;, &quot;-fPIC&quot;, &quot;-o&quot;])
                       .arg(&amp;format!(&quot;{}/hello.o&quot;, out_dir))
                       .status().unwrap();
    Command::new(&quot;ar&quot;).args(&amp;[&quot;crus&quot;, &quot;libhello.a&quot;, &quot;hello.o&quot;])
                      .current_dir(&amp;Path::new(&amp;out_dir))
                      .status().unwrap();

    println!(&quot;cargo:rustc-link-search=native={}&quot;, out_dir);
    println!(&quot;cargo:rustc-link-lib=static=hello&quot;);
    println!(&quot;cargo:rerun-if-changed=src/hello.c&quot;);
}
</code></pre></pre>
<p>This build script starts out by compiling our C file into an object file (by
invoking <code>gcc</code>) and then converting this object file into a static library (by
invoking <code>ar</code>). The final step is feedback to Cargo itself to say that our
output was in <code>out_dir</code> and the compiler should link the crate to <code>libhello.a</code>
statically via the <code>-l static=hello</code> flag.</p>
<p>Note that there are a number of drawbacks to this hard-coded approach:</p>
<ul>
<li>The <code>gcc</code> command itself is not portable across platforms. For example it’s
unlikely that Windows platforms have <code>gcc</code>, and not even all Unix platforms
may have <code>gcc</code>. The <code>ar</code> command is also in a similar situation.</li>
<li>These commands do not take cross-compilation into account. If we’re cross
compiling for a platform such as Android it’s unlikely that <code>gcc</code> will produce
an ARM executable.</li>
</ul>
<p>Not to fear, though, this is where a <code>build-dependencies</code> entry would help!
The Cargo ecosystem has a number of packages to make this sort of task much
easier, portable, and standardized. Let's try the <a href="https://crates.io/crates/cc"><code>cc</code>
crate</a> from <a href="https://crates.io/">crates.io</a>. First, add it to the
<code>build-dependencies</code> in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[build-dependencies]
cc = &quot;1.0&quot;
</code></pre>
<p>And rewrite the build script to use this crate:</p>
<pre><code class="language-rust ignore">// build.rs

fn main() {
    cc::Build::new()
        .file(&quot;src/hello.c&quot;)
        .compile(&quot;hello&quot;);
    println!(&quot;cargo:rerun-if-changed=src/hello.c&quot;);
}
</code></pre>
<p>The <a href="https://crates.io/crates/cc"><code>cc</code> crate</a> abstracts a range of build script requirements for C code:</p>
<ul>
<li>It invokes the appropriate compiler (MSVC for windows, <code>gcc</code> for MinGW, <code>cc</code>
for Unix platforms, etc.).</li>
<li>It takes the <code>TARGET</code> variable into account by passing appropriate flags to
the compiler being used.</li>
<li>Other environment variables, such as <code>OPT_LEVEL</code>, <code>DEBUG</code>, etc., are all
handled automatically.</li>
<li>The stdout output and <code>OUT_DIR</code> locations are also handled by the <code>cc</code>
library.</li>
</ul>
<p>Here we can start to see some of the major benefits of farming as much
functionality as possible out to common build dependencies rather than
duplicating logic across all build scripts!</p>
<p>Back to the case study though, let’s take a quick look at the contents of the
<code>src</code> directory:</p>
<pre><code class="language-c">// src/hello.c

#include &lt;stdio.h&gt;

void hello() {
    printf(&quot;Hello, World!\n&quot;);
}
</code></pre>
<pre><code class="language-rust ignore">// src/main.rs

// Note the lack of the `#[link]` attribute. We’re delegating the responsibility
// of selecting what to link over to the build script rather than hard-coding
// it in the source file.
extern { fn hello(); }

fn main() {
    unsafe { hello(); }
}
</code></pre>
<p>And there we go! This should complete our example of building some C code from a
Cargo package using the build script itself. This also shows why using a build
dependency can be crucial in many situations and even much more concise!</p>
<p>We’ve also seen a brief example of how a build script can use a crate as a
dependency purely for the build process and not for the crate itself at runtime.</p>
<h3><a class="header" href="#linking-to-system-libraries" id="linking-to-system-libraries">Linking to system libraries</a></h3>
<p>This example demonstrates how to link a system library and how the build
script is used to support this use case.</p>
<p>Quite frequently a Rust crate wants to link to a native library provided on
the system to bind its functionality or just use it as part of an
implementation detail. This is quite a nuanced problem when it comes to
performing this in a platform-agnostic fashion. It is best, if possible, to
farm out as much of this as possible to make this as easy as possible for
consumers.</p>
<p>For this example, we will be creating a binding to the system's zlib library.
This is a library that is commonly found on most Unix-like systems that
provides data compression. This is already wrapped up in the <a href="https://crates.io/crates/libz-sys"><code>libz-sys</code>
crate</a>, but for this example, we'll do an extremely simplified version. Check
out <a href="https://github.com/rust-lang/libz-sys">the source code</a> for the full example.</p>
<p>To make it easy to find the location of the library, we will use the
<a href="https://crates.io/crates/pkg-config"><code>pkg-config</code> crate</a>. This crate uses the system's <code>pkg-config</code> utility to
discover information about a library. It will automatically tell Cargo what is
needed to link the library. This will likely only work on Unix-like systems
with <code>pkg-config</code> installed. Let's start by setting up the manifest:</p>
<pre><code class="language-toml"># Cargo.toml

[package]
name = &quot;libz-sys&quot;
version = &quot;0.1.0&quot;
edition = &quot;2018&quot;
links = &quot;z&quot;

[build-dependencies]
pkg-config = &quot;0.3.16&quot;
</code></pre>
<p>Take note that we included the <code>links</code> key in the <code>package</code> table. This tells
Cargo that we are linking to the <code>libz</code> library. See <a href="reference/build-script-examples.html#using-another-sys-crate">&quot;Using another sys
crate&quot;</a> for an example that will leverage this.</p>
<p>The build script is fairly simple:</p>
<pre><code class="language-rust ignore">// build.rs

fn main() {
    pkg_config::Config::new().probe(&quot;zlib&quot;).unwrap();
    println!(&quot;cargo:rerun-if-changed=build.rs&quot;);
}
</code></pre>
<p>Let's round out the example with a basic FFI binding:</p>
<pre><code class="language-rust ignore">// src/lib.rs

use std::os::raw::{c_uint, c_ulong};

extern &quot;C&quot; {
    pub fn crc32(crc: c_ulong, buf: *const u8, len: c_uint) -&gt; c_ulong;
}

#[test]
fn test_crc32() {
    let s = &quot;hello&quot;;
    unsafe {
        assert_eq!(crc32(0, s.as_ptr(), s.len() as c_uint), 0x3610a686);
    }
}
</code></pre>
<p>Run <code>cargo build -vv</code> to see the output from the build script. On a system
with <code>libz</code> already installed, it may look something like this:</p>
<pre><code class="language-text">[libz-sys 0.1.0] cargo:rustc-link-search=native=/usr/lib
[libz-sys 0.1.0] cargo:rustc-link-lib=z
[libz-sys 0.1.0] cargo:rerun-if-changed=build.rs
</code></pre>
<p>Nice! <code>pkg-config</code> did all the work of finding the library and telling Cargo
where it is.</p>
<p>It is not unusual for packages to include the source for the library, and
build it statically if it is not found on the system, or if a feature or
environment variable is set. For example, the real <a href="https://crates.io/crates/libz-sys"><code>libz-sys</code> crate</a> checks the
environment variable <code>LIBZ_SYS_STATIC</code> or the <code>static</code> feature to build it
from source instead of using the system library. Check out <a href="https://github.com/rust-lang/libz-sys">the
source</a> for a more complete example.</p>
<h3><a class="header" href="#using-another-sys-crate" id="using-another-sys-crate">Using another <code>sys</code> crate</a></h3>
<p>When using the <code>links</code> key, crates may set metadata that can be read by other
crates that depend on it. This provides a mechanism to communicate information
between crates. In this example, we'll be creating a C library that makes use
of zlib from the real <a href="https://crates.io/crates/libz-sys"><code>libz-sys</code> crate</a>.</p>
<p>If you have a C library that depends on zlib, you can leverage the <a href="https://crates.io/crates/libz-sys"><code>libz-sys</code>
crate</a> to automatically find it or build it. This is great for cross-platform
support, such as Windows where zlib is not usually installed. <code>libz-sys</code> <a href="https://github.com/rust-lang/libz-sys/blob/3c594e677c79584500da673f918c4d2101ac97a1/build.rs#L156">sets
the <code>include</code>
metadata</a>
to tell other packages where to find the header files for zlib. Our build
script can read that metadata with the <code>DEP_Z_INCLUDE</code> environment variable.
Here's an example:</p>
<pre><code class="language-toml"># Cargo.toml

[package]
name = &quot;zuser&quot;
version = &quot;0.1.0&quot;
edition = &quot;2018&quot;

[dependencies]
libz-sys = &quot;1.0.25&quot;

[build-dependencies]
cc = &quot;1.0.46&quot;
</code></pre>
<p>Here we have included <code>libz-sys</code> which will ensure that there is only one
<code>libz</code> used in the final library, and give us access to it from our build
script:</p>
<pre><code class="language-rust ignore">// build.rs

fn main() {
    let mut cfg = cc::Build::new();
    cfg.file(&quot;src/zuser.c&quot;);
    if let Some(include) = std::env::var_os(&quot;DEP_Z_INCLUDE&quot;) {
        cfg.include(include);
    }
    cfg.compile(&quot;zuser&quot;);
    println!(&quot;cargo:rerun-if-changed=src/zuser.c&quot;);
}
</code></pre>
<p>With <code>libz-sys</code> doing all the heavy lifting, the C source code may now include
the zlib header, and it should find the header, even on systems where it isn't
already installed.</p>
<pre><code class="language-c">// src/zuser.c

#include &quot;zlib.h&quot;

// … rest of code that makes use of zlib.
</code></pre>
<h3><a class="header" href="#conditional-compilation" id="conditional-compilation">Conditional compilation</a></h3>
<p>A build script may emit <a href="reference/build-scripts.html#rustc-cfg"><code>rustc-cfg</code> instructions</a> which can enable conditions
that can be checked at compile time. In this example, we'll take a look at how
the <a href="https://crates.io/crates/openssl"><code>openssl</code> crate</a> uses this to support multiple versions of the OpenSSL
library.</p>
<p>The <a href="https://crates.io/crates/openssl-sys"><code>openssl-sys</code> crate</a> implements building and linking the OpenSSL library.
It supports multiple different implementations (like LibreSSL) and multiple
versions. It makes use of the <code>links</code> key so that it may pass information to
other build scripts. One of the things it passes is the <code>version_number</code> key,
which is the version of OpenSSL that was detected. The code in the build
script looks something <a href="https://github.com/sfackler/rust-openssl/blob/dc72a8e2c429e46c275e528b61a733a66e7877fc/openssl-sys/build/main.rs#L216">like
this</a>:</p>
<pre><code class="language-rust ignore">println!(&quot;cargo:version_number={:x}&quot;, openssl_version);
</code></pre>
<p>This instruction causes the <code>DEP_OPENSSL_VERSION_NUMBER</code> environment variable
to be set in any crates that directly depend on <code>openssl-sys</code>.</p>
<p>The <code>openssl</code> crate, which provides the higher-level interface, specifies
<code>openssl-sys</code> as a dependency. The <code>openssl</code> build script can read the
version information generated by the <code>openssl-sys</code> build script with the
<code>DEP_OPENSSL_VERSION_NUMBER</code> environment variable. It uses this to generate
some <a href="https://github.com/sfackler/rust-openssl/blob/dc72a8e2c429e46c275e528b61a733a66e7877fc/openssl/build.rs#L18-L36"><code>cfg</code>
values</a>:</p>
<pre><code class="language-rust ignore">// (portion of build.rs)

if let Ok(version) = env::var(&quot;DEP_OPENSSL_VERSION_NUMBER&quot;) {
    let version = u64::from_str_radix(&amp;version, 16).unwrap();

    if version &gt;= 0x1_00_01_00_0 {
        println!(&quot;cargo:rustc-cfg=ossl101&quot;);
    }
    if version &gt;= 0x1_00_02_00_0 {
        println!(&quot;cargo:rustc-cfg=ossl102&quot;);
    }
    if version &gt;= 0x1_01_00_00_0 {
        println!(&quot;cargo:rustc-cfg=ossl110&quot;);
    }
    if version &gt;= 0x1_01_00_07_0 {
        println!(&quot;cargo:rustc-cfg=ossl110g&quot;);
    }
    if version &gt;= 0x1_01_01_00_0 {
        println!(&quot;cargo:rustc-cfg=ossl111&quot;);
    }
}
</code></pre>
<p>These <code>cfg</code> values can then be used with the <a href="reference/../../reference/conditional-compilation.html#the-cfg-attribute"><code>cfg</code> attribute</a> or the <a href="reference/../../std/macro.cfg.html"><code>cfg</code>
macro</a> to conditionally include code. For example, SHA3 support was added in
OpenSSL 1.1.1, so it is <a href="https://github.com/sfackler/rust-openssl/blob/dc72a8e2c429e46c275e528b61a733a66e7877fc/openssl/src/hash.rs#L67-L85">conditionally
excluded</a>
for older versions:</p>
<pre><code class="language-rust ignore">// (portion of openssl crate)

#[cfg(ossl111)]
pub fn sha3_224() -&gt; MessageDigest {
    unsafe { MessageDigest(ffi::EVP_sha3_224()) }
}
</code></pre>
<p>Of course, one should be careful when using this, since it makes the resulting
binary even more dependent on the build environment. In this example, if the
binary is distributed to another system, it may not have the exact same shared
libraries, which could cause problems.</p>
<h2><a class="header" href="#publishing-on-cratesio" id="publishing-on-cratesio">Publishing on crates.io</a></h2>
<p>Once you've got a library that you'd like to share with the world, it's time to
publish it on <a href="https://crates.io/">crates.io</a>! Publishing a crate is when a specific
version is uploaded to be hosted on <a href="https://crates.io/">crates.io</a>.</p>
<p>Take care when publishing a crate, because a publish is <strong>permanent</strong>. The
version can never be overwritten, and the code cannot be deleted. There is no
limit to the number of versions which can be published, however.</p>
<h3><a class="header" href="#before-your-first-publish" id="before-your-first-publish">Before your first publish</a></h3>
<p>First things first, you’ll need an account on <a href="https://crates.io/">crates.io</a> to acquire
an API token. To do so, <a href="https://crates.io/">visit the home page</a> and log in via a GitHub
account (required for now). After this, visit your <a href="https://crates.io/me">Account
Settings</a> page and run the <a href="reference/../commands/cargo-login.html"><code>cargo login</code></a> command
specified.</p>
<pre><code class="language-console">$ cargo login abcdefghijklmnopqrstuvwxyz012345
</code></pre>
<p>This command will inform Cargo of your API token and store it locally in your
<code>~/.cargo/credentials.toml</code>. Note that this token is a <strong>secret</strong> and should not be
shared with anyone else. If it leaks for any reason, you should revoke it
immediately.</p>
<h3><a class="header" href="#before-publishing-a-new-crate" id="before-publishing-a-new-crate">Before publishing a new crate</a></h3>
<p>Keep in mind that crate names on <a href="https://crates.io/">crates.io</a> are allocated on a first-come-first-
serve basis. Once a crate name is taken, it cannot be used for another crate.</p>
<p>Check out the <a href="reference/manifest.html">metadata you can specify</a> in <code>Cargo.toml</code> to
ensure your crate can be discovered more easily! Before publishing, make sure
you have filled out the following fields:</p>
<ul>
<li><a href="reference/manifest.html#the-authors-field"><code>authors</code></a></li>
<li><a href="reference/manifest.html#the-license-and-license-file-fields"><code>license</code> or <code>license-file</code></a></li>
<li><a href="reference/manifest.html#the-description-field"><code>description</code></a></li>
<li><a href="reference/manifest.html#the-homepage-field"><code>homepage</code></a></li>
<li><a href="reference/manifest.html#the-documentation-field"><code>documentation</code></a></li>
<li><a href="reference/manifest.html#the-repository-field"><code>repository</code></a></li>
<li><a href="reference/manifest.html#the-readme-field"><code>readme</code></a></li>
</ul>
<p>It would also be a good idea to include some <a href="reference/manifest.html#the-keywords-field"><code>keywords</code></a> and <a href="reference/manifest.html#the-categories-field"><code>categories</code></a>,
though they are not required.</p>
<p>If you are publishing a library, you may also want to consult the <a href="https://rust-lang-nursery.github.io/api-guidelines/">Rust API
Guidelines</a>.</p>
<h4><a class="header" href="#packaging-a-crate" id="packaging-a-crate">Packaging a crate</a></h4>
<p>The next step is to package up your crate and upload it to <a href="https://crates.io/">crates.io</a>. For
this we’ll use the <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> subcommand. This command performs the following
steps:</p>
<ol>
<li>Perform some verification checks on your package.</li>
<li>Compress your source code into a <code>.crate</code> file.</li>
<li>Extract the <code>.crate</code> file into a temporary directory and verify that it
compiles.</li>
<li>Upload the <code>.crate</code> file to <a href="https://crates.io/">crates.io</a>.</li>
<li>The registry will perform some additional checks on the uploaded package
before adding it.</li>
</ol>
<p>It is recommended that you first run <code>cargo publish --dry-run</code> (or <a href="reference/../commands/cargo-package.html"><code>cargo package</code></a> which is equivalent) to ensure there aren't any warnings or errors
before publishing. This will perform the first three steps listed above.</p>
<pre><code class="language-console">$ cargo publish --dry-run
</code></pre>
<p>You can inspect the generated <code>.crate</code> file in the <code>target/package</code> directory.
<a href="https://crates.io/">crates.io</a> currently has a 10MB size limit on the <code>.crate</code> file. You may want
to check the size of the <code>.crate</code> file to ensure you didn't accidentally
package up large assets that are not required to build your package, such as
test data, website documentation, or code generation. You can check which
files are included with the following command:</p>
<pre><code class="language-console">$ cargo package --list
</code></pre>
<p>Cargo will automatically ignore files ignored by your version control system
when packaging, but if you want to specify an extra set of files to ignore you
can use the <a href="reference/manifest.html#the-exclude-and-include-fields"><code>exclude</code> key</a> in the
manifest:</p>
<pre><code class="language-toml">[package]
# ...
exclude = [
    &quot;public/assets/*&quot;,
    &quot;videos/*&quot;,
]
</code></pre>
<p>If you’d rather explicitly list the files to include, Cargo also supports an
<code>include</code> key, which if set, overrides the <code>exclude</code> key:</p>
<pre><code class="language-toml">[package]
# ...
include = [
    &quot;**/*.rs&quot;,
    &quot;Cargo.toml&quot;,
]
</code></pre>
<h3><a class="header" href="#uploading-the-crate" id="uploading-the-crate">Uploading the crate</a></h3>
<p>When you are ready to publish, use the <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> command
to upload to <a href="https://crates.io/">crates.io</a>:</p>
<pre><code class="language-console">$ cargo publish
</code></pre>
<p>And that’s it, you’ve now published your first crate!</p>
<h3><a class="header" href="#publishing-a-new-version-of-an-existing-crate" id="publishing-a-new-version-of-an-existing-crate">Publishing a new version of an existing crate</a></h3>
<p>In order to release a new version, change the <code>version</code> value specified in
your <code>Cargo.toml</code> manifest. Keep in mind <a href="reference/manifest.html#the-version-field">the semver
rules</a>, and consult <a href="https://github.com/rust-lang/rfcs/blob/master/text/1105-api-evolution.md">RFC 1105</a> for
what constitutes a semver-breaking change. Then run <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> as
described above to upload the new version.</p>
<h3><a class="header" href="#managing-a-cratesio-based-crate" id="managing-a-cratesio-based-crate">Managing a crates.io-based crate</a></h3>
<p>Management of crates is primarily done through the command line <code>cargo</code> tool
rather than the <a href="https://crates.io/">crates.io</a> web interface. For this, there are a few subcommands
to manage a crate.</p>
<h4><a class="header" href="#cargo-yank" id="cargo-yank"><code>cargo yank</code></a></h4>
<p>Occasions may arise where you publish a version of a crate that actually ends up
being broken for one reason or another (syntax error, forgot to include a file,
etc.). For situations such as this, Cargo supports a “yank” of a version of a
crate.</p>
<pre><code class="language-console">$ cargo yank --vers 1.0.1
$ cargo yank --vers 1.0.1 --undo
</code></pre>
<p>A yank <strong>does not</strong> delete any code. This feature is not intended for deleting
accidentally uploaded secrets, for example. If that happens, you must reset
those secrets immediately.</p>
<p>The semantics of a yanked version are that no new dependencies can be created
against that version, but all existing dependencies continue to work. One of the
major goals of <a href="https://crates.io/">crates.io</a> is to act as a permanent archive of crates that does
not change over time, and allowing deletion of a version would go against this
goal. Essentially a yank means that all packages with a <code>Cargo.lock</code> will not
break, while any future <code>Cargo.lock</code> files generated will not list the yanked
version.</p>
<h4><a class="header" href="#cargo-owner" id="cargo-owner"><code>cargo owner</code></a></h4>
<p>A crate is often developed by more than one person, or the primary maintainer
may change over time! The owner of a crate is the only person allowed to publish
new versions of the crate, but an owner may designate additional owners.</p>
<pre><code class="language-console">$ cargo owner --add github-handle
$ cargo owner --remove github-handle
$ cargo owner --add github:rust-lang:owners
$ cargo owner --remove github:rust-lang:owners
</code></pre>
<p>The owner IDs given to these commands must be GitHub user names or GitHub teams.</p>
<p>If a user name is given to <code>--add</code>, that user is invited as a “named” owner, with
full rights to the crate. In addition to being able to publish or yank versions
of the crate, they have the ability to add or remove owners, <em>including</em> the
owner that made <em>them</em> an owner. Needless to say, you shouldn’t make people you
don’t fully trust into a named owner. In order to become a named owner, a user
must have logged into <a href="https://crates.io/">crates.io</a> previously.</p>
<p>If a team name is given to <code>--add</code>, that team is invited as a “team” owner, with
restricted right to the crate. While they have permission to publish or yank
versions of the crate, they <em>do not</em> have the ability to add or remove owners.
In addition to being more convenient for managing groups of owners, teams are
just a bit more secure against owners becoming malicious.</p>
<p>The syntax for teams is currently <code>github:org:team</code> (see examples above).
In order to invite a team as an owner one must be a member of that team. No
such restriction applies to removing a team as an owner.</p>
<h3><a class="header" href="#github-permissions" id="github-permissions">GitHub permissions</a></h3>
<p>Team membership is not something GitHub provides simple public access to, and it
is likely for you to encounter the following message when working with them:</p>
<blockquote>
<p>It looks like you don’t have permission to query a necessary property from
GitHub to complete this request. You may need to re-authenticate on <a href="https://crates.io/">crates.io</a>
to grant permission to read GitHub org memberships. Just go to
<a href="https://crates.io/login">https://crates.io/login</a>.</p>
</blockquote>
<p>This is basically a catch-all for “you tried to query a team, and one of the
five levels of membership access control denied this”. That is not an
exaggeration. GitHub’s support for team access control is Enterprise Grade.</p>
<p>The most likely cause of this is simply that you last logged in before this
feature was added. We originally requested <em>no</em> permissions from GitHub when
authenticating users, because we didn’t actually ever use the user’s token for
anything other than logging them in. However to query team membership on your
behalf, we now require <a href="https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/">the <code>read:org</code> scope</a>.</p>
<p>You are free to deny us this scope, and everything that worked before teams
were introduced will keep working. However you will never be able to add a team
as an owner, or publish a crate as a team owner. If you ever attempt to do this,
you will get the error above. You may also see this error if you ever try to
publish a crate that you don’t own at all, but otherwise happens to have a team.</p>
<p>If you ever change your mind, or just aren’t sure if <a href="https://crates.io/">crates.io</a> has sufficient
permission, you can always go to <a href="https://crates.io/login">https://crates.io/login</a>, which will prompt you
for permission if <a href="https://crates.io/">crates.io</a> doesn’t have all the scopes it would like to.</p>
<p>An additional barrier to querying GitHub is that the organization may be
actively denying third party access. To check this, you can go to:</p>
<pre><code>https://github.com/organizations/:org/settings/oauth_application_policy
</code></pre>
<p>where <code>:org</code> is the name of the organization (e.g., <code>rust-lang</code>). You may see
something like:</p>
<p><img src="reference/../images/org-level-acl.png" alt="Organization Access Control" /></p>
<p>Where you may choose to explicitly remove <a href="https://crates.io/">crates.io</a> from your organization’s
blacklist, or simply press the “Remove Restrictions” button to allow all third
party applications to access this data.</p>
<p>Alternatively, when <a href="https://crates.io/">crates.io</a> requested the <code>read:org</code> scope, you could have
explicitly whitelisted <a href="https://crates.io/">crates.io</a> querying the org in question by pressing
the “Grant Access” button next to its name:</p>
<p><img src="reference/../images/auth-level-acl.png" alt="Authentication Access Control" /></p>
<h2><a class="header" href="#package-id-specifications" id="package-id-specifications">Package ID Specifications</a></h2>
<h3><a class="header" href="#package-id-specifications-1" id="package-id-specifications-1">Package ID specifications</a></h3>
<p>Subcommands of Cargo frequently need to refer to a particular package within a
dependency graph for various operations like updating, cleaning, building, etc.
To solve this problem, Cargo supports Package ID Specifications. A specification
is a string which is used to uniquely refer to one package within a graph of
packages.</p>
<h4><a class="header" href="#specification-grammar" id="specification-grammar">Specification grammar</a></h4>
<p>The formal grammar for a Package Id Specification is:</p>
<pre><code class="language-notrust">pkgid := pkgname
       | [ proto &quot;://&quot; ] hostname-and-path [ &quot;#&quot; ( pkgname | semver ) ]
pkgname := name [ &quot;:&quot; semver ]

proto := &quot;http&quot; | &quot;git&quot; | ...
</code></pre>
<p>Here, brackets indicate that the contents are optional.</p>
<h4><a class="header" href="#example-specifications" id="example-specifications">Example specifications</a></h4>
<p>These could all be references to a package <code>foo</code> version <code>1.2.3</code> from the
registry at <code>crates.io</code></p>
<table><thead><tr><th align="left">pkgid</th><th align="center">name</th><th align="center">version</th><th align="center">url</th></tr></thead><tbody>
<tr><td align="left"><code>foo</code></td><td align="center"><code>foo</code></td><td align="center"><code>*</code></td><td align="center"><code>*</code></td></tr>
<tr><td align="left"><code>foo:1.2.3</code></td><td align="center"><code>foo</code></td><td align="center"><code>1.2.3</code></td><td align="center"><code>*</code></td></tr>
<tr><td align="left"><code>crates.io/foo</code></td><td align="center"><code>foo</code></td><td align="center"><code>*</code></td><td align="center"><code>*://crates.io/foo</code></td></tr>
<tr><td align="left"><code>crates.io/foo#1.2.3</code></td><td align="center"><code>foo</code></td><td align="center"><code>1.2.3</code></td><td align="center"><code>*://crates.io/foo</code></td></tr>
<tr><td align="left"><code>crates.io/bar#foo:1.2.3</code></td><td align="center"><code>foo</code></td><td align="center"><code>1.2.3</code></td><td align="center"><code>*://crates.io/bar</code></td></tr>
<tr><td align="left"><code>https://crates.io/foo#1.2.3</code></td><td align="center"><code>foo</code></td><td align="center"><code>1.2.3</code></td><td align="center"><code>https://crates.io/foo</code></td></tr>
</tbody></table>
<h4><a class="header" href="#brevity-of-specifications" id="brevity-of-specifications">Brevity of specifications</a></h4>
<p>The goal of this is to enable both succinct and exhaustive syntaxes for
referring to packages in a dependency graph. Ambiguous references may refer to
one or more packages. Most commands generate an error if more than one package
could be referred to with the same specification.</p>
<h2><a class="header" href="#source-replacement" id="source-replacement">Source Replacement</a></h2>
<p>This document is about replacing the crate index. You can read about overriding
dependencies in the <a href="reference/overriding-dependencies.html">overriding dependencies</a> section of this
documentation.</p>
<p>A <em>source</em> is a provider that contains crates that may be included as
dependencies for a package. Cargo supports the ability to <strong>replace one source
with another</strong> to express strategies such as:</p>
<ul>
<li>
<p>Vendoring - custom sources can be defined which represent crates on the local
filesystem. These sources are subsets of the source that they're replacing and
can be checked into packages if necessary.</p>
</li>
<li>
<p>Mirroring - sources can be replaced with an equivalent version which acts as a
cache for crates.io itself.</p>
</li>
</ul>
<p>Cargo has a core assumption about source replacement that the source code is
exactly the same from both sources. Note that this also means that
a replacement source is not allowed to have crates which are not present in the
original source.</p>
<p>As a consequence, source replacement is not appropriate for situations such as
patching a dependency or a private registry. Cargo supports patching
dependencies through the usage of <a href="reference/overriding-dependencies.html">the <code>[patch]</code> key</a>, and private registry support is described in <a href="reference/registries.html">the Registries
chapter</a>.</p>
<h3><a class="header" href="#configuration-1" id="configuration-1">Configuration</a></h3>
<p>Configuration of replacement sources is done through <a href="reference/config.html"><code>.cargo/config.toml</code></a>
and the full set of available keys are:</p>
<pre><code class="language-toml"># The `source` table is where all keys related to source-replacement
# are stored.
[source]

# Under the `source` table are a number of other tables whose keys are a
# name for the relevant source. For example this section defines a new
# source, called `my-vendor-source`, which comes from a directory
# located at `vendor` relative to the directory containing this `.cargo/config.toml`
# file
[source.my-vendor-source]
directory = &quot;vendor&quot;

# The crates.io default source for crates is available under the name
# &quot;crates-io&quot;, and here we use the `replace-with` key to indicate that it's
# replaced with our source above.
[source.crates-io]
replace-with = &quot;my-vendor-source&quot;

# Each source has its own table where the key is the name of the source
[source.the-source-name]

# Indicate that `the-source-name` will be replaced with `another-source`,
# defined elsewhere
replace-with = &quot;another-source&quot;

# Several kinds of sources can be specified (described in more detail below):
registry = &quot;https://example.com/path/to/index&quot;
local-registry = &quot;path/to/registry&quot;
directory = &quot;path/to/vendor&quot;

# Git sources can optionally specify a branch/tag/rev as well
git = &quot;https://example.com/path/to/repo&quot;
# branch = &quot;master&quot;
# tag = &quot;v1.0.1&quot;
# rev = &quot;313f44e8&quot;
</code></pre>
<h3><a class="header" href="#registry-sources" id="registry-sources">Registry Sources</a></h3>
<p>A &quot;registry source&quot; is one that is the same as crates.io itself. That is, it has
an index served in a git repository which matches the format of the
<a href="https://github.com/rust-lang/crates.io-index">crates.io index</a>. That repository
then has configuration indicating where to download crates from.</p>
<p>Currently there is not an already-available project for setting up a mirror of
crates.io. Stay tuned though!</p>
<h3><a class="header" href="#local-registry-sources" id="local-registry-sources">Local Registry Sources</a></h3>
<p>A &quot;local registry source&quot; is intended to be a subset of another registry
source, but available on the local filesystem (aka vendoring). Local registries
are downloaded ahead of time, typically sync'd with a <code>Cargo.lock</code>, and are
made up of a set of <code>*.crate</code> files and an index like the normal registry is.</p>
<p>The primary way to manage and create local registry sources is through the
<a href="https://crates.io/crates/cargo-local-registry"><code>cargo-local-registry</code></a> subcommand,
<a href="https://crates.io/crates/cargo-local-registry">available on crates.io</a> and can be installed with
<code>cargo install cargo-local-registry</code>.</p>
<p>Local registries are contained within one directory and contain a number of
<code>*.crate</code> files downloaded from crates.io as well as an <code>index</code> directory with
the same format as the crates.io-index project (populated with just entries for
the crates that are present).</p>
<h3><a class="header" href="#directory-sources" id="directory-sources">Directory Sources</a></h3>
<p>A &quot;directory source&quot; is similar to a local registry source where it contains a
number of crates available on the local filesystem, suitable for vendoring
dependencies. Directory sources are primarily managed the <code>cargo vendor</code>
subcommand.</p>
<p>Directory sources are distinct from local registries though in that they contain
the unpacked version of <code>*.crate</code> files, making it more suitable in some
situations to check everything into source control. A directory source is just a
directory containing a number of other directories which contain the source code
for crates (the unpacked version of <code>*.crate</code> files). Currently no restriction
is placed on the name of each directory.</p>
<p>Each crate in a directory source also has an associated metadata file indicating
the checksum of each file in the crate to protect against accidental
modifications.</p>
<h2><a class="header" href="#external-tools" id="external-tools">External tools</a></h2>
<p>One of the goals of Cargo is simple integration with third-party tools, like
IDEs and other build systems. To make integration easier, Cargo has several
facilities:</p>
<ul>
<li>
<p>a <a href="reference/../commands/cargo-metadata.html"><code>cargo metadata</code></a> command, which outputs package structure and dependencies
information in JSON,</p>
</li>
<li>
<p>a <code>--message-format</code> flag, which outputs information about a particular build,
and</p>
</li>
<li>
<p>support for custom subcommands.</p>
</li>
</ul>
<h3><a class="header" href="#information-about-package-structure" id="information-about-package-structure">Information about package structure</a></h3>
<p>You can use <a href="reference/../commands/cargo-metadata.html"><code>cargo metadata</code></a> command to get information about package
structure and dependencies. See the <a href="reference/../commands/cargo-metadata.html"><code>cargo metadata</code></a> documentation
for details on the format of the output.</p>
<p>The format is stable and versioned. When calling <code>cargo metadata</code>, you should
pass <code>--format-version</code> flag explicitly to avoid forward incompatibility
hazard.</p>
<p>If you are using Rust, the <a href="https://crates.io/crates/cargo_metadata">cargo_metadata</a> crate can be used to parse the
output.</p>
<h3><a class="header" href="#json-messages" id="json-messages">JSON messages</a></h3>
<p>When passing <code>--message-format=json</code>, Cargo will output the following
information during the build:</p>
<ul>
<li>
<p>compiler errors and warnings,</p>
</li>
<li>
<p>produced artifacts,</p>
</li>
<li>
<p>results of the build scripts (for example, native dependencies).</p>
</li>
</ul>
<p>The output goes to stdout in the JSON object per line format. The <code>reason</code> field
distinguishes different kinds of messages.</p>
<p>The <code>--message-format</code> option can also take additional formatting values which
alter the way the JSON messages are computed and rendered. See the description
of the <code>--message-format</code> option in the <a href="reference/../commands/cargo-build.html">build command documentation</a> for more
details.</p>
<p>If you are using Rust, the <a href="https://crates.io/crates/cargo_metadata">cargo_metadata</a> crate can be used to parse these
messages.</p>
<h4><a class="header" href="#compiler-messages" id="compiler-messages">Compiler messages</a></h4>
<p>The &quot;compiler-message&quot; message includes output from the compiler, such as
warnings and errors. See the <a href="reference/../../rustc/json.html">rustc JSON chapter</a> for
details on <code>rustc</code>'s message format, which is embedded in the following
structure:</p>
<pre><code class="language-javascript">{
    /* The &quot;reason&quot; indicates the kind of message. */
    &quot;reason&quot;: &quot;compiler-message&quot;,
    /* The Package ID, a unique identifier for referring to the package. */
    &quot;package_id&quot;: &quot;my-package 0.1.0 (path+file:///path/to/my-package)&quot;,
    /* The Cargo target (lib, bin, example, etc.) that generated the message. */
    &quot;target&quot;: {
        /* Array of target kinds.
           - lib targets list the `crate-type` values from the
             manifest such as &quot;lib&quot;, &quot;rlib&quot;, &quot;dylib&quot;,
             &quot;proc-macro&quot;, etc. (default [&quot;lib&quot;])
           - binary is [&quot;bin&quot;]
           - example is [&quot;example&quot;]
           - integration test is [&quot;test&quot;]
           - benchmark is [&quot;bench&quot;]
           - build script is [&quot;custom-build&quot;]
        */
        &quot;kind&quot;: [
            &quot;lib&quot;
        ],
        /* Array of crate types.
           - lib and example libraries list the `crate-type` values
             from the manifest such as &quot;lib&quot;, &quot;rlib&quot;, &quot;dylib&quot;,
             &quot;proc-macro&quot;, etc. (default [&quot;lib&quot;])
           - all other target kinds are [&quot;bin&quot;]
        */
        &quot;crate_types&quot;: [
            &quot;lib&quot;
        ],
        /* The name of the target. */
        &quot;name&quot;: &quot;my-package&quot;,
        /* Absolute path to the root source file of the target. */
        &quot;src_path&quot;: &quot;/path/to/my-package/src/lib.rs&quot;,
        /* The Rust edition of the target.
           Defaults to the package edition.
        */
        &quot;edition&quot;: &quot;2018&quot;,
        /* Array of required features.
           This property is not included if no required features are set.
        */
        &quot;required-features&quot;: [&quot;feat1&quot;],
        /* Whether or not this target has doc tests enabled, and
           the target is compatible with doc testing.
        */
        &quot;doctest&quot;: true
    },
    /* The message emitted by the compiler.

    See https://doc.rust-lang.org/rustc/json.html for details.
    */
    &quot;message&quot;: {
        /* ... */
    }
}
</code></pre>
<h4><a class="header" href="#artifact-messages" id="artifact-messages">Artifact messages</a></h4>
<p>For every compilation step, a &quot;compiler-artifact&quot; message is emitted with the
following structure:</p>
<pre><code class="language-javascript">{
    /* The &quot;reason&quot; indicates the kind of message. */
    &quot;reason&quot;: &quot;compiler-artifact&quot;,
    /* The Package ID, a unique identifier for referring to the package. */
    &quot;package_id&quot;: &quot;my-package 0.1.0 (path+file:///path/to/my-package)&quot;,
    /* The Cargo target (lib, bin, example, etc.) that generated the artifacts.
       See the definition above for `compiler-message` for details.
    */
    &quot;target&quot;: {
        &quot;kind&quot;: [
            &quot;lib&quot;
        ],
        &quot;crate_types&quot;: [
            &quot;lib&quot;
        ],
        &quot;name&quot;: &quot;my-package&quot;,
        &quot;src_path&quot;: &quot;/path/to/my-package/src/lib.rs&quot;,
        &quot;edition&quot;: &quot;2018&quot;,
        &quot;doctest&quot;: true
    },
    /* The profile indicates which compiler settings were used. */
    &quot;profile&quot;: {
        /* The optimization level. */
        &quot;opt_level&quot;: &quot;0&quot;,
        /* The debug level, an integer of 0, 1, or 2. If `null`, it implies
           rustc's default of 0.
        */
        &quot;debuginfo&quot;: 2,
        /* Whether or not debug assertions are enabled. */
        &quot;debug_assertions&quot;: true,
        /* Whether or not overflow checks are enabled. */
        &quot;overflow_checks&quot;: true,
        /* Whether or not the `--test` flag is used. */
        &quot;test&quot;: false
    },
    /* Array of features enabled. */
    &quot;features&quot;: [&quot;feat1&quot;, &quot;feat2&quot;],
    /* Array of files generated by this step. */
    &quot;filenames&quot;: [
        &quot;/path/to/my-package/target/debug/libmy_package.rlib&quot;,
        &quot;/path/to/my-package/target/debug/deps/libmy_package-be9f3faac0a26ef0.rmeta&quot;
    ],
    /* A string of the path to the executable that was created, or null if
       this step did not generate an executable.
    */
    &quot;executable&quot;: null,
    /* Whether or not this step was actually executed.
       When `true`, this means that the pre-existing artifacts were
       up-to-date, and `rustc` was not executed. When `false`, this means that
       `rustc` was run to generate the artifacts.
    */
    &quot;fresh&quot;: true
}

</code></pre>
<h4><a class="header" href="#build-script-output" id="build-script-output">Build script output</a></h4>
<p>The &quot;build-script-executed&quot; message includes the parsed output of a build
script. Note that this is emitted even if the build script is not run; it will
display the previously cached value. More details about build script output
may be found in <a href="reference/build-scripts.html">the chapter on build scripts</a>.</p>
<pre><code class="language-javascript">{
    /* The &quot;reason&quot; indicates the kind of message. */
    &quot;reason&quot;: &quot;build-script-executed&quot;,
    /* The Package ID, a unique identifier for referring to the package. */
    &quot;package_id&quot;: &quot;my-package 0.1.0 (path+file:///path/to/my-package)&quot;,
    /* Array of libraries to link, as indicated by the `cargo:rustc-link-lib`
       instruction. Note that this may include a &quot;KIND=&quot; prefix in the string
       where KIND is the library kind.
    */
    &quot;linked_libs&quot;: [&quot;foo&quot;, &quot;static=bar&quot;],
    /* Array of paths to include in the library search path, as indicated by
       the `cargo:rustc-link-search` instruction. Note that this may include a
       &quot;KIND=&quot; prefix in the string where KIND is the library kind.
    */
    &quot;linked_paths&quot;: [&quot;/some/path&quot;, &quot;native=/another/path&quot;],
    /* Array of cfg values to enable, as indicated by the `cargo:rustc-cfg`
       instruction.
    */
    &quot;cfgs&quot;: [&quot;cfg1&quot;, &quot;cfg2=\&quot;string\&quot;&quot;],
    /* Array of [KEY, VALUE] arrays of environment variables to set, as
       indicated by the `cargo:rustc-env` instruction.
    */
    &quot;env&quot;: [
        [&quot;SOME_KEY&quot;, &quot;some value&quot;],
        [&quot;ANOTHER_KEY&quot;, &quot;another value&quot;]
    ],
    /* An absolute path which is used as a value of `OUT_DIR` environmental
       variable when compiling current package.
    */
    &quot;out_dir&quot;: &quot;/some/path/in/target/dir&quot;
}
</code></pre>
<h4><a class="header" href="#build-finished" id="build-finished">Build finished</a></h4>
<p>The &quot;build-finished&quot; message is emitted at the end of the build.</p>
<pre><code class="language-javascript">{
    /* The &quot;reason&quot; indicates the kind of message. */
    &quot;reason&quot;: &quot;build-finished&quot;,
    /* Whether or not the build finished successfully. */
    &quot;success&quot;: true,
}
</code></pre>
<p>This message can be helpful for tools to know when to stop reading JSON
messages. Commands such as <code>cargo test</code> or <code>cargo run</code> can produce additional
output after the build has finished. This message lets a tool know that Cargo
will not produce additional JSON messages, but there may be additional output
that may be generated afterwards (such as the output generated by the program
executed by <code>cargo run</code>).</p>
<blockquote>
<p>Note: There is experimental nightly-only support for JSON output for tests,
so additional test-specific JSON messages may begin arriving after the
&quot;build-finished&quot; message if that is enabled.</p>
</blockquote>
<h3><a class="header" href="#custom-subcommands" id="custom-subcommands">Custom subcommands</a></h3>
<p>Cargo is designed to be extensible with new subcommands without having to modify
Cargo itself. This is achieved by translating a cargo invocation of the form
cargo <code>(?&lt;command&gt;[^ ]+)</code> into an invocation of an external tool
<code>cargo-${command}</code>. The external tool must be present in one of the user's
<code>$PATH</code> directories.</p>
<p>When Cargo invokes a custom subcommand, the first argument to the subcommand
will be the filename of the custom subcommand, as usual. The second argument
will be the subcommand name itself. For example, the second argument would be
<code>${command}</code> when invoking <code>cargo-${command}</code>. Any additional arguments on the
command line will be forwarded unchanged.</p>
<p>Cargo can also display the help output of a custom subcommand with <code>cargo help ${command}</code>. Cargo assumes that the subcommand will print a help message if its
third argument is <code>--help</code>. So, <code>cargo help ${command}</code> would invoke
<code>cargo-${command} ${command} --help</code>.</p>
<p>Custom subcommands may use the <code>CARGO</code> environment variable to call back to
Cargo. Alternatively, it can link to <code>cargo</code> crate as a library, but this
approach has drawbacks:</p>
<ul>
<li>Cargo as a library is unstable: the  API may change without deprecation</li>
<li>versions of the linked Cargo library may be different from the Cargo binary</li>
</ul>
<p>Instead, it is encouraged to use the CLI interface to drive Cargo. The <a href="reference/../commands/cargo-metadata.html"><code>cargo metadata</code></a> command can be used to obtain information about the current project
(the <a href="https://crates.io/crates/cargo_metadata"><code>cargo_metadata</code></a> crate provides a Rust interface to this command).</p>
<h2><a class="header" href="#registries-1" id="registries-1">Registries</a></h2>
<p>Cargo installs crates and fetches dependencies from a &quot;registry&quot;. The default
registry is <a href="https://crates.io/">crates.io</a>. A registry contains an &quot;index&quot; which contains a
searchable list of available crates. A registry may also provide a web API to
support publishing new crates directly from Cargo.</p>
<blockquote>
<p>Note: If you are interested in mirroring or vendoring an existing registry,
take a look at <a href="reference/source-replacement.html">Source Replacement</a>.</p>
</blockquote>
<h3><a class="header" href="#using-an-alternate-registry" id="using-an-alternate-registry">Using an Alternate Registry</a></h3>
<p>To use a registry other than <a href="https://crates.io/">crates.io</a>, the name and index URL of the
registry must be added to a <a href="reference/config.html"><code>.cargo/config.toml</code> file</a>. The <code>registries</code>
table has a key for each registry, for example:</p>
<pre><code class="language-toml">[registries]
my-registry = { index = &quot;https://my-intranet:8080/git/index&quot; }
</code></pre>
<p>The <code>index</code> key should be a URL to a git repository with the registry's index.
A crate can then depend on a crate from another registry by specifying the
<code>registry</code> key and a value of the registry's name in that dependency's entry
in <code>Cargo.toml</code>:</p>
<pre><code class="language-toml"># Sample Cargo.toml
[package]
name = &quot;my-project&quot;
version = &quot;0.1.0&quot;

[dependencies]
other-crate = { version = &quot;1.0&quot;, registry = &quot;my-registry&quot; }
</code></pre>
<p>As with most config values, the index may be specified with an environment
variable instead of a config file. For example, setting the following
environment variable will accomplish the same thing as defining a config file:</p>
<pre><code>CARGO_REGISTRIES_MY_REGISTRY_INDEX=https://my-intranet:8080/git/index
</code></pre>
<blockquote>
<p>Note: <a href="https://crates.io/">crates.io</a> does not accept packages that depend on crates from other
registries.</p>
</blockquote>
<h3><a class="header" href="#publishing-to-an-alternate-registry" id="publishing-to-an-alternate-registry">Publishing to an Alternate Registry</a></h3>
<p>If the registry supports web API access, then packages can be published
directly to the registry from Cargo. Several of Cargo's commands such as
<a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> take a <code>--registry</code> command-line flag to indicate which
registry to use. For example, to publish the package in the current directory:</p>
<ol>
<li>
<p><code>cargo login --registry=my-registry</code></p>
<p>This only needs to be done once. You must enter the secret API token
retrieved from the registry's website. Alternatively the token may be
passed directly to the <code>publish</code> command with the <code>--token</code> command-line
flag or an environment variable with the name of the registry such as
<code>CARGO_REGISTRIES_MY_REGISTRY_TOKEN</code>.</p>
</li>
<li>
<p><code>cargo publish --registry=my-registry</code></p>
</li>
</ol>
<p>Instead of always passing the <code>--registry</code> command-line option, the default
registry may be set in <a href="reference/config.html"><code>.cargo/config.toml</code></a> with the <code>registry.default</code>
key.</p>
<p>Setting the <code>package.publish</code> key in the <code>Cargo.toml</code> manifest restricts which
registries the package is allowed to be published to. This is useful to
prevent accidentally publishing a closed-source package to <a href="https://crates.io/">crates.io</a>. The
value may be a list of registry names, for example:</p>
<pre><code class="language-toml">[package]
# ...
publish = [&quot;my-registry&quot;]
</code></pre>
<p>The <code>publish</code> value may also be <code>false</code> to restrict all publishing, which is
the same as an empty list.</p>
<p>The authentication information saved by <a href="reference/../commands/cargo-login.html"><code>cargo login</code></a> is stored in the
<code>credentials.toml</code> file in the Cargo home directory (default <code>$HOME/.cargo</code>). It
has a separate table for each registry, for example:</p>
<pre><code class="language-toml">[registries.my-registry]
token = &quot;854DvwSlUwEHtIo3kWy6x7UCPKHfzCmy&quot;
</code></pre>
<h3><a class="header" href="#running-a-registry" id="running-a-registry">Running a Registry</a></h3>
<p>A minimal registry can be implemented by having a git repository that contains
an index, and a server that contains the compressed <code>.crate</code> files created by
<a href="reference/../commands/cargo-package.html"><code>cargo package</code></a>. Users won't be able to use Cargo to publish to it, but this
may be sufficient for closed environments.</p>
<p>A full-featured registry that supports publishing will additionally need to
have a web API service that conforms to the API used by Cargo. The web API is
documented below.</p>
<p>At this time, there is no widely used software for running a custom registry.
There is interest in documenting projects that implement registry support, or
existing package caches that add support for Cargo.</p>
<h3><a class="header" href="#index-format" id="index-format">Index Format</a></h3>
<p>The following defines the format of the index. New features are occasionally
added, which are only understood starting with the version of Cargo that
introduced them. Older versions of Cargo may not be able to use packages that
make use of new features. However, the format for older packages should not
change, so older versions of Cargo should be able to use them.</p>
<p>The index is stored in a git repository so that Cargo can efficiently fetch
incremental updates to the index. In the root of the repository is a file
named <code>config.json</code> which contains JSON information used by Cargo for
accessing the registry. This is an example of what the <a href="https://crates.io/">crates.io</a> config file
looks like:</p>
<pre><code class="language-javascript">{
    &quot;dl&quot;: &quot;https://crates.io/api/v1/crates&quot;,
    &quot;api&quot;: &quot;https://crates.io&quot;
}
</code></pre>
<p>The keys are:</p>
<ul>
<li>
<p><code>dl</code>: This is the URL for downloading crates listed in the index. The value
may have the following markers which will be replaced with their
corresponding value:</p>
<ul>
<li><code>{crate}</code>: The name of crate.</li>
<li><code>{version}</code>: The crate version.</li>
<li><code>{prefix}</code>: A directory prefix computed from the crate name. For example,
a crate named <code>cargo</code> has a prefix of <code>ca/rg</code>. See below for details.</li>
<li><code>{lowerprefix}</code>: Lowercase variant of <code>{prefix}</code>.</li>
</ul>
<p>If none of the markers are present, then the value
<code>/{crate}/{version}/download</code> is appended to the end.</p>
</li>
<li>
<p><code>api</code>: This is the base URL for the web API. This key is optional, but if it
is not specified, commands such as <a href="reference/../commands/cargo-publish.html"><code>cargo publish</code></a> will not work. The web
API is described below.</p>
</li>
</ul>
<p>The download endpoint should send the <code>.crate</code> file for the requested package.
Cargo supports https, http, and file URLs, HTTP redirects, HTTP1 and HTTP2.
The exact specifics of TLS support depend on the platform that Cargo is
running on, the version of Cargo, and how it was compiled.</p>
<p>The rest of the index repository contains one file for each package, where the
filename is the name of the package in lowercase. Each version of the package
has a separate line in the file. The files are organized in a tier of
directories:</p>
<ul>
<li>Packages with 1 character names are placed in a directory named <code>1</code>.</li>
<li>Packages with 2 character names are placed in a directory named <code>2</code>.</li>
<li>Packages with 3 character names are placed in the directory
<code>3/{first-character}</code> where <code>{first-character}</code> is the first character of
the package name.</li>
<li>All other packages are stored in directories named
<code>{first-two}/{second-two}</code> where the top directory is the first two
characters of the package name, and the next subdirectory is the third and
fourth characters of the package name. For example, <code>cargo</code> would be stored
in a file named <code>ca/rg/cargo</code>.</li>
</ul>
<blockquote>
<p>Note: Although the index filenames are in lowercase, the fields that contain
package names in <code>Cargo.toml</code> and the index JSON data are case-sensitive and
may contain upper and lower case characters.</p>
</blockquote>
<p>The directory name above is calculated based on the package name converted to
lowercase; it is represented by the marker <code>{lowerprefix}</code>.  When the original
package name is used without case conversion, the resulting directory name is
represented by the marker <code>{prefix}</code>.  For example, the package <code>MyCrate</code> would
have a <code>{prefix}</code> of <code>My/Cr</code> and a <code>{lowerprefix}</code> of <code>my/cr</code>.  In general,
using <code>{prefix}</code> is recommended over <code>{lowerprefix}</code>, but there are pros and
cons to each choice.  Using <code>{prefix}</code> on case-insensitive filesystems results
in (harmless-but-inelegant) directory aliasing.  For example, <code>crate</code> and
<code>CrateTwo</code> have <code>{prefix}</code> values of <code>cr/at</code> and <code>Cr/at</code>; these are distinct on
Unix machines but alias to the same directory on Windows.  Using directories
with normalized case avoids aliasing, but on case-sensitive filesystems it's
harder to suport older versions of Cargo that lack <code>{prefix}</code>/<code>{lowerprefix}</code>.
For example, nginx rewrite rules can easily construct <code>{prefix}</code> but can't
perform case-conversion to construct <code>{lowerprefix}</code>.</p>
<p>Registries should consider enforcing limitations on package names added to
their index. Cargo itself allows names with any <a href="reference/../../std/primitive.char.html#method.is_alphanumeric">alphanumeric</a>, <code>-</code>, or <code>_</code>
characters. <a href="https://crates.io/">crates.io</a> imposes its own limitations, including the following:</p>
<ul>
<li>Only allows ASCII characters.</li>
<li>Only alphanumeric, <code>-</code>, and <code>_</code> characters.</li>
<li>First character must be alphabetic.</li>
<li>Case-insensitive collision detection.</li>
<li>Prevent differences of <code>-</code> vs <code>_</code>.</li>
<li>Under a specific length (max 64).</li>
<li>Rejects reserved names, such as Windows special filenames like &quot;nul&quot;.</li>
</ul>
<p>Registries should consider incorporating similar restrictions, and consider
the security implications, such as <a href="https://en.wikipedia.org/wiki/IDN_homograph_attack">IDN homograph
attacks</a> and other
concerns in <a href="https://www.unicode.org/reports/tr36/">UTR36</a> and
<a href="https://www.unicode.org/reports/tr39/">UTS39</a>.</p>
<p>Each line in a package file contains a JSON object that describes a published
version of the package. The following is a pretty-printed example with comments
explaining the format of the entry.</p>
<pre><code class="language-javascript">{
    // The name of the package.
    // This must only contain alphanumeric, `-`, or `_` characters.
    &quot;name&quot;: &quot;foo&quot;,
    // The version of the package this row is describing.
    // This must be a valid version number according to the Semantic
    // Versioning 2.0.0 spec at https://semver.org/.
    &quot;vers&quot;: &quot;0.1.0&quot;,
    // Array of direct dependencies of the package.
    &quot;deps&quot;: [
        {
            // Name of the dependency.
            // If the dependency is renamed from the original package name,
            // this is the new name. The original package name is stored in
            // the `package` field.
            &quot;name&quot;: &quot;rand&quot;,
            // The semver requirement for this dependency.
            // This must be a valid version requirement defined at
            // https://github.com/steveklabnik/semver#requirements.
            &quot;req&quot;: &quot;^0.6&quot;,
            // Array of features (as strings) enabled for this dependency.
            &quot;features&quot;: [&quot;i128_support&quot;],
            // Boolean of whether or not this is an optional dependency.
            &quot;optional&quot;: false,
            // Boolean of whether or not default features are enabled.
            &quot;default_features&quot;: true,
            // The target platform for the dependency.
            // null if not a target dependency.
            // Otherwise, a string such as &quot;cfg(windows)&quot;.
            &quot;target&quot;: null,
            // The dependency kind.
            // &quot;dev&quot;, &quot;build&quot;, or &quot;normal&quot;.
            // Note: this is a required field, but a small number of entries
            // exist in the crates.io index with either a missing or null
            // `kind` field due to implementation bugs.
            &quot;kind&quot;: &quot;normal&quot;,
            // The URL of the index of the registry where this dependency is
            // from as a string. If not specified or null, it is assumed the
            // dependency is in the current registry.
            &quot;registry&quot;: null,
            // If the dependency is renamed, this is a string of the actual
            // package name. If not specified or null, this dependency is not
            // renamed.
            &quot;package&quot;: null,
        }
    ],
    // A SHA256 checksum of the `.crate` file.
    &quot;cksum&quot;: &quot;d867001db0e2b6e0496f9fac96930e2d42233ecd3ca0413e0753d4c7695d289c&quot;,
    // Set of features defined for the package.
    // Each feature maps to an array of features or dependencies it enables.
    &quot;features&quot;: {
        &quot;extras&quot;: [&quot;rand/simd_support&quot;]
    },
    // Boolean of whether or not this version has been yanked.
    &quot;yanked&quot;: false,
    // The `links` string value from the package's manifest, or null if not
    // specified. This field is optional and defaults to null.
    &quot;links&quot;: null
}
</code></pre>
<p>The JSON objects should not be modified after they are added except for the
<code>yanked</code> field whose value may change at any time.</p>
<h3><a class="header" href="#web-api" id="web-api">Web API</a></h3>
<p>A registry may host a web API at the location defined in <code>config.json</code> to
support any of the actions listed below.</p>
<p>Cargo includes the <code>Authorization</code> header for requests that require
authentication. The header value is the API token. The server should respond
with a 403 response code if the token is not valid. Users are expected to
visit the registry's website to obtain a token, and Cargo can store the token
using the <a href="reference/../commands/cargo-login.html"><code>cargo login</code></a> command, or by passing the token on the
command-line.</p>
<p>Responses use a 200 response code for both success and errors. Cargo looks at
the JSON response to determine if there was success or failure. Failure
responses have a JSON object with the following structure:</p>
<pre><code class="language-javascript">{
    // Array of errors to display to the user.
    &quot;errors&quot;: [
        {
            // The error message as a string.
            &quot;detail&quot;: &quot;error message text&quot;
        }
    ]
}
</code></pre>
<p>Servers may also respond with a 404 response code to indicate the requested
resource is not found (for example, an unknown crate name). However, using a
200 response with an <code>errors</code> object allows a registry to provide a more
detailed error message if desired.</p>
<p>For backwards compatibility, servers should ignore any unexpected query
parameters or JSON fields. If a JSON field is missing, it should be assumed to
be null. The endpoints are versioned with the <code>v1</code> component of the path, and
Cargo is responsible for handling backwards compatibility fallbacks should any
be required in the future.</p>
<p>Cargo sets the following headers for all requests:</p>
<ul>
<li><code>Content-Type</code>: <code>application/json</code></li>
<li><code>Accept</code>: <code>application/json</code></li>
<li><code>User-Agent</code>: The Cargo version such as <code>cargo 1.32.0 (8610973aa 2019-01-02)</code>. This may be modified by the user in a configuration value.
Added in 1.29.</li>
</ul>
<h4><a class="header" href="#publish" id="publish">Publish</a></h4>
<ul>
<li>Endpoint: <code>/api/v1/crates/new</code></li>
<li>Method: PUT</li>
<li>Authorization: Included</li>
</ul>
<p>The publish endpoint is used to publish a new version of a crate. The server
should validate the crate, make it available for download, and add it to the
index.</p>
<p>The body of the data sent by Cargo is:</p>
<ul>
<li>32-bit unsigned little-endian integer of the length of JSON data.</li>
<li>Metadata of the package as a JSON object.</li>
<li>32-bit unsigned little-endian integer of the length of the <code>.crate</code> file.</li>
<li>The <code>.crate</code> file.</li>
</ul>
<p>The following is a commented example of the JSON object. Some notes of some
restrictions imposed by <a href="https://crates.io/">crates.io</a> are included only to illustrate some
suggestions on types of validation that may be done, and should not be
considered as an exhaustive list of restrictions <a href="https://crates.io/">crates.io</a> imposes.</p>
<pre><code class="language-javascript">{
    // The name of the package.
    &quot;name&quot;: &quot;foo&quot;,
    // The version of the package being published.
    &quot;vers&quot;: &quot;0.1.0&quot;,
    // Array of direct dependencies of the package.
    &quot;deps&quot;: [
        {
            // Name of the dependency.
            // If the dependency is renamed from the original package name,
            // this is the original name. The new package name is stored in
            // the `explicit_name_in_toml` field.
            &quot;name&quot;: &quot;rand&quot;,
            // The semver requirement for this dependency.
            &quot;version_req&quot;: &quot;^0.6&quot;,
            // Array of features (as strings) enabled for this dependency.
            &quot;features&quot;: [&quot;i128_support&quot;],
            // Boolean of whether or not this is an optional dependency.
            &quot;optional&quot;: false,
            // Boolean of whether or not default features are enabled.
            &quot;default_features&quot;: true,
            // The target platform for the dependency.
            // null if not a target dependency.
            // Otherwise, a string such as &quot;cfg(windows)&quot;.
            &quot;target&quot;: null,
            // The dependency kind.
            // &quot;dev&quot;, &quot;build&quot;, or &quot;normal&quot;.
            &quot;kind&quot;: &quot;normal&quot;,
            // The URL of the index of the registry where this dependency is
            // from as a string. If not specified or null, it is assumed the
            // dependency is in the current registry.
            &quot;registry&quot;: null,
            // If the dependency is renamed, this is a string of the new
            // package name. If not specified or null, this dependency is not
            // renamed.
            &quot;explicit_name_in_toml&quot;: null,
        }
    ],
    // Set of features defined for the package.
    // Each feature maps to an array of features or dependencies it enables.
    // Cargo does not impose limitations on feature names, but crates.io
    // requires alphanumeric ASCII, `_` or `-` characters.
    &quot;features&quot;: {
        &quot;extras&quot;: [&quot;rand/simd_support&quot;]
    },
    // List of strings of the authors.
    // May be empty. crates.io requires at least one entry.
    &quot;authors&quot;: [&quot;Alice &lt;a@example.com&gt;&quot;],
    // Description field from the manifest.
    // May be null. crates.io requires at least some content.
    &quot;description&quot;: null,
    // String of the URL to the website for this package's documentation.
    // May be null.
    &quot;documentation&quot;: null,
    // String of the URL to the website for this package's home page.
    // May be null.
    &quot;homepage&quot;: null,
    // String of the content of the README file.
    // May be null.
    &quot;readme&quot;: null,
    // String of a relative path to a README file in the crate.
    // May be null.
    &quot;readme_file&quot;: null,
    // Array of strings of keywords for the package.
    &quot;keywords&quot;: [],
    // Array of strings of categories for the package.
    &quot;categories&quot;: [],
    // String of the license for the package.
    // May be null. crates.io requires either `license` or `license_file` to be set.
    &quot;license&quot;: null,
    // String of a relative path to a license file in the crate.
    // May be null.
    &quot;license_file&quot;: null,
    // String of the URL to the website for the source repository of this package.
    // May be null.
    &quot;repository&quot;: null,
    // Optional object of &quot;status&quot; badges. Each value is an object of
    // arbitrary string to string mappings.
    // crates.io has special interpretation of the format of the badges.
    &quot;badges&quot;: {
        &quot;travis-ci&quot;: {
            &quot;branch&quot;: &quot;master&quot;,
            &quot;repository&quot;: &quot;rust-lang/cargo&quot;
        }
    },
    // The `links` string value from the package's manifest, or null if not
    // specified. This field is optional and defaults to null.
    &quot;links&quot;: null
}
</code></pre>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Optional object of warnings to display to the user.
    &quot;warnings&quot;: {
        // Array of strings of categories that are invalid and ignored.
        &quot;invalid_categories&quot;: [],
        // Array of strings of badge names that are invalid and ignored.
        &quot;invalid_badges&quot;: [],
        // Array of strings of arbitrary warnings to display to the user.
        &quot;other&quot;: []
    }
}
</code></pre>
<h4><a class="header" href="#yank" id="yank">Yank</a></h4>
<ul>
<li>Endpoint: <code>/api/v1/crates/{crate_name}/{version}/yank</code></li>
<li>Method: DELETE</li>
<li>Authorization: Included</li>
</ul>
<p>The yank endpoint will set the <code>yank</code> field of the given version of a crate to
<code>true</code> in the index.</p>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Indicates the delete succeeded, always true.
    &quot;ok&quot;: true,
}
</code></pre>
<h4><a class="header" href="#unyank" id="unyank">Unyank</a></h4>
<ul>
<li>Endpoint: <code>/api/v1/crates/{crate_name}/{version}/unyank</code></li>
<li>Method: PUT</li>
<li>Authorization: Included</li>
</ul>
<p>The unyank endpoint will set the <code>yank</code> field of the given version of a crate
to <code>false</code> in the index.</p>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Indicates the delete succeeded, always true.
    &quot;ok&quot;: true,
}
</code></pre>
<h4><a class="header" href="#owners" id="owners">Owners</a></h4>
<p>Cargo does not have an inherent notion of users and owners, but it does
provide the <code>owner</code> command to assist managing who has authorization to
control a crate. It is up to the registry to decide exactly how users and
owners are handled. See the <a href="reference/publishing.html#cargo-owner">publishing documentation</a> for a description of
how <a href="https://crates.io/">crates.io</a> handles owners via GitHub users and teams.</p>
<h5><a class="header" href="#owners-list" id="owners-list">Owners: List</a></h5>
<ul>
<li>Endpoint: <code>/api/v1/crates/{crate_name}/owners</code></li>
<li>Method: GET</li>
<li>Authorization: Included</li>
</ul>
<p>The owners endpoint returns a list of owners of the crate.</p>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Array of owners of the crate.
    &quot;users&quot;: [
        {
            // Unique unsigned 32-bit integer of the owner.
            &quot;id&quot;: 70,
            // The unique username of the owner.
            &quot;login&quot;: &quot;github:rust-lang:core&quot;,
            // Name of the owner.
            // This is optional and may be null.
            &quot;name&quot;: &quot;Core&quot;,
        }
    ]
}
</code></pre>
<h5><a class="header" href="#owners-add" id="owners-add">Owners: Add</a></h5>
<ul>
<li>Endpoint: <code>/api/v1/crates/{crate_name}/owners</code></li>
<li>Method: PUT</li>
<li>Authorization: Included</li>
</ul>
<p>A PUT request will send a request to the registry to add a new owner to a
crate. It is up to the registry how to handle the request. For example,
<a href="https://crates.io/">crates.io</a> sends an invite to the user that they must accept before being
added.</p>
<p>The request should include the following JSON object:</p>
<pre><code class="language-javascript">{
    // Array of `login` strings of owners to add.
    &quot;users&quot;: [&quot;login_name&quot;]
}
</code></pre>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Indicates the add succeeded, always true.
    &quot;ok&quot;: true,
    // A string to be displayed to the user.
    &quot;msg&quot;: &quot;user ehuss has been invited to be an owner of crate cargo&quot;
}
</code></pre>
<h5><a class="header" href="#owners-remove" id="owners-remove">Owners: Remove</a></h5>
<ul>
<li>Endpoint: <code>/api/v1/crates/{crate_name}/owners</code></li>
<li>Method: DELETE</li>
<li>Authorization: Included</li>
</ul>
<p>A DELETE request will remove an owner from a crate. The request should include
the following JSON object:</p>
<pre><code class="language-javascript">{
    // Array of `login` strings of owners to remove.
    &quot;users&quot;: [&quot;login_name&quot;]
}
</code></pre>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Indicates the remove succeeded, always true.
    &quot;ok&quot;: true
}
</code></pre>
<h4><a class="header" href="#search" id="search">Search</a></h4>
<ul>
<li>Endpoint: <code>/api/v1/crates</code></li>
<li>Method: GET</li>
<li>Query Parameters:
<ul>
<li><code>q</code>: The search query string.</li>
<li><code>per_page</code>: Number of results, default 10, max 100.</li>
</ul>
</li>
</ul>
<p>The search request will perform a search for crates, using criteria defined on
the server.</p>
<p>A successful response includes the JSON object:</p>
<pre><code class="language-javascript">{
    // Array of results.
    &quot;crates&quot;: [
        {
            // Name of the crate.
            &quot;name&quot;: &quot;rand&quot;,
            // The highest version available.
            &quot;max_version&quot;: &quot;0.6.1&quot;,
            // Textual description of the crate.
            &quot;description&quot;: &quot;Random number generators and other randomness functionality.\n&quot;,
        }
    ],
    &quot;meta&quot;: {
        // Total number of results available on the server.
        &quot;total&quot;: 119
    }
}
</code></pre>
<h4><a class="header" href="#login" id="login">Login</a></h4>
<ul>
<li>Endpoint: <code>/me</code></li>
</ul>
<p>The &quot;login&quot; endpoint is not an actual API request. It exists solely for the
<a href="reference/../commands/cargo-login.html"><code>cargo login</code></a> command to display a URL to instruct a user to visit in a web
browser to log in and retrieve an API token.</p>
<h2><a class="header" href="#unstable-features" id="unstable-features">Unstable Features</a></h2>
<p>Experimental Cargo features are only available on the nightly channel. You
typically use one of the <code>-Z</code> flags to enable them. Run <code>cargo -Z help</code> to
see a list of flags available.</p>
<p><code>-Z unstable-options</code> is a generic flag for enabling other unstable
command-line flags. Options requiring this will be called out below.</p>
<p>Anything which can be configured with a Z flag can also be set in the cargo
config file (<code>.cargo/config.toml</code>) in the <code>unstable</code> table. For example:</p>
<pre><code class="language-toml">[unstable]
mtime-on-use = 'yes'
multitarget = 'yes'
timings = 'yes'
</code></pre>
<p>Some unstable features will require you to specify the <code>cargo-features</code> key in
<code>Cargo.toml</code>.</p>
<h3><a class="header" href="#no-index-update" id="no-index-update">no-index-update</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/3479">#3479</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7404">#7404</a></li>
</ul>
<p>The <code>-Z no-index-update</code> flag ensures that Cargo does not attempt to update
the registry index. This is intended for tools such as Crater that issue many
Cargo commands, and you want to avoid the network latency for updating the
index each time.</p>
<h3><a class="header" href="#mtime-on-use" id="mtime-on-use">mtime-on-use</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/pull/6477">#6477</a></li>
<li>Cache usage meta tracking issue: <a href="https://github.com/rust-lang/cargo/issues/7150">#7150</a></li>
</ul>
<p>The <code>-Z mtime-on-use</code> flag is an experiment to have Cargo update the mtime of
used files to make it easier for tools like cargo-sweep to detect which files
are stale. For many workflows this needs to be set on <em>all</em> invocations of cargo.
To make this more practical setting the <code>unstable.mtime_on_use</code> flag in <code>.cargo/config.toml</code>
or the corresponding ENV variable will apply the <code>-Z mtime-on-use</code> to all
invocations of nightly cargo. (the config flag is ignored by stable)</p>
<h3><a class="header" href="#avoid-dev-deps" id="avoid-dev-deps">avoid-dev-deps</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4988">#4988</a></li>
<li>Stabilization Issue: <a href="https://github.com/rust-lang/cargo/issues/5133">#5133</a></li>
</ul>
<p>When running commands such as <code>cargo install</code> or <code>cargo build</code>, Cargo
currently requires dev-dependencies to be downloaded, even if they are not
used. The <code>-Z avoid-dev-deps</code> flag allows Cargo to avoid downloading
dev-dependencies if they are not needed. The <code>Cargo.lock</code> file will not be
generated if dev-dependencies are skipped.</p>
<h3><a class="header" href="#minimal-versions" id="minimal-versions">minimal-versions</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4100">#4100</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5657">#5657</a></li>
</ul>
<blockquote>
<p>Note: It is not recommended to use this feature. Because it enforces minimal
versions for all transitive dependencies, its usefulness is limited since
not all external dependencies declare proper lower version bounds. It is
intended that it will be changed in the future to only enforce minimal
versions for direct dependencies.</p>
</blockquote>
<p>When a <code>Cargo.lock</code> file is generated, the <code>-Z minimal-versions</code> flag will
resolve the dependencies to the minimum semver version that will satisfy the
requirements (instead of the greatest version).</p>
<p>The intended use-case of this flag is to check, during continuous integration,
that the versions specified in Cargo.toml are a correct reflection of the
minimum versions that you are actually using. That is, if Cargo.toml says
<code>foo = &quot;1.0.0&quot;</code> that you don't accidentally depend on features added only in
<code>foo 1.5.0</code>.</p>
<h3><a class="header" href="#out-dir" id="out-dir">out-dir</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4875">#4875</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/6790">#6790</a></li>
</ul>
<p>This feature allows you to specify the directory where artifacts will be
copied to after they are built. Typically artifacts are only written to the
<code>target/release</code> or <code>target/debug</code> directories. However, determining the
exact filename can be tricky since you need to parse JSON output. The
<code>--out-dir</code> flag makes it easier to predictably access the artifacts. Note
that the artifacts are copied, so the originals are still in the <code>target</code>
directory. Example:</p>
<pre><code>cargo +nightly build --out-dir=out -Z unstable-options
</code></pre>
<p>This can also be specified in <code>.cargo/config.toml</code> files.</p>
<pre><code class="language-toml">[build]
out-dir = &quot;out&quot;
</code></pre>
<h3><a class="header" href="#doctest-xcompile" id="doctest-xcompile">doctest-xcompile</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7040">#7040</a></li>
<li>Tracking Rustc Issue: <a href="https://github.com/rust-lang/rust/issues/64245">#64245</a></li>
</ul>
<p>This flag changes <code>cargo test</code>'s behavior when handling doctests when
a target is passed. Currently, if a target is passed that is different
from the host cargo will simply skip testing doctests. If this flag is
present, cargo will continue as normal, passing the tests to doctest,
while also passing it a <code>--target</code> option, as well as enabling
<code>-Zunstable-features --enable-per-target-ignores</code> and passing along
information from <code>.cargo/config.toml</code>. See the rustc issue for more information.</p>
<pre><code>cargo test --target foo -Zdoctest-xcompile
</code></pre>
<h3><a class="header" href="#multitarget" id="multitarget">multitarget</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8176">#8176</a></li>
</ul>
<p>This flag allows passing multiple <code>--target</code> flags to the <code>cargo</code> subcommand
selected. When multiple <code>--target</code> flags are passed the selected build targets
will be built for each of the selected architectures.</p>
<p>For example to compile a library for both 32 and 64-bit:</p>
<pre><code>cargo build --target x86_64-unknown-linux-gnu --target i686-unknown-linux-gnu
</code></pre>
<p>or running tests for both targets:</p>
<pre><code>cargo test --target x86_64-unknown-linux-gnu --target i686-unknown-linux-gnu
</code></pre>
<h3><a class="header" href="#custom-named-profiles" id="custom-named-profiles">Custom named profiles</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/6988">rust-lang/cargo#6988</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/2678">#2678</a></li>
</ul>
<p>With this feature you can define custom profiles having new names. With the
custom profile enabled, build artifacts can be emitted by default to
directories other than <code>release</code> or <code>debug</code>, based on the custom profile's
name.</p>
<p>For example:</p>
<pre><code class="language-toml">cargo-features = [&quot;named-profiles&quot;]

[profile.release-lto]
inherits = &quot;release&quot;
lto = true
</code></pre>
<p>An <code>inherits</code> key is used in order to receive attributes from other profiles,
so that a new custom profile can be based on the standard <code>dev</code> or <code>release</code>
profile presets. Cargo emits errors in case <code>inherits</code> loops are detected. When
considering inheritance hierarchy, all profiles directly or indirectly inherit
from either from <code>release</code> or from <code>dev</code>.</p>
<p>Valid profile names are: must not be empty, use only alphanumeric characters or
<code>-</code> or <code>_</code>.</p>
<p>Passing <code>--profile</code> with the profile's name to various Cargo commands, directs
operations to use the profile's attributes. Overrides that are specified in the
profiles from which the custom profile inherits are inherited too.</p>
<p>For example, using <code>cargo build</code> with <code>--profile</code> and the manifest from above:</p>
<pre><code>cargo +nightly build --profile release-lto -Z unstable-options
</code></pre>
<p>When a custom profile is used, build artifcats go to a different target by
default. In the example above, you can expect to see the outputs under
<code>target/release-lto</code>.</p>
<h4><a class="header" href="#new-dir-name-attribute" id="new-dir-name-attribute">New <code>dir-name</code> attribute</a></h4>
<p>Some of the paths generated under <code>target/</code> have resulted in a de-facto &quot;build
protocol&quot;, where <code>cargo</code> is invoked as a part of a larger project build. So, to
preserve the existing behavior, there is also a new attribute <code>dir-name</code>, which
when left unspecified, defaults to the name of the profile. For example:</p>
<pre><code class="language-toml">[profile.release-lto]
inherits = &quot;release&quot;
dir-name = &quot;lto&quot;  # Emits to target/lto instead of target/release-lto
lto = true
</code></pre>
<h3><a class="header" href="#namespaced-features" id="namespaced-features">Namespaced features</a></h3>
<ul>
<li>Original issue: <a href="https://github.com/rust-lang/cargo/issues/1286">#1286</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5565">#5565</a></li>
</ul>
<p>Currently, it is not possible to have a feature and a dependency with the same
name in the manifest. If you set <code>namespaced-features</code> to <code>true</code>, the namespaces
for features and dependencies are separated. The effect of this is that, in the
feature requirements, dependencies have to be prefixed with <code>crate:</code>. Like this:</p>
<pre><code class="language-toml">[package]
namespaced-features = true

[features]
bar = [&quot;crate:baz&quot;, &quot;foo&quot;]
foo = []

[dependencies]
baz = { version = &quot;0.1&quot;, optional = true }
</code></pre>
<p>To prevent unnecessary boilerplate from having to explicitly declare features
for each optional dependency, implicit features get created for any optional
dependencies where a feature of the same name is not defined. However, if
a feature of the same name as a dependency is defined, that feature must
include the dependency as a requirement, as <code>foo = [&quot;crate:foo&quot;]</code>.</p>
<h3><a class="header" href="#build-plan" id="build-plan">Build-plan</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5579">#5579</a></li>
</ul>
<p>The <code>--build-plan</code> argument for the <code>build</code> command will output JSON with
information about which commands would be run without actually executing
anything. This can be useful when integrating with another build tool.
Example:</p>
<pre><code>cargo +nightly build --build-plan -Z unstable-options
</code></pre>
<h3><a class="header" href="#metabuild" id="metabuild">Metabuild</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/49803">rust-lang/rust#49803</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/blob/master/text/2196-metabuild.md">#2196</a></li>
</ul>
<p>Metabuild is a feature to have declarative build scripts. Instead of writing
a <code>build.rs</code> script, you specify a list of build dependencies in the
<code>metabuild</code> key in <code>Cargo.toml</code>. A build script is automatically generated
that runs each build dependency in order. Metabuild packages can then read
metadata from <code>Cargo.toml</code> to specify their behavior.</p>
<p>Include <code>cargo-features</code> at the top of <code>Cargo.toml</code>, a <code>metabuild</code> key in the
<code>package</code>, list the dependencies in <code>build-dependencies</code>, and add any metadata
that the metabuild packages require under <code>package.metadata</code>. Example:</p>
<pre><code class="language-toml">cargo-features = [&quot;metabuild&quot;]

[package]
name = &quot;mypackage&quot;
version = &quot;0.0.1&quot;
metabuild = [&quot;foo&quot;, &quot;bar&quot;]

[build-dependencies]
foo = &quot;1.0&quot;
bar = &quot;1.0&quot;

[package.metadata.foo]
extra-info = &quot;qwerty&quot;
</code></pre>
<p>Metabuild packages should have a public function called <code>metabuild</code> that
performs the same actions as a regular <code>build.rs</code> script would perform.</p>
<h3><a class="header" href="#public-dependency" id="public-dependency">public-dependency</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/44663">#44663</a></li>
</ul>
<p>The 'public-dependency' feature allows marking dependencies as 'public'
or 'private'. When this feature is enabled, additional information is passed to rustc to allow
the 'exported_private_dependencies' lint to function properly.</p>
<p>This requires the appropriate key to be set in <code>cargo-features</code>:</p>
<pre><code class="language-toml">cargo-features = [&quot;public-dependency&quot;]

[dependencies]
my_dep = { version = &quot;1.2.3&quot;, public = true }
private_dep = &quot;2.0.0&quot; # Will be 'private' by default
</code></pre>
<h3><a class="header" href="#build-std" id="build-std">build-std</a></h3>
<ul>
<li>Tracking Repository: https://github.com/rust-lang/wg-cargo-std-aware</li>
</ul>
<p>The <code>build-std</code> feature enables Cargo to compile the standard library itself as
part of a crate graph compilation. This feature has also historically been known
as &quot;std-aware Cargo&quot;. This feature is still in very early stages of development,
and is also a possible massive feature addition to Cargo. This is a very large
feature to document, even in the minimal form that it exists in today, so if
you're curious to stay up to date you'll want to follow the <a href="https://github.com/rust-lang/wg-cargo-std-aware">tracking
repository</a> and its set of
issues.</p>
<p>The functionality implemented today is behind a flag called <code>-Z build-std</code>. This
flag indicates that Cargo should compile the standard library from source code
using the same profile as the main build itself. Note that for this to work you
need to have the source code for the standard library available, and at this
time the only supported method of doing so is to add the <code>rust-src</code> rust rustup
component:</p>
<pre><code>$ rustup component add rust-src --toolchain nightly
</code></pre>
<p>It is also required today that the <code>-Z build-std</code> flag is combined with the
<code>--target</code> flag. Note that you're not forced to do a cross compilation, you're
just forced to pass <code>--target</code> in one form or another.</p>
<p>Usage looks like:</p>
<pre><code>$ cargo new foo
$ cd foo
$ cargo +nightly run -Z build-std --target x86_64-unknown-linux-gnu
   Compiling core v0.0.0 (...)
   ...
   Compiling foo v0.1.0 (...)
    Finished dev [unoptimized + debuginfo] target(s) in 21.00s
     Running `target/x86_64-unknown-linux-gnu/debug/foo`
Hello, world!
</code></pre>
<p>Here we recompiled the standard library in debug mode with debug assertions
(like <code>src/main.rs</code> is compiled) and everything was linked together at the end.</p>
<p>Using <code>-Z build-std</code> will implicitly compile the stable crates <code>core</code>, <code>std</code>,
<code>alloc</code>, and <code>proc_macro</code>. If you're using <code>cargo test</code> it will also compile the
<code>test</code> crate. If you're working with an environment which does not support some
of these crates, then you can pass an argument to <code>-Zbuild-std</code> as well:</p>
<pre><code>$ cargo +nightly build -Z build-std=core,alloc
</code></pre>
<p>The value here is a comma-separated list of standard library crates to build.</p>
<h4><a class="header" href="#requirements" id="requirements">Requirements</a></h4>
<p>As a summary, a list of requirements today to use <code>-Z build-std</code> are:</p>
<ul>
<li>You must install libstd's source code through <code>rustup component add rust-src</code></li>
<li>You must pass <code>--target</code></li>
<li>You must use both a nightly Cargo and a nightly rustc</li>
<li>The <code>-Z build-std</code> flag must be passed to all <code>cargo</code> invocations.</li>
</ul>
<h4><a class="header" href="#reporting-bugs-and-helping-out" id="reporting-bugs-and-helping-out">Reporting bugs and helping out</a></h4>
<p>The <code>-Z build-std</code> feature is in the very early stages of development! This
feature for Cargo has an extremely long history and is very large in scope, and
this is just the beginning. If you'd like to report bugs please either report
them to:</p>
<ul>
<li>Cargo - https://github.com/rust-lang/cargo/issues/new - for implementation bugs</li>
<li>The tracking repository -
https://github.com/rust-lang/wg-cargo-std-aware/issues/new - for larger design
questions.</li>
</ul>
<p>Also if you'd like to see a feature that's not yet implemented and/or if
something doesn't quite work the way you'd like it to, feel free to check out
the <a href="https://github.com/rust-lang/wg-cargo-std-aware/issues">issue tracker</a> of
the tracking repository, and if it's not there please file a new issue!</p>
<h3><a class="header" href="#build-std-features" id="build-std-features">build-std-features</a></h3>
<ul>
<li>Tracking Repository: https://github.com/rust-lang/wg-cargo-std-aware</li>
</ul>
<p>This flag is a sibling to the <code>-Zbuild-std</code> feature flag. This will configure
the features enabled for the standard library itself when building the standard
library. The default enabled features, at this time, are <code>backtrace</code> and
<code>panic_unwind</code>. This flag expects a comma-separated list and, if provided, will
override the default list of features enabled.</p>
<h3><a class="header" href="#timings" id="timings">timings</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7405">#7405</a></li>
</ul>
<p>The <code>timings</code> feature gives some information about how long each compilation
takes, and tracks concurrency information over time.</p>
<pre><code>cargo +nightly build -Z timings
</code></pre>
<p>The <code>-Ztimings</code> flag can optionally take a comma-separated list of the
following values:</p>
<ul>
<li><code>html</code> — Saves a file called <code>cargo-timing.html</code> to the current directory
with a report of the compilation. Files are also saved with a timestamp in
the filename if you want to look at older runs.</li>
<li><code>info</code> — Displays a message to stdout after each compilation finishes with
how long it took.</li>
<li><code>json</code> — Emits some JSON information about timing information.</li>
</ul>
<p>The default if none are specified is <code>html,info</code>.</p>
<h4><a class="header" href="#reading-the-graphs" id="reading-the-graphs">Reading the graphs</a></h4>
<p>There are two graphs in the output. The &quot;unit&quot; graph shows the duration of
each unit over time. A &quot;unit&quot; is a single compiler invocation. There are lines
that show which additional units are &quot;unlocked&quot; when a unit finishes. That is,
it shows the new units that are now allowed to run because their dependencies
are all finished. Hover the mouse over a unit to highlight the lines. This can
help visualize the critical path of dependencies. This may change between runs
because the units may finish in different orders.</p>
<p>The &quot;codegen&quot; times are highlighted in a lavender color. In some cases, build
pipelining allows units to start when their dependencies are performing code
generation. This information is not always displayed (for example, binary
units do not show when code generation starts).</p>
<p>The &quot;custom build&quot; units are <code>build.rs</code> scripts, which when run are
highlighted in orange.</p>
<p>The second graph shows Cargo's concurrency over time. The three lines are:</p>
<ul>
<li>&quot;Waiting&quot; (red) — This is the number of units waiting for a CPU slot to
open.</li>
<li>&quot;Inactive&quot; (blue) — This is the number of units that are waiting for their
dependencies to finish.</li>
<li>&quot;Active&quot; (green) — This is the number of units currently running.</li>
</ul>
<p>Note: This does not show the concurrency in the compiler itself. <code>rustc</code>
coordinates with Cargo via the &quot;job server&quot; to stay within the concurrency
limit. This currently mostly applies to the code generation phase.</p>
<p>Tips for addressing compile times:</p>
<ul>
<li>Look for slow dependencies.
<ul>
<li>Check if they have features that you may wish to consider disabling.</li>
<li>Consider trying to remove the dependency completely.</li>
</ul>
</li>
<li>Look for a crate being built multiple times with different versions. Try to
remove the older versions from the dependency graph.</li>
<li>Split large crates into smaller pieces.</li>
<li>If there are a large number of crates bottlenecked on a single crate, focus
your attention on improving that one crate to improve parallelism.</li>
</ul>
<h3><a class="header" href="#binary-dep-depinfo" id="binary-dep-depinfo">binary-dep-depinfo</a></h3>
<ul>
<li>Tracking rustc issue: <a href="https://github.com/rust-lang/rust/issues/63012">#63012</a></li>
</ul>
<p>The <code>-Z binary-dep-depinfo</code> flag causes Cargo to forward the same flag to
<code>rustc</code> which will then cause <code>rustc</code> to include the paths of all binary
dependencies in the &quot;dep info&quot; file (with the <code>.d</code> extension). Cargo then uses
that information for change-detection (if any binary dependency changes, then
the crate will be rebuilt). The primary use case is for building the compiler
itself, which has implicit dependencies on the standard library that would
otherwise be untracked for change-detection.</p>
<h3><a class="header" href="#panic-abort-tests" id="panic-abort-tests">panic-abort-tests</a></h3>
<p>The <code>-Z panic-abort-tests</code> flag will enable nightly support to compile test
harness crates with <code>-Cpanic=abort</code>. Without this flag Cargo will compile tests,
and everything they depend on, with <code>-Cpanic=unwind</code> because it's the only way
<code>test</code>-the-crate knows how to operate. As of <a href="https://github.com/rust-lang/rust/pull/64158">rust-lang/rust#64158</a>, however,
the <code>test</code> crate supports <code>-C panic=abort</code> with a test-per-process, and can help
avoid compiling crate graphs multiple times.</p>
<p>It's currently unclear how this feature will be stabilized in Cargo, but we'd
like to stabilize it somehow!</p>
<h3><a class="header" href="#config-cli" id="config-cli">config-cli</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7722">#7722</a></li>
</ul>
<p>The <code>--config</code> CLI option allows arbitrary config values to be passed
in via the command-line. The argument should be in TOML syntax of KEY=VALUE:</p>
<pre><code class="language-console">cargo +nightly -Zunstable-options --config net.git-fetch-with-cli=true fetch
</code></pre>
<p>The <code>--config</code> option may be specified multiple times, in which case the
values are merged in left-to-right order, using the same merging logic that
multiple config files use. CLI values take precedence over environment
variables, which take precedence over config files.</p>
<p>Some examples of what it looks like using Bourne shell syntax:</p>
<pre><code class="language-sh"># Most shells will require escaping.
cargo --config http.proxy=\&quot;http://example.com\&quot; …

# Spaces may be used.
cargo --config &quot;net.git-fetch-with-cli = true&quot; …

# TOML array example. Single quotes make it easier to read and write.
cargo --config 'build.rustdocflags = [&quot;--html-in-header&quot;, &quot;header.html&quot;]' …

# Example of a complex TOML key.
cargo --config &quot;target.'cfg(all(target_arch = \&quot;arm\&quot;, target_os = \&quot;none\&quot;))'.runner = 'my-runner'&quot; …

# Example of overriding a profile setting.
cargo --config profile.dev.package.image.opt-level=3 …
</code></pre>
<h3><a class="header" href="#config-include" id="config-include">config-include</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7723">#7723</a></li>
</ul>
<p>The <code>include</code> key in a config file can be used to load another config file. It
takes a string for a path to another file relative to the config file, or a
list of strings. It requires the <code>-Zconfig-include</code> command-line option.</p>
<pre><code class="language-toml"># .cargo/config
include = '../../some-common-config.toml'
</code></pre>
<p>The config values are first loaded from the include path, and then the config
file's own values are merged on top of it.</p>
<p>This can be paired with <a href="reference/unstable.html#config-cli">config-cli</a> to specify a file to load
from the command-line. Pass a path to a config file as the argument to
<code>--config</code>:</p>
<pre><code class="language-console">cargo +nightly -Zunstable-options -Zconfig-include --config somefile.toml build
</code></pre>
<p>CLI paths are relative to the current working directory.</p>
<h3><a class="header" href="#features-1" id="features-1">Features</a></h3>
<ul>
<li>Tracking Issues:
<ul>
<li><a href="https://github.com/rust-lang/cargo/issues/7914">itarget #7914</a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/7915">build_dep #7915</a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/7916">dev_dep #7916</a></li>
</ul>
</li>
</ul>
<p>The <code>-Zfeatures</code> option causes Cargo to use a new feature resolver that can
resolve features differently from before. It takes a comma separated list of
options to indicate which new behaviors to enable. With no options, it should
behave the same as without the flag.</p>
<pre><code class="language-console">cargo +nightly -Zfeatures=itarget,build_dep
</code></pre>
<p>The available options are:</p>
<ul>
<li>
<p><code>itarget</code> — Ignores features for target-specific dependencies for targets
that don't match the current compile target. For example:</p>
<pre><code class="language-toml">[dependency.common]
version = &quot;1.0&quot;
features = [&quot;f1&quot;]

[target.'cfg(windows)'.dependencies.common]
version = &quot;1.0&quot;
features = [&quot;f2&quot;]
</code></pre>
<p>When building this example for a non-Windows platform, the <code>f2</code> feature will
<em>not</em> be enabled.</p>
</li>
<li>
<p><code>host_dep</code> — Prevents features enabled on build dependencies or proc-macros
from being enabled for normal dependencies. For example:</p>
<pre><code class="language-toml">[dependencies]
log = &quot;0.4&quot;

[build-dependencies]
log = {version = &quot;0.4&quot;, features=['std']}
</code></pre>
<p>When building the build script, the <code>log</code> crate will be built with the <code>std</code>
feature. When building the library of your package, it will not enable the
feature.</p>
<p>Note that proc-macro decoupling requires changes to the registry, so it
won't be decoupled until the registry is updated to support the new field.</p>
</li>
<li>
<p><code>dev_dep</code> — Prevents features enabled on dev dependencies from being enabled
for normal dependencies. For example:</p>
<pre><code class="language-toml">[dependencies]
serde = {version = &quot;1.0&quot;, default-features = false}

[dev-dependencies]
serde = {version = &quot;1.0&quot;, features = [&quot;std&quot;]}
</code></pre>
<p>In this example, the library will normally link against <code>serde</code> without the
<code>std</code> feature. However, when built as a test or example, it will include the
<code>std</code> feature.</p>
<p>This mode is ignored if you are building any test, bench, or example. That
is, dev dependency features will still be unified if you run commands like
<code>cargo test</code> or <code>cargo build --all-targets</code>.</p>
</li>
<li>
<p><code>all</code> — Enable all feature options (<code>itarget,build_dep,dev_dep</code>).</p>
</li>
<li>
<p><code>compare</code> — This option compares the resolved features to the old resolver,
and will print any differences.</p>
</li>
</ul>
<h3><a class="header" href="#package-features" id="package-features">package-features</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5364">#5364</a></li>
</ul>
<p>The <code>-Zpackage-features</code> flag changes the way features can be passed on the
command-line for a workspace. The normal behavior can be confusing, as the
features passed are always enabled on the package in the current directory,
even if that package is not selected with a <code>-p</code> flag. Feature flags also do
not work in the root of a virtual workspace. <code>-Zpackage-features</code> tries to
make feature flags behave in a more intuitive manner.</p>
<ul>
<li><code>cargo build -p other_member --features …</code> — This now only enables the given
features as defined in <code>other_member</code> (ignores whatever is in the current
directory).</li>
<li><code>cargo build -p a -p b --features …</code> — This now enables the given features
on both <code>a</code> and <code>b</code>. Not all packages need to define every feature, it only
enables matching features. It is still an error if none of the packages
define a given feature.</li>
<li><code>--features</code> and <code>--no-default-features</code> are now allowed in the root of a
virtual workspace.</li>
<li><code>member_name/feature_name</code> syntax may now be used on the command-line to
enable features for a specific member.</li>
</ul>
<p>The ability to set features for non-workspace members is no longer allowed, as
the resolver fundamentally does not support that ability.</p>
<h3><a class="header" href="#resolver" id="resolver">Resolver</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8088">#8088</a></li>
</ul>
<p>The <code>resolver</code> feature allows the resolver version to be specified in the
<code>Cargo.toml</code> manifest. This allows a project to opt-in to
backwards-incompatible changes in the resolver.</p>
<pre><code class="language-toml">cargo-features = [&quot;resolver&quot;]

[package]
name = &quot;my-package&quot;
version = &quot;1.0.0&quot;
resolver = &quot;2&quot;
</code></pre>
<p>Currently the only allowed value is <code>&quot;2&quot;</code>. This declaration enables all of the
new feature behavior of <a href="reference/unstable.html#features"><code>-Zfeatures=all</code></a> and
<a href="reference/unstable.html#package-features"><code>-Zpackage-features</code></a>.</p>
<p>This flag is global for a workspace. If using a virtual workspace, the root
definition should be in the <code>[workspace]</code> table like this:</p>
<pre><code class="language-toml">cargo-features = [&quot;resolver&quot;]

[workspace]
members = [&quot;member1&quot;, &quot;member2&quot;]
resolver = &quot;2&quot;
</code></pre>
<p>The <code>resolver</code> field is ignored in dependencies, only the top-level project or
workspace can control the new behavior.</p>
<h3><a class="header" href="#unit-graph" id="unit-graph">unit-graph</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8002">#8002</a></li>
</ul>
<p>The <code>--unit-graph</code> flag can be passed to any build command (<code>build</code>, <code>check</code>,
<code>run</code>, <code>test</code>, <code>bench</code>, <code>doc</code>, etc.) to emit a JSON object to stdout which
represents Cargo's internal unit graph. Nothing is actually built, and the
command returns immediately after printing. Each &quot;unit&quot; corresponds to an
execution of the compiler. These objects also include which unit each unit
depends on.</p>
<pre><code>cargo +nightly build --unit-graph -Z unstable-options
</code></pre>
<p>This structure provides a more complete view of the dependency relationship as
Cargo sees it. In particular, the &quot;features&quot; field supports the new feature
resolver where a dependency can be built multiple times with different
features. <code>cargo metadata</code> fundamentally cannot represent the relationship of
features between different dependency kinds, and features now depend on which
command is run and which packages and targets are selected. Additionally it
can provide details about intra-package dependencies like build scripts or
tests.</p>
<p>The following is a description of the JSON structure:</p>
<pre><code class="language-javascript">{
  /* Version of the JSON output structure. If any backwards incompatible
     changes are made, this value will be increased.
  */
  &quot;version&quot;: 1,
  /* Array of all build units. */
  &quot;units&quot;: [
    {
      /* An opaque string which indicates the package.
         Information about the package can be obtained from `cargo metadata`.
      */
      &quot;pkg_id&quot;: &quot;my-package 0.1.0 (path+file:///path/to/my-package)&quot;,
      /* The Cargo target. See the `cargo metadata` documentation for more
         information about these fields.
         https://doc.rust-lang.org/cargo/commands/cargo-metadata.html
      */
      &quot;target&quot;: {
        &quot;kind&quot;: [&quot;lib&quot;],
        &quot;crate_types&quot;: [&quot;lib&quot;],
        &quot;name&quot;: &quot;my-package&quot;,
        &quot;src_path&quot;: &quot;/path/to/my-package/src/lib.rs&quot;,
        &quot;edition&quot;: &quot;2018&quot;,
        &quot;doctest&quot;: true
      },
      /* The profile settings for this unit.
         These values may not match the profile defined in the manifest.
         Units can use modified profile settings. For example, the &quot;panic&quot;
         setting can be overridden for tests to force it to &quot;unwind&quot;.
      */
      &quot;profile&quot;: {
        /* The profile name these settings are derived from. */
        &quot;name&quot;: &quot;dev&quot;,
        /* The optimization level as a string. */
        &quot;opt_level&quot;: &quot;0&quot;,
        /* The LTO setting as a string. */
        &quot;lto&quot;: &quot;false&quot;,
        /* The codegen units as an integer.
           `null` if it should use the compiler's default.
        */
        &quot;codegen_units&quot;: null,
        /* The debug information level as an integer.
           `null` if it should use the compiler's default (0).
        */
        &quot;debuginfo&quot;: 2,
        /* Whether or not debug-assertions are enabled. */
        &quot;debug_assertions&quot;: true,
        /* Whether or not overflow-checks are enabled. */
        &quot;overflow_checks&quot;: true,
        /* Whether or not rpath is enabled. */
        &quot;rpath&quot;: false,
        /* Whether or not incremental is enabled. */
        &quot;incremental&quot;: true,
        /* The panic strategy, &quot;unwind&quot; or &quot;abort&quot;. */
        &quot;panic&quot;: &quot;unwind&quot;
      },
      /* Which platform this target is being built for.
         A value of `null` indicates it is for the host.
         Otherwise it is a string of the target triple (such as
         &quot;x86_64-unknown-linux-gnu&quot;).
      */
      &quot;platform&quot;: null,
      /* The &quot;mode&quot; for this unit. Valid values:

         * &quot;test&quot; — Build using `rustc` as a test.
         * &quot;build&quot; — Build using `rustc`.
         * &quot;check&quot; — Build using `rustc` in &quot;check&quot; mode.
         * &quot;doc&quot; — Build using `rustdoc`.
         * &quot;doctest&quot; — Test using `rustdoc`.
         * &quot;run-custom-build&quot; — Represents the execution of a build script.
      */
      &quot;mode&quot;: &quot;build&quot;,
      /* Array of features enabled on this unit as strings. */
      &quot;features&quot;: [&quot;somefeat&quot;],
      /* Whether or not this is a standard-library unit,
         part of the unstable build-std feature.
         If not set, treat as `false`.
      */
      &quot;is_std&quot;: false,
      /* Array of dependencies of this unit. */
      &quot;dependencies&quot;: [
        {
          /* Index in the &quot;units&quot; array for the dependency. */
          &quot;index&quot;: 1,
          /* The name that this dependency will be referred as. */
          &quot;extern_crate_name&quot;: &quot;unicode_xid&quot;,
          /* Whether or not this dependency is &quot;public&quot;,
             part of the unstable public-dependency feature.
             If not set, the public-dependency feature is not enabled.
          */
          &quot;public&quot;: false,
          /* Whether or not this dependency is injected into the prelude,
             currently used by the build-std feature.
             If not set, treat as `false`.
          */
          &quot;noprelude&quot;: false
        }
      ]
    },
    // ...
  ],
  /* Array of indices in the &quot;units&quot; array that are the &quot;roots&quot; of the
     dependency graph.
  */
  &quot;roots&quot;: [0],
}
</code></pre>
<h3><a class="header" href="#profile-strip-option" id="profile-strip-option">Profile <code>strip</code> option</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/72110">rust-lang/rust#72110</a></li>
</ul>
<p>This feature provides a new option in the <code>[profile]</code> section to strip either
symbols or debuginfo from a binary. This can be enabled like so:</p>
<pre><code class="language-toml">cargo-features = [&quot;strip&quot;]

[package]
# ...

[profile.release]
strip = &quot;debuginfo&quot;
</code></pre>
<p>Other possible values of <code>strip</code> are <code>none</code> and <code>symbols</code>. The default is
<code>none</code>.</p>
<h3><a class="header" href="#rustdoc-map" id="rustdoc-map">rustdoc-map</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8296">#8296</a></li>
</ul>
<p>This feature adds configuration settings that are passed to <code>rustdoc</code> so that
it can generate links to dependencies whose documentation is hosted elsewhere
when the dependency is not documented. First, add this to <code>.cargo/config</code>:</p>
<pre><code class="language-toml">[doc.extern-map.registries]
crates-io = &quot;https://docs.rs/&quot;
</code></pre>
<p>Then, when building documentation, use the following flags to cause links
to dependencies to link to <a href="https://docs.rs/">docs.rs</a>:</p>
<pre><code>cargo +nightly doc --no-deps -Zrustdoc-map
</code></pre>
<p>The <code>registries</code> table contains a mapping of registry name to the URL to link
to. The URL may have the markers <code>{pkg_name}</code> and <code>{version}</code> which will get
replaced with the corresponding values. If neither are specified, then Cargo
defaults to appending <code>{pkg_name}/{version}/</code> to the end of the URL.</p>
<p>Another config setting is available to redirect standard library links. By
default, rustdoc creates links to <a href="https://doc.rust-lang.org/nightly/">https://doc.rust-lang.org/nightly/</a>. To
change this behavior, use the <code>doc.extern-map.std</code> setting:</p>
<pre><code class="language-toml">[doc.extern-map]
std = &quot;local&quot;
</code></pre>
<p>A value of <code>&quot;local&quot;</code> means to link to the documentation found in the <code>rustc</code>
sysroot. If you are using rustup, this documentation can be installed with
<code>rustup component add rust-docs</code>.</p>
<p>The default value is <code>&quot;remote&quot;</code>.</p>
<p>The value may also take a URL for a custom location.</p>
<h3><a class="header" href="#terminal-width" id="terminal-width">terminal-width</a></h3>
<p>This feature provides a new flag, <code>-Z terminal-width</code>, which is used to pass
a terminal width to <code>rustc</code> so that error messages containing long lines
can be intelligently truncated.</p>
<p>For example, passing <code>-Z terminal-width=20</code> (an arbitrarily low value) might
produce the following error:</p>
<pre><code class="language-text">error[E0308]: mismatched types
  --&gt; src/main.rs:2:17
  |
2 | ..._: () = 42;
  |       --   ^^ expected `()`, found integer
  |       |
  |       expected due to this

error: aborting due to previous error
</code></pre>
<p>In contrast, without <code>-Z terminal-width</code>, the error would look as shown below:</p>
<pre><code class="language-text">error[E0308]: mismatched types
 --&gt; src/main.rs:2:17
  |
2 |     let _: () = 42;
  |            --   ^^ expected `()`, found integer
  |            |
  |            expected due to this

error: aborting due to previous error
</code></pre>
<h1><a class="header" href="#cargo-commands" id="cargo-commands">Cargo Commands</a></h1>
<ul>
<li><a href="commands/general-commands.html">General Commands</a></li>
<li><a href="commands/build-commands.html">Build Commands</a></li>
<li><a href="commands/manifest-commands.html">Manifest Commands</a></li>
<li><a href="commands/package-commands.html">Package Commands</a></li>
<li><a href="commands/publishing-commands.html">Publishing Commands</a></li>
</ul>
<h1><a class="header" href="#general-commands" id="general-commands">General Commands</a></h1>
<ul>
<li><a href="commands/cargo.html">cargo</a></li>
<li><a href="commands/cargo-help.html">cargo help</a></li>
<li><a href="commands/cargo-version.html">cargo version</a></li>
</ul>
<h1><a class="header" href="#cargo" id="cargo">cargo</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<p>cargo - The Rust package manager</p>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo [<em>OPTIONS</em>] <em>COMMAND</em> [<em>ARGS</em>]</code><br>
<code>cargo [<em>OPTIONS</em>] --version</code><br>
<code>cargo [<em>OPTIONS</em>] --list</code><br>
<code>cargo [<em>OPTIONS</em>] --help</code><br>
<code>cargo [<em>OPTIONS</em>] --explain <em>CODE</em></code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This program is a package manager and build tool for the Rust language,
available at <a href="https://rust-lang.org" class="bare">https://rust-lang.org</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commands">COMMANDS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_build_commands">Build Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="commands/cargo-bench.html">cargo-bench(1)</a></dt>
<dd>
<p>Execute benchmarks of a package.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-build.html">cargo-build(1)</a></dt>
<dd>
<p>Compile a package.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-check.html">cargo-check(1)</a></dt>
<dd>
<p>Check a local package and all of its dependencies for errors.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-clean.html">cargo-clean(1)</a></dt>
<dd>
<p>Remove artifacts that Cargo has generated in the past.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-doc.html">cargo-doc(1)</a></dt>
<dd>
<p>Build a package&#8217;s documentation.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-fetch.html">cargo-fetch(1)</a></dt>
<dd>
<p>Fetch dependencies of a package from the network.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-fix.html">cargo-fix(1)</a></dt>
<dd>
<p>Automatically fix lint warnings reported by rustc.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-run.html">cargo-run(1)</a></dt>
<dd>
<p>Run a binary or example of the local package.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-rustc.html">cargo-rustc(1)</a></dt>
<dd>
<p>Compile a package, and pass extra options to the compiler.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-rustdoc.html">cargo-rustdoc(1)</a></dt>
<dd>
<p>Build a package&#8217;s documentation, using specified custom flags.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-test.html">cargo-test(1)</a></dt>
<dd>
<p>Execute unit and integration tests of a package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_manifest_commands">Manifest Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="commands/cargo-generate-lockfile.html">cargo-generate-lockfile(1)</a></dt>
<dd>
<p>Generate <code>Cargo.lock</code> for a project.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-locate-project.html">cargo-locate-project(1)</a></dt>
<dd>
<p>Print a JSON representation of a <code>Cargo.toml</code> file&#8217;s location.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-metadata.html">cargo-metadata(1)</a></dt>
<dd>
<p>Output the resolved dependencies of a package, the concrete used versions
including overrides, in machine-readable format.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a></dt>
<dd>
<p>Print a fully qualified package specification.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-tree.html">cargo-tree(1)</a></dt>
<dd>
<p>Display a tree visualization of a dependency graph.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-update.html">cargo-update(1)</a></dt>
<dd>
<p>Update dependencies as recorded in the local lock file.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-vendor.html">cargo-vendor(1)</a></dt>
<dd>
<p>Vendor all dependencies locally.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-verify-project.html">cargo-verify-project(1)</a></dt>
<dd>
<p>Check correctness of crate manifest.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_package_commands">Package Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="commands/cargo-init.html">cargo-init(1)</a></dt>
<dd>
<p>Create a new Cargo package in an existing directory.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-install.html">cargo-install(1)</a></dt>
<dd>
<p>Build and install a Rust binary.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-new.html">cargo-new(1)</a></dt>
<dd>
<p>Create a new Cargo package.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-search.html">cargo-search(1)</a></dt>
<dd>
<p>Search packages in crates.io.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-uninstall.html">cargo-uninstall(1)</a></dt>
<dd>
<p>Remove a Rust binary.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_publishing_commands">Publishing Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="commands/cargo-login.html">cargo-login(1)</a></dt>
<dd>
<p>Save an API token from the registry locally.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-owner.html">cargo-owner(1)</a></dt>
<dd>
<p>Manage the owners of a crate on the registry.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-package.html">cargo-package(1)</a></dt>
<dd>
<p>Assemble the local package into a distributable tarball.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-publish.html">cargo-publish(1)</a></dt>
<dd>
<p>Upload a package to the registry.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-yank.html">cargo-yank(1)</a></dt>
<dd>
<p>Remove a pushed crate from the index.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_general_commands">General Commands</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="commands/cargo-help.html">cargo-help(1)</a></dt>
<dd>
<p>Display help information about Cargo.</p>
</dd>
<dt class="hdlist1"><a href="commands/cargo-version.html">cargo-version(1)</a></dt>
<dd>
<p>Show version information.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_special_options">Special Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-V</strong></dt>
<dt class="hdlist1"><strong>--version</strong></dt>
<dd>
<p>Print version info and exit. If used with <code>--verbose</code>, prints extra
information.</p>
</dd>
<dt class="hdlist1"><strong>--list</strong></dt>
<dd>
<p>List all installed Cargo subcommands. If used with <code>--verbose</code>, prints
extra information.</p>
</dd>
<dt class="hdlist1"><strong>--explain <em>CODE</em></strong></dt>
<dd>
<p>Run <code>rustc --explain CODE</code> which will print out a detailed explanation of
an error message (for example, <code>E0004</code>).</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_files">FILES</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>~/.cargo/</code></dt>
<dd>
<p>Default location for Cargo&#8217;s "home" directory where it stores various
files. The location can be changed with the <code>CARGO_HOME</code> environment
variable.</p>
</dd>
<dt class="hdlist1"><code>$CARGO_HOME/bin/</code></dt>
<dd>
<p>Binaries installed by <a href="commands/cargo-install.html">cargo-install(1)</a> will be located here. If using
rustup, executables distributed with Rust are also located here.</p>
</dd>
<dt class="hdlist1"><code>$CARGO_HOME/config.toml</code></dt>
<dd>
<p>The global configuration file. See <a href="commands/../reference/config.html">the reference</a>
for more information about configuration files.</p>
</dd>
<dt class="hdlist1"><code>.cargo/config.toml</code></dt>
<dd>
<p>Cargo automatically searches for a file named <code>.cargo/config.toml</code> in the
current directory, and all parent directories. These configuration files
will be merged with the global configuration file.</p>
</dd>
<dt class="hdlist1"><code>$CARGO_HOME/credentials.toml</code></dt>
<dd>
<p>Private authentication information for logging in to a registry.</p>
</dd>
<dt class="hdlist1"><code>$CARGO_HOME/registry/</code></dt>
<dd>
<p>This directory contains cached downloads of the registry index and any
downloaded dependencies.</p>
</dd>
<dt class="hdlist1"><code>$CARGO_HOME/git/</code></dt>
<dd>
<p>This directory contains cached downloads of git dependencies.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Please note that the internal structure of the <code>$CARGO_HOME</code> directory is not
stable yet and may be subject to change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build a local package and all of its dependencies:</p>
<div class="literalblock">
<div class="content">
<pre>cargo build</pre>
</div>
</div>
</li>
<li>
<p>Build a package with optimizations:</p>
<div class="literalblock">
<div class="content">
<pre>cargo build --release</pre>
</div>
</div>
</li>
<li>
<p>Run tests for a cross-compiled target:</p>
<div class="literalblock">
<div class="content">
<pre>cargo test --target i686-unknown-linux-gnu</pre>
</div>
</div>
</li>
<li>
<p>Create a new package that builds an executable:</p>
<div class="literalblock">
<div class="content">
<pre>cargo new foobar</pre>
</div>
</div>
</li>
<li>
<p>Create a package in the current directory:</p>
<div class="literalblock">
<div class="content">
<pre>mkdir foo &amp;&amp; cd foo
cargo init .</pre>
</div>
</div>
</li>
<li>
<p>Learn about a command&#8217;s options and usage:</p>
<div class="literalblock">
<div class="content">
<pre>cargo help clean</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="https://github.com/rust-lang/cargo/issues" class="bare">https://github.com/rust-lang/cargo/issues</a> for issues.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://doc.rust-lang.org/rustc/index.html">rustc(1)</a>, <a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-help" id="cargo-help">cargo help</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_help_name">NAME</h2>
<div class="sectionbody">
<p>cargo-help - Get help for a Cargo command</p>
</div>
<div class="sect1">
<h2 id="cargo_help_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo help [<em>SUBCOMMAND</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_help_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Prints a help message for the given command.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_help_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get help for a command:</p>
<div class="literalblock">
<div class="content">
<pre>cargo help build</pre>
</div>
</div>
</li>
<li>
<p>Help is also available with the <code>--help</code> flag:</p>
<div class="literalblock">
<div class="content">
<pre>cargo build --help</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_help_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-version" id="cargo-version">cargo version</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_version_name">NAME</h2>
<div class="sectionbody">
<p>cargo-version - Show version information</p>
</div>
<div class="sect1">
<h2 id="cargo_version_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo version [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_version_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Displays the version of Cargo.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_version_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Display additional version information.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_version_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Display the version:</p>
<div class="literalblock">
<div class="content">
<pre>cargo version</pre>
</div>
</div>
</li>
<li>
<p>The version is also available via flags:</p>
<div class="literalblock">
<div class="content">
<pre>cargo --version
cargo -V</pre>
</div>
</div>
</li>
<li>
<p>Display extra version information:</p>
<div class="literalblock">
<div class="content">
<pre>cargo -Vv</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_version_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#build-commands" id="build-commands">Build Commands</a></h1>
<ul>
<li><a href="commands/cargo-bench.html">cargo bench</a></li>
<li><a href="commands/cargo-build.html">cargo build</a></li>
<li><a href="commands/cargo-check.html">cargo check</a></li>
<li><a href="commands/cargo-clean.html">cargo clean</a></li>
<li><a href="commands/cargo-doc.html">cargo doc</a></li>
<li><a href="commands/cargo-fetch.html">cargo fetch</a></li>
<li><a href="commands/cargo-fix.html">cargo fix</a></li>
<li><a href="commands/cargo-run.html">cargo run</a></li>
<li><a href="commands/cargo-rustc.html">cargo rustc</a></li>
<li><a href="commands/cargo-rustdoc.html">cargo rustdoc</a></li>
<li><a href="commands/cargo-test.html">cargo test</a></li>
</ul>
<h1><a class="header" href="#cargo-bench" id="cargo-bench">cargo bench</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_bench_name">NAME</h2>
<div class="sectionbody">
<p>cargo-bench - Execute benchmarks of a package</p>
</div>
<div class="sect1">
<h2 id="cargo_bench_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo bench [<em>OPTIONS</em>] [BENCHNAME] [-- <em>BENCH-OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Compile and execute benchmarks.</p>
</div>
<div class="paragraph">
<p>The benchmark filtering argument <code>BENCHNAME</code> and all the arguments following
the two dashes (<code>--</code>) are passed to the benchmark binaries and thus to
<em>libtest</em> (rustc&#8217;s built in unit-test and micro-benchmarking framework).  If
you&#8217;re passing arguments to both Cargo and the binary, the ones after <code>--</code> go
to the binary, the ones before go to Cargo.  For details about libtest&#8217;s
arguments see the output of <code>cargo bench -- --help</code>.  As an example, this will
run only the benchmark named <code>foo</code> (and skip other similarly named benchmarks
like <code>foobar</code>):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo bench -- foo --exact</pre>
</div>
</div>
<div class="paragraph">
<p>Benchmarks are built with the <code>--test</code> option to <code>rustc</code> which creates an
executable with a <code>main</code> function that automatically runs all functions
annotated with the <code>#[bench]</code> attribute. Cargo passes the <code>--bench</code> flag to
the test harness to tell it to run only benchmarks.</p>
</div>
<div class="paragraph">
<p>The libtest harness may be disabled by setting <code>harness = false</code> in the target
manifest settings, in which case your code will need to provide its own <code>main</code>
function to handle running benchmarks.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>Note</strong>: The
<a href="https://doc.rust-lang.org/nightly/unstable-book/library-features/test.html"><code>#[bench]</code> attribute</a>
is currently unstable and only available on the
<a href="https://doc.rust-lang.org/book/appendix-07-nightly-rust.html">nightly channel</a>.
There are some packages available on
<a href="https://crates.io/keywords/benchmark">crates.io</a> that may help with
running benchmarks on the stable channel, such as
<a href="https://crates.io/crates/criterion">Criterion</a>.</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_bench_benchmark_options">Benchmark Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--no-run</strong></dt>
<dd>
<p>Compile, but don&#8217;t run benchmarks.</p>
</dd>
<dt class="hdlist1"><strong>--no-fail-fast</strong></dt>
<dd>
<p>Run all benchmarks regardless of failure. Without this flag, Cargo will exit
after the first executable fails. The Rust test harness will run all
benchmarks within the executable to completion, this flag only applies to
the executable as a whole.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Benchmark only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Benchmark all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo bench</code> will build the
following targets of the selected packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lib — used to link with binaries and benchmarks</p>
</li>
<li>
<p>bins (only if benchmark targets are built and required features are
available)</p>
</li>
<li>
<p>lib as a benchmark</p>
</li>
<li>
<p>bins as benchmarks</p>
</li>
<li>
<p>benchmark targets</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default behavior can be changed by setting the <code>bench</code> flag for the target
in the manifest settings. Setting examples to <code>bench = true</code> will build and
run the example as a benchmark. Setting targets to <code>bench = false</code> will stop
them from being benchmarked by default. Target selection options that take a
target by name ignore the <code>bench</code> flag and will always benchmark the given
target.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will benchmark only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Benchmark the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Benchmark the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Benchmark all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Benchmark the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Benchmark all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Benchmark the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Benchmark all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Benchmark the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Benchmark all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Benchmark all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Benchmark for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_display_options">Display Options</h3>
<div class="paragraph">
<p>By default the Rust test harness hides output from benchmark execution to keep
results readable. Benchmark output can be recovered (e.g., for debugging) by
passing <code>--nocapture</code> to the benchmark binaries:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo bench -- --nocapture</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_bench_miscellaneous_options">Miscellaneous Options</h3>
<div class="paragraph">
<p>The <code>--jobs</code> argument affects the building of the benchmark executable but
does not affect how many threads are used when running the benchmarks. The
Rust test harness runs benchmarks serially in a single thread.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Benchmarks are always built with the <code>bench</code> profile. Binary and lib targets
are built separately as benchmarks with the <code>bench</code> profile. Library targets
are built with the <code>release</code> profiles when linked to binaries and benchmarks.
Dependencies use the <code>release</code> profile.</p>
</div>
<div class="paragraph">
<p>If you need a debug build of a benchmark, try building it with
<a href="commands/cargo-build.html">cargo-build(1)</a> which will use the <code>test</code> profile which is by default
unoptimized and includes debug information. You can then run the debug-enabled
benchmark manually.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build and execute all the benchmarks of the current package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo bench</pre>
</div>
</div>
</li>
<li>
<p>Run only a specific benchmark within a specific benchmark target:</p>
<div class="literalblock">
<div class="content">
<pre>cargo bench --bench bench_name -- modname::some_benchmark</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_bench_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-test.html">cargo-test(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-build" id="cargo-build">cargo build</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_build_name">NAME</h2>
<div class="sectionbody">
<p>cargo-build - Compile the current package</p>
</div>
<div class="sect1">
<h2 id="cargo_build_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo build [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Compile local packages and all of their dependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_build_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Build only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Build all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo build</code> will build all
binary and library targets of the selected packages. Binaries are skipped if
they have <code>required-features</code> that are missing.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will build only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Build the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Build all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Build all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Build all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Build all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Build all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Build for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Build optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-build.html#cargo_build_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--out-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Copy final artifacts to this directory.</p>
<div class="paragraph">
<p>This option is unstable and available only on the
<a href="https://doc.rust-lang.org/book/appendix-07-nightly-rust.html">nightly channel</a>
and requires the <code>-Z unstable-options</code> flag to enable.
See <a href="https://github.com/rust-lang/cargo/issues/6790" class="bare">https://github.com/rust-lang/cargo/issues/6790</a> for more information.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>--build-plan</strong></dt>
<dd>
<p>Outputs a series of JSON messages to stdout that indicate the commands to
run the build.</p>
<div class="paragraph">
<p>This option is unstable and available only on the
<a href="https://doc.rust-lang.org/book/appendix-07-nightly-rust.html">nightly channel</a>
and requires the <code>-Z unstable-options</code> flag to enable.
See <a href="https://github.com/rust-lang/cargo/issues/5579" class="bare">https://github.com/rust-lang/cargo/issues/5579</a> for more information.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_build_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the local package and all of its dependencies:</p>
<div class="literalblock">
<div class="content">
<pre>cargo build</pre>
</div>
</div>
</li>
<li>
<p>Build with optimizations:</p>
<div class="literalblock">
<div class="content">
<pre>cargo build --release</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_build_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-rustc.html">cargo-rustc(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-check" id="cargo-check">cargo check</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_check_name">NAME</h2>
<div class="sectionbody">
<p>cargo-check - Check the current package</p>
</div>
<div class="sect1">
<h2 id="cargo_check_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo check [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Check a local package and all of its dependencies for errors. This will
essentially compile the packages without performing the final step of code
generation, which is faster than running <code>cargo build</code>. The compiler will save
metadata files to disk so that future runs will reuse them if the source has
not been modified.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_check_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Check only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Check all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo check</code> will check all
binary and library targets of the selected packages. Binaries are skipped if
they have <code>required-features</code> that are missing.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will check only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Check the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Check the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Check all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Check the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Check all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Check the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Check all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Check the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Check all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Check all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Check for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Check optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-check.html#cargo_check_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
<dt class="hdlist1"><strong>--profile</strong> <em>NAME</em></dt>
<dd>
<p>Changes check behavior. Currently only <code>test</code> is
supported, which will check with the
<code>#[cfg(test)]</code> attribute enabled. This is useful to have it
check unit tests which are usually excluded via
the <code>cfg</code> attribute. This does not change the actual profile used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_check_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the local package for errors:</p>
<div class="literalblock">
<div class="content">
<pre>cargo check</pre>
</div>
</div>
</li>
<li>
<p>Check all targets, including unit tests:</p>
<div class="literalblock">
<div class="content">
<pre>cargo check --all-targets --profile=test</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_check_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-build.html">cargo-build(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-clean" id="cargo-clean">cargo clean</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_clean_name">NAME</h2>
<div class="sectionbody">
<p>cargo-clean - Remove generated artifacts</p>
</div>
<div class="sect1">
<h2 id="cargo_clean_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo clean [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Remove artifacts from the target directory that Cargo has generated in the
past.</p>
</div>
<div class="paragraph">
<p>With no options, <code>cargo clean</code> will delete the entire target directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_clean_package_selection">Package Selection</h3>
<div class="paragraph">
<p>When no packages are selected, all packages and all dependencies in the
workspace are cleaned.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Clean only the specified packages. This flag may be specified
multiple times. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the SPEC format.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_clean_clean_options">Clean Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--doc</strong></dt>
<dd>
<p>This option will cause <code>cargo clean</code> to remove only the <code>doc</code> directory in
the target directory.</p>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Clean all artifacts that were built with the <code>release</code> or <code>bench</code>
profiles.</p>
</dd>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Clean for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_clean_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_clean_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_clean_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove the entire target directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo clean</pre>
</div>
</div>
</li>
<li>
<p>Remove only the release artifacts:</p>
<div class="literalblock">
<div class="content">
<pre>cargo clean --release</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_clean_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-build.html">cargo-build(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-doc" id="cargo-doc">cargo doc</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_doc_name">NAME</h2>
<div class="sectionbody">
<p>cargo-doc - Build a package's documentation</p>
</div>
<div class="sect1">
<h2 id="cargo_doc_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo doc [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Build the documentation for the local package and all dependencies. The output
is placed in <code>target/doc</code> in rustdoc&#8217;s usual format.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_doc_documentation_options">Documentation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--open</strong></dt>
<dd>
<p>Open the docs in a browser after building them. This will use your default
browser unless you define another one in the <code>BROWSER</code> environment
variable.</p>
</dd>
<dt class="hdlist1"><strong>--no-deps</strong></dt>
<dd>
<p>Do not build documentation for dependencies.</p>
</dd>
<dt class="hdlist1"><strong>--document-private-items</strong></dt>
<dd>
<p>Include non-public items in the documentation.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Document only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Document all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo doc</code> will document all
binary and library targets of the selected package. The binary will be skipped
if its name is the same as the lib target. Binaries are skipped if they have
<code>required-features</code> that are missing.</p>
</div>
<div class="paragraph">
<p>The default behavior can be changed by setting <code>doc = false</code> for the target in
the manifest settings. Using target selection options will ignore the <code>doc</code>
flag and will always document the given target.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Document the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Document the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Document all binary targets.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Document for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Document optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-doc.html#cargo_doc_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_doc_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the local package documentation and its dependencies and output to
<code>target/doc</code>.</p>
<div class="literalblock">
<div class="content">
<pre>cargo doc</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_doc_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-rustdoc.html">cargo-rustdoc(1)</a>, <a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-fetch" id="cargo-fetch">cargo fetch</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_fetch_name">NAME</h2>
<div class="sectionbody">
<p>cargo-fetch - Fetch dependencies of a package from the network</p>
</div>
<div class="sect1">
<h2 id="cargo_fetch_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo fetch [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If a <code>Cargo.lock</code> file is available, this command will ensure that all of the
git dependencies and/or registry dependencies are downloaded and locally
available. Subsequent Cargo commands never touch the network after a <code>cargo
fetch</code> unless the lock file changes.</p>
</div>
<div class="paragraph">
<p>If the lock file is not available, then this command will generate the lock
file before fetching the dependencies.</p>
</div>
<div class="paragraph">
<p>If <code>--target</code> is not specified, then all target dependencies are fetched.</p>
</div>
<div class="paragraph">
<p>See also the <a href="https://crates.io/crates/cargo-prefetch">cargo-prefetch</a>
plugin which adds a command to download popular crates. This may be useful if
you plan to use Cargo without a network with the <code>--offline</code> flag.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_fetch_fetch_options">Fetch options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Fetch for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fetch_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fetch_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fetch_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Fetch all dependencies:</p>
<div class="literalblock">
<div class="content">
<pre>cargo fetch</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fetch_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-update.html">cargo-update(1)</a>, <a href="commands/cargo-generate-lockfile.html">cargo-generate-lockfile(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-fix" id="cargo-fix">cargo fix</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_fix_name">NAME</h2>
<div class="sectionbody">
<p>cargo-fix - Automatically fix lint warnings reported by rustc</p>
</div>
<div class="sect1">
<h2 id="cargo_fix_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo fix [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This Cargo subcommand will automatically take rustc&#8217;s suggestions from
diagnostics like warnings and apply them to your source code. This is intended
to help automate tasks that rustc itself already knows how to tell you to fix!
The <code>cargo fix</code> subcommand is also being developed for the Rust 2018 edition
to provide code the ability to easily opt-in to the new edition without having
to worry about any breakage.</p>
</div>
<div class="paragraph">
<p>Executing <code>cargo fix</code> will under the hood execute <a href="commands/cargo-check.html">cargo-check(1)</a>. Any warnings
applicable to your crate will be automatically fixed (if possible) and all
remaining warnings will be displayed when the check process is finished. For
example if you&#8217;d like to prepare for the 2018 edition, you can do so by
executing:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo fix --edition</pre>
</div>
</div>
<div class="paragraph">
<p>which behaves the same as <code>cargo check --all-targets</code>.</p>
</div>
<div class="paragraph">
<p><code>cargo fix</code> is only capable of fixing code that is normally compiled with
<code>cargo check</code>. If code is conditionally enabled with optional features, you
will need to enable those features for that code to be analyzed:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo fix --edition --features foo</pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, other <code>cfg</code> expressions like platform-specific code will need to
pass <code>--target</code> to fix code for the given target.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo fix --edition --target x86_64-pc-windows-gnu</pre>
</div>
</div>
<div class="paragraph">
<p>If you encounter any problems with <code>cargo fix</code> or otherwise have any questions
or feature requests please don&#8217;t hesitate to file an issue at
<a href="https://github.com/rust-lang/cargo" class="bare">https://github.com/rust-lang/cargo</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_fix_fix_options">Fix options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--broken-code</strong></dt>
<dd>
<p>Fix code even if it already has compiler errors. This is useful if <code>cargo
fix</code> fails to apply the changes. It will apply the changes and leave the
broken code in the working directory for you to inspect and manually fix.</p>
</dd>
<dt class="hdlist1"><strong>--edition</strong></dt>
<dd>
<p>Apply changes that will update the code to the latest edition. This will
not update the edition in the <code>Cargo.toml</code> manifest, which must be updated
manually.</p>
</dd>
<dt class="hdlist1"><strong>--edition-idioms</strong></dt>
<dd>
<p>Apply suggestions that will update code to the preferred style for the
current edition.</p>
</dd>
<dt class="hdlist1"><strong>--allow-no-vcs</strong></dt>
<dd>
<p>Fix code even if a VCS was not detected.</p>
</dd>
<dt class="hdlist1"><strong>--allow-dirty</strong></dt>
<dd>
<p>Fix code even if the working directory has changes.</p>
</dd>
<dt class="hdlist1"><strong>--allow-staged</strong></dt>
<dd>
<p>Fix code even if the working directory has staged changes.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Fix only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Fix all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo fix</code> will fix all targets
(<code>--all-targets</code> implied). Binaries are skipped if they have
<code>required-features</code> that are missing.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will fix only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Fix the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Fix the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Fix all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Fix the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Fix all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Fix the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Fix all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Fix the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Fix all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Fix all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Fix for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Fix optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-fix.html#cargo_fix_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
<dt class="hdlist1"><strong>--profile</strong> <em>NAME</em></dt>
<dd>
<p>Changes fix behavior. Currently only <code>test</code> is
supported, which will fix with the
<code>#[cfg(test)]</code> attribute enabled. This is useful to have it
fix unit tests which are usually excluded via
the <code>cfg</code> attribute. This does not change the actual profile used.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_fix_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apply compiler suggestions to the local package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo fix</pre>
</div>
</div>
</li>
<li>
<p>Convert a 2015 edition to 2018:</p>
<div class="literalblock">
<div class="content">
<pre>cargo fix --edition</pre>
</div>
</div>
</li>
<li>
<p>Apply suggested idioms for the current edition:</p>
<div class="literalblock">
<div class="content">
<pre>cargo fix --edition-idioms</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_fix_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-check.html">cargo-check(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-run" id="cargo-run">cargo run</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_run_name">NAME</h2>
<div class="sectionbody">
<p>cargo-run - Run the current package</p>
</div>
<div class="sect1">
<h2 id="cargo_run_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo run [<em>OPTIONS</em>] [-- <em>ARGS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run a binary or example of the local package.</p>
</div>
<div class="paragraph">
<p>All the arguments following the two dashes (<code>--</code>) are passed to the binary to
run. If you&#8217;re passing arguments to both Cargo and the binary, the ones after
<code>--</code> go to the binary, the ones before go to Cargo.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_run_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, the package in the current working directory is selected. The <code>-p</code>
flag can be used to choose a different package in a workspace.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em></dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em></dt>
<dd>
<p>The package to run. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for
the SPEC format.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo run</code> will run the binary
target. If there are multiple binary targets, you must pass a target flag to
choose one. Or, the <code>default-run</code> field may be specified in the <code>[package]</code>
section of <code>Cargo.toml</code> to choose the name of the binary to run by default.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em></dt>
<dd>
<p>Run the specified binary.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em></dt>
<dd>
<p>Run the specified example.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Run for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Run optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-run.html#cargo_run_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_run_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the local package and run its main target (assuming only one binary):</p>
<div class="literalblock">
<div class="content">
<pre>cargo run</pre>
</div>
</div>
</li>
<li>
<p>Run an example with extra arguments:</p>
<div class="literalblock">
<div class="content">
<pre>cargo run --example exname -- --exoption exarg1 exarg2</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_run_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-build.html">cargo-build(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-rustc" id="cargo-rustc">cargo rustc</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_rustc_name">NAME</h2>
<div class="sectionbody">
<p>cargo-rustc - Compile the current package, and pass extra options to the compiler</p>
</div>
<div class="sect1">
<h2 id="cargo_rustc_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo rustc [<em>OPTIONS</em>] [-- <em>ARGS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The specified target for the current package (or package specified by <code>-p</code> if
provided) will be compiled along with all of its dependencies. The specified
<em>ARGS</em> will all be passed to the final compiler invocation, not any of the
dependencies. Note that the compiler will still unconditionally receive
arguments such as <code>-L</code>, <code>--extern</code>, and <code>--crate-type</code>, and the specified
<em>ARGS</em> will simply be added to the compiler invocation.</p>
</div>
<div class="paragraph">
<p>See <a href="https://doc.rust-lang.org/rustc/index.html" class="bare">https://doc.rust-lang.org/rustc/index.html</a> for documentation on rustc
flags.</p>
</div>
<div class="paragraph">
<p>This command requires that only one target is being compiled when additional
arguments are provided. If more than one target is available for the current
package the filters of <code>--lib</code>, <code>--bin</code>, etc, must be used to select which
target is compiled.
To pass flags to all compiler processes spawned by Cargo, use the <code>RUSTFLAGS</code>
<a href="commands/../reference/environment-variables.html">environment variable</a> or the
<code>build.rustflags</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_rustc_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, the package in the current working directory is selected. The <code>-p</code>
flag can be used to choose a different package in a workspace.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em></dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em></dt>
<dd>
<p>The package to build. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for
the SPEC format.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo rustc</code> will build all
binary and library targets of the selected package.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will build only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Build the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Build all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Build all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Build all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Build the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Build all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Build all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Build for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Build optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-rustc.html#cargo_rustc_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustc_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check if your package (not including dependencies) uses unsafe code:</p>
<div class="literalblock">
<div class="content">
<pre>cargo rustc --lib -- -D unsafe-code</pre>
</div>
</div>
</li>
<li>
<p>Try an experimental flag on the nightly compiler, such as this which prints
the size of every type:</p>
<div class="literalblock">
<div class="content">
<pre>cargo rustc --lib -- -Z print-type-sizes</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustc_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-build.html">cargo-build(1)</a>, <a href="https://doc.rust-lang.org/rustc/index.html">rustc(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-rustdoc" id="cargo-rustdoc">cargo rustdoc</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_rustdoc_name">NAME</h2>
<div class="sectionbody">
<p>cargo-rustdoc - Build a package's documentation, using specified custom flags</p>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo rustdoc [<em>OPTIONS</em>] [-- <em>ARGS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The specified target for the current package (or package specified by <code>-p</code> if
provided) will be documented with the specified <em>ARGS</em> being passed to the
final rustdoc invocation. Dependencies will not be documented as part of this
command. Note that rustdoc will still unconditionally receive arguments such
as <code>-L</code>, <code>--extern</code>, and <code>--crate-type</code>, and the specified <em>ARGS</em> will simply
be added to the rustdoc invocation.</p>
</div>
<div class="paragraph">
<p>See <a href="https://doc.rust-lang.org/rustdoc/index.html" class="bare">https://doc.rust-lang.org/rustdoc/index.html</a> for documentation on rustdoc
flags.</p>
</div>
<div class="paragraph">
<p>This command requires that only one target is being compiled when additional
arguments are provided. If more than one target is available for the current
package the filters of <code>--lib</code>, <code>--bin</code>, etc, must be used to select which
target is compiled.
To pass flags to all rustdoc processes spawned by Cargo, use the
<code>RUSTDOCFLAGS</code> <a href="commands/../reference/environment-variables.html">environment variable</a>
or the <code>build.rustdocflags</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_rustdoc_documentation_options">Documentation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--open</strong></dt>
<dd>
<p>Open the docs in a browser after building them. This will use your default
browser unless you define another one in the <code>BROWSER</code> environment
variable.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, the package in the current working directory is selected. The <code>-p</code>
flag can be used to choose a different package in a workspace.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em></dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em></dt>
<dd>
<p>The package to document. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for
the SPEC format.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo rustdoc</code> will document all
binary and library targets of the selected package. The binary will be skipped
if its name is the same as the lib target. Binaries are skipped if they have
<code>required-features</code> that are missing.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will document only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Document the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Document the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Document all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Document the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Document all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Document the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Document all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Document the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Document all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Document all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Document for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Document optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-rustdoc.html#cargo_rustdoc_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_rustdoc_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build documentation with custom CSS included from a given file:</p>
<div class="literalblock">
<div class="content">
<pre>cargo rustdoc --lib -- --extend-css extra.css</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_rustdoc_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-doc.html">cargo-doc(1)</a>, <a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-test" id="cargo-test">cargo test</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_test_name">NAME</h2>
<div class="sectionbody">
<p>cargo-test - Execute unit and integration tests of a package</p>
</div>
<div class="sect1">
<h2 id="cargo_test_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo test [<em>OPTIONS</em>] [TESTNAME] [-- <em>TEST-OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Compile and execute unit and integration tests.</p>
</div>
<div class="paragraph">
<p>The test filtering argument <code>TESTNAME</code> and all the arguments following the two
dashes (<code>--</code>) are passed to the test binaries and thus to <em>libtest</em> (rustc&#8217;s
built in unit-test and micro-benchmarking framework).  If you&#8217;re passing
arguments to both Cargo and the binary, the ones after <code>--</code> go to the binary,
the ones before go to Cargo.  For details about libtest&#8217;s arguments see the
output of <code>cargo test -- --help</code>.  As an example, this will run all tests with
<code>foo</code> in their name on 3 threads in parallel:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo test foo -- --test-threads 3</pre>
</div>
</div>
<div class="paragraph">
<p>Tests are built with the <code>--test</code> option to <code>rustc</code> which creates an
executable with a <code>main</code> function that automatically runs all functions
annotated with the <code>#[test]</code> attribute in multiple threads. <code>#[bench]</code>
annotated functions will also be run with one iteration to verify that they
are functional.</p>
</div>
<div class="paragraph">
<p>The libtest harness may be disabled by setting <code>harness = false</code> in the target
manifest settings, in which case your code will need to provide its own <code>main</code>
function to handle running tests.</p>
</div>
<div class="paragraph">
<p>Documentation tests are also run by default, which is handled by <code>rustdoc</code>. It
extracts code samples from documentation comments and executes them. See the
<a href="https://doc.rust-lang.org/rustdoc/">rustdoc book</a> for more information on
writing doc tests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_test_test_options">Test Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--no-run</strong></dt>
<dd>
<p>Compile, but don&#8217;t run tests.</p>
</dd>
<dt class="hdlist1"><strong>--no-fail-fast</strong></dt>
<dd>
<p>Run all tests regardless of failure. Without this flag, Cargo will exit
after the first executable fails. The Rust test harness will run all
tests within the executable to completion, this flag only applies to
the executable as a whole.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Test only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Test all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--all</strong></dt>
<dd>
<p>Deprecated alias for <code>--workspace</code>.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_target_selection">Target Selection</h3>
<div class="paragraph">
<p>When no target selection options are given, <code>cargo test</code> will build the
following targets of the selected packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>lib — used to link with binaries, examples, integration tests, and doc tests</p>
</li>
<li>
<p>bins (only if integration tests are built and required features are
available)</p>
</li>
<li>
<p>examples — to ensure they compile</p>
</li>
<li>
<p>lib as a unit test</p>
</li>
<li>
<p>bins as unit tests</p>
</li>
<li>
<p>integration tests</p>
</li>
<li>
<p>doc tests for the lib target</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The default behavior can be changed by setting the <code>test</code> flag for the target
in the manifest settings. Setting examples to <code>test = true</code> will build and run
the example as a test. Setting targets to <code>test = false</code> will stop them from
being tested by default. Target selection options that take a target by name
ignore the <code>test</code> flag and will always test the given target.</p>
</div>
<div class="paragraph">
<p>Doc tests for libraries may be disabled by setting <code>doctest = false</code> for the
library in the manifest.</p>
</div>
<div class="paragraph">
<p>Binary targets are automatically built if there is an integration test or
benchmark. This allows an integration test to execute the binary to exercise
and test its behavior. The <code>CARGO_BIN_EXE_&lt;name&gt;</code>
<a href="commands/../reference/environment-variables.html#environment-variables-cargo-sets-for-crates">environment variable</a>
is set when the integration test is built so that it can use the
<a href="https://doc.rust-lang.org/std/macro.env.html"><code>env</code> macro</a> to locate the
executable.</p>
</div>
<div class="paragraph">
<p>Passing target selection flags will test only the
specified targets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Test the package&#8217;s library.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Test the specified binary. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Test all binary targets.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Test the specified example. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Test all example targets.</p>
</dd>
<dt class="hdlist1"><strong>--test</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Test the specified integration test. This flag may be specified multiple
times.</p>
</dd>
<dt class="hdlist1"><strong>--tests</strong></dt>
<dd>
<p>Test all targets in test mode that have the <code>test = true</code> manifest
flag set. By default this includes the library and binaries built as
unittests, and integration tests. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
unittest, and once as a dependency for binaries, integration tests, etc.).
Targets may be enabled or disabled by setting the <code>test</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--bench</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Test the specified benchmark. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--benches</strong></dt>
<dd>
<p>Test all targets in benchmark mode that have the <code>bench = true</code>
manifest flag set. By default this includes the library and binaries built
as benchmarks, and bench targets. Be aware that this will also build any
required dependencies, so the lib target may be built twice (once as a
benchmark, and once as a dependency for binaries, benchmarks, etc.).
Targets may be enabled or disabled by setting the <code>bench</code> flag in the
manifest settings for the target.</p>
</dd>
<dt class="hdlist1"><strong>--all-targets</strong></dt>
<dd>
<p>Test all targets. This is equivalent to specifying <code>--lib --bins
--tests --benches --examples</code>.</p>
</dd>
<dt class="hdlist1"><strong>--doc</strong></dt>
<dd>
<p>Test only the library&#8217;s documentation. This cannot be mixed with other
target options.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Test for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--release</strong></dt>
<dd>
<p>Test optimized artifacts with the <code>release</code> profile. See the
<a href="commands/cargo-test.html#cargo_test_profiles">PROFILES</a> section for details on how this affects profile selection.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_display_options">Display Options</h3>
<div class="paragraph">
<p>By default the Rust test harness hides output from test execution to keep
results readable. Test output can be recovered (e.g., for debugging) by passing
<code>--nocapture</code> to the test binaries:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo test -- --nocapture</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--message-format</strong> <em>FMT</em></dt>
<dd>
<p>The output format for diagnostic messages. Can be specified multiple times
and consists of comma-separated values. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>human</code> (default): Display in a human-readable text format.</p>
</li>
<li>
<p><code>short</code>: Emit shorter, human-readable text messages.</p>
</li>
<li>
<p><code>json</code>: Emit JSON messages to stdout. See
<a href="commands/../reference/external-tools.html#json-messages">the reference</a>
for more details.</p>
</li>
<li>
<p><code>json-diagnostic-short</code>: Ensure the <code>rendered</code> field of JSON messages contains
the "short" rendering from rustc.</p>
</li>
<li>
<p><code>json-diagnostic-rendered-ansi</code>: Ensure the <code>rendered</code> field of JSON messages
contains embedded ANSI color codes for respecting rustc&#8217;s default color
scheme.</p>
</li>
<li>
<p><code>json-render-diagnostics</code>: Instruct Cargo to not include rustc diagnostics in
in JSON messages printed, but instead Cargo itself should render the
JSON diagnostics coming from rustc. Cargo&#8217;s own JSON diagnostics and others
coming from rustc are still emitted.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_test_miscellaneous_options">Miscellaneous Options</h3>
<div class="paragraph">
<p>The <code>--jobs</code> argument affects the building of the test executable but does not
affect how many threads are used when running the tests. The Rust test harness
includes an option to control the number of threads used:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>cargo test -j 2 -- --test-threads=2</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_profiles">PROFILES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Profiles may be used to configure compiler options such as optimization levels
and debug settings. See
<a href="commands/../reference/profiles.html">the reference</a>
for more details.</p>
</div>
<div class="paragraph">
<p>Profile selection depends on the target and crate being built. By default the
<code>dev</code> or <code>test</code> profiles are used. If the <code>--release</code> flag is given, then the
<code>release</code> or <code>bench</code> profiles are used.</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Default Profile</th>
<th class="tableblock halign-left valign-top"><code>--release</code> Profile</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib, bin, example</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test, bench, or any target<br>
 in "test" or "bench" mode</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>test</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bench</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dependencies use the <code>dev</code>/<code>release</code> profiles.</p>
</div>
<div class="paragraph">
<p>Unit tests are separate executable artifacts which use the <code>test</code>/<code>bench</code>
profiles. Example targets are built the same as with <code>cargo build</code> (using the
<code>dev</code>/<code>release</code> profiles) unless you are building them with the test harness
(by setting <code>test = true</code> in the manifest or using the <code>--example</code> flag) in
which case they use the <code>test</code>/<code>bench</code> profiles. Library targets are built
with the <code>dev</code>/<code>release</code> profiles when linked to an integration test, binary,
or doctest.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Execute all the unit and integration tests of the current package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo test</pre>
</div>
</div>
</li>
<li>
<p>Run only a specific test within a specific integration test:</p>
<div class="literalblock">
<div class="content">
<pre>cargo test --test int_test_name -- modname::test_name</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_test_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-bench.html">cargo-bench(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#manifest-commands" id="manifest-commands">Manifest Commands</a></h1>
<ul>
<li><a href="commands/cargo-generate-lockfile.html">cargo generate-lockfile</a></li>
<li><a href="commands/cargo-locate-project.html">cargo locate-project</a></li>
<li><a href="commands/cargo-metadata.html">cargo metadata</a></li>
<li><a href="commands/cargo-pkgid.html">cargo pkgid</a></li>
<li><a href="commands/cargo-tree.html">cargo tree</a></li>
<li><a href="commands/cargo-update.html">cargo update</a></li>
<li><a href="commands/cargo-vendor.html">cargo vendor</a></li>
<li><a href="commands/cargo-verify-project.html">cargo verify-project</a></li>
</ul>
<h1><a class="header" href="#cargo-generate-lockfile" id="cargo-generate-lockfile">cargo generate-lockfile</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_generate_lockfile_name">NAME</h2>
<div class="sectionbody">
<p>cargo-generate-lockfile - Generate the lockfile for a package</p>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo generate-lockfile [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will create the <code>Cargo.lock</code> lockfile for the current package or
workspace. If the lockfile already exists, it will be rebuilt if there are any
manifest changes or dependency updates.</p>
</div>
<div class="paragraph">
<p>See also <a href="commands/cargo-update.html">cargo-update(1)</a> which is also capable of creating a <code>Cargo.lock</code>
lockfile and has more options for controlling update behavior.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_generate_lockfile_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_generate_lockfile_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_generate_lockfile_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create or update the lockfile for the current package or workspace:</p>
<div class="literalblock">
<div class="content">
<pre>cargo generate-lockfile</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_generate_lockfile_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-update.html">cargo-update(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-locate-project" id="cargo-locate-project">cargo locate-project</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_locate_project_name">NAME</h2>
<div class="sectionbody">
<p>cargo-locate-project - Print a JSON representation of a Cargo.toml file's location</p>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo locate-project [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will print a JSON object to stdout with the full path to the
<code>Cargo.toml</code> manifest.</p>
</div>
<div class="paragraph">
<p>See also <a href="commands/cargo-metadata.html">cargo-metadata(1)</a> which is capable of returning the path to a
workspace root.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_locate_project_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_locate_project_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_locate_project_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Display the path to the manifest based on the current directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo locate-project</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_locate_project_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-metadata.html">cargo-metadata(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-metadata" id="cargo-metadata">cargo metadata</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_metadata_name">NAME</h2>
<div class="sectionbody">
<p>cargo-metadata - Machine-readable metadata about the current package</p>
</div>
<div class="sect1">
<h2 id="cargo_metadata_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo metadata [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Output JSON to stdout containing information about the workspace members and
resolved dependencies of the current package.</p>
</div>
<div class="paragraph">
<p>It is recommended to include the <code>--format-version</code> flag to future-proof
your code to ensure the output is in the format you are expecting.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://crates.io/crates/cargo_metadata">cargo_metadata crate</a>
for a Rust API for reading the metadata.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_output_format">OUTPUT FORMAT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The output has the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="javascript" class="language-javascript hljs">{
    /* Array of all packages in the workspace.
       It also includes all feature-enabled dependencies unless --no-deps is used.
    */
    "packages": [
        {
            /* The name of the package. */
            "name": "my-package",
            /* The version of the package. */
            "version": "0.1.0",
            /* The Package ID, a unique identifier for referring to the package. */
            "id": "my-package 0.1.0 (path+file:///path/to/my-package)",
            /* The license value from the manifest, or null. */
            "license": "MIT/Apache-2.0",
            /* The license-file value from the manifest, or null. */
            "license_file": "LICENSE",
            /* The description value from the manifest, or null. */
            "description": "Package description.",
            /* The source ID of the package. This represents where
               a package is retrieved from.
               This is null for path dependencies and workspace members.
               For other dependencies, it is a string with the format:
               - "registry+URL" for registry-based dependencies.
                 Example: "registry+https://github.com/rust-lang/crates.io-index"
               - "git+URL" for git-based dependencies.
                 Example: "git+https://github.com/rust-lang/cargo?rev=5e85ba14aaa20f8133863373404cb0af69eeef2c#5e85ba14aaa20f8133863373404cb0af69eeef2c"
            */
            "source": null,
            /* Array of dependencies declared in the package's manifest. */
            "dependencies": [
                {
                    /* The name of the dependency. */
                    "name": "bitflags",
                    /* The source ID of the dependency. May be null, see
                       description for the package source.
                    */
                    "source": "registry+https://github.com/rust-lang/crates.io-index",
                    /* The version requirement for the dependency.
                       Dependencies without a version requirement have a value of "*".
                    */
                    "req": "^1.0",
                    /* The dependency kind.
                       "dev", "build", or null for a normal dependency.
                    */
                    "kind": null,
                    /* If the dependency is renamed, this is the new name for
                       the dependency as a string.  null if it is not renamed.
                    */
                    "rename": null,
                    /* Boolean of whether or not this is an optional dependency. */
                    "optional": false,
                    /* Boolean of whether or not default features are enabled. */
                    "uses_default_features": true,
                    /* Array of features enabled. */
                    "features": [],
                    /* The target platform for the dependency.
                       null if not a target dependency.
                    */
                    "target": "cfg(windows)",
                    /* A string of the URL of the registry this dependency is from.
                       If not specified or null, the dependency is from the default
                       registry (crates.io).
                    */
                    "registry": null
                }
            ],
            /* Array of Cargo targets. */
            "targets": [
                {
                    /* Array of target kinds.
                       - lib targets list the `crate-type` values from the
                         manifest such as "lib", "rlib", "dylib",
                         "proc-macro", etc. (default ["lib"])
                       - binary is ["bin"]
                       - example is ["example"]
                       - integration test is ["test"]
                       - benchmark is ["bench"]
                       - build script is ["custom-build"]
                    */
                    "kind": [
                        "bin"
                    ],
                    /* Array of crate types.
                       - lib and example libraries list the `crate-type` values
                         from the manifest such as "lib", "rlib", "dylib",
                         "proc-macro", etc. (default ["lib"])
                       - all other target kinds are ["bin"]
                    */
                    "crate_types": [
                        "bin"
                    ],
                    /* The name of the target. */
                    "name": "my-package",
                    /* Absolute path to the root source file of the target. */
                    "src_path": "/path/to/my-package/src/main.rs",
                    /* The Rust edition of the target.
                       Defaults to the package edition.
                    */
                    "edition": "2018",
                    /* Array of required features.
                       This property is not included if no required features are set.
                    */
                    "required-features": ["feat1"],
                    /* Whether or not this target has doc tests enabled, and
                       the target is compatible with doc testing.
                    */
                    "doctest": false
                }
            ],
            /* Set of features defined for the package.
               Each feature maps to an array of features or dependencies it
               enables.
            */
            "features": {
                "default": [
                    "feat1"
                ],
                "feat1": [],
                "feat2": []
            },
            /* Absolute path to this package's manifest. */
            "manifest_path": "/path/to/my-package/Cargo.toml",
            /* Package metadata.
               This is null if no metadata is specified.
            */
            "metadata": {
                "docs": {
                    "rs": {
                        "all-features": true
                    }
                }
            },
            /* List of registries to which this package may be published.
               Publishing is unrestricted if null, and forbidden if an empty array. */
            "publish": [
                "crates-io"
            ],
            /* Array of authors from the manifest.
               Empty array if no authors specified.
            */
            "authors": [
                "Jane Doe &lt;user@example.com&gt;"
            ],
            /* Array of categories from the manifest. */
            "categories": [
                "command-line-utilities"
            ],
            /* Array of keywords from the manifest. */
            "keywords": [
                "cli"
            ],
            /* The readme value from the manifest or null if not specified. */
            "readme": "README.md",
            /* The repository value from the manifest or null if not specified. */
            "repository": "https://github.com/rust-lang/cargo",
            /* The default edition of the package.
               Note that individual targets may have different editions.
            */
            "edition": "2018",
            /* Optional string that is the name of a native library the package
               is linking to.
            */
            "links": null,
        }
    ],
    /* Array of members of the workspace.
       Each entry is the Package ID for the package.
    */
    "workspace_members": [
        "my-package 0.1.0 (path+file:///path/to/my-package)",
    ],
    // The resolved dependency graph for the entire workspace. The enabled
    // features are based on the enabled features for the "current" package.
    // Inactivated optional dependencies are not listed.
    //
    // This is null if --no-deps is specified.
    //
    // By default, this includes all dependencies for all target platforms.
    // The `--filter-platform` flag may be used to narrow to a specific
    // target triple.
    "resolve": {
        /* Array of nodes within the dependency graph.
           Each node is a package.
        */
        "nodes": [
            {
                /* The Package ID of this node. */
                "id": "my-package 0.1.0 (path+file:///path/to/my-package)",
                /* The dependencies of this package, an array of Package IDs. */
                "dependencies": [
                    "bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)"
                ],
                /* The dependencies of this package. This is an alternative to
                   "dependencies" which contains additional information. In
                   particular, this handles renamed dependencies.
                */
                "deps": [
                    {
                        /* The name of the dependency's library target.
                           If this is a renamed dependency, this is the new
                           name.
                        */
                        "name": "bitflags",
                        /* The Package ID of the dependency. */
                        "pkg": "bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)",
                        /* Array of dependency kinds. Added in Cargo 1.40. */
                        "dep_kinds": [
                            {
                                /* The dependency kind.
                                   "dev", "build", or null for a normal dependency.
                                */
                                "kind": null,
                                /* The target platform for the dependency.
                                   null if not a target dependency.
                                */
                                "target": "cfg(windows)"
                            }
                        ]
                    }
                ],
                /* Array of features enabled on this package. */
                "features": [
                    "default"
                ]
            }
        ],
        /* The root package of the workspace.
           This is null if this is a virtual workspace. Otherwise it is
           the Package ID of the root package.
        */
        "root": "my-package 0.1.0 (path+file:///path/to/my-package)"
    },
    /* The absolute path to the build directory where Cargo places its output. */
    "target_directory": "/path/to/my-package/target",
    /* The version of the schema for this metadata structure.
       This will be changed if incompatible changes are ever made.
    */
    "version": 1,
    /* The absolute path to the root of the workspace. */
    "workspace_root": "/path/to/my-package"
    /* Workspace metadata.
       This is null if no metadata is specified. */
    "metadata": {
        "docs": {
            "rs": {
                "all-features": true
            }
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_metadata_output_options">Output Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--no-deps</strong></dt>
<dd>
<p>Output information only about the workspace members and don&#8217;t fetch
dependencies.</p>
</dd>
<dt class="hdlist1"><strong>--format-version</strong> <em>VERSION</em></dt>
<dd>
<p>Specify the version of the output format to use. Currently <code>1</code> is the only
possible value.</p>
</dd>
<dt class="hdlist1"><strong>--filter-platform</strong> <em>TRIPLE</em></dt>
<dd>
<p>This filters the <code>resolve</code> output to only include dependencies for the
given target triple. Without this flag, the resolve includes all targets.</p>
<div class="paragraph">
<p>Note that the dependencies listed in the "packages" array still includes all
dependencies. Each package definition is intended to be an unaltered
reproduction of the information within <code>Cargo.toml</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_metadata_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_metadata_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_metadata_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_metadata_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Output JSON about the current package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo metadata --format-version=1</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_metadata_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-pkgid" id="cargo-pkgid">cargo pkgid</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_pkgid_name">NAME</h2>
<div class="sectionbody">
<p>cargo-pkgid - Print a fully qualified package specification</p>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo pkgid [<em>OPTIONS</em>] [<em>SPEC</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Given a <em>SPEC</em> argument, print out the fully qualified package ID specifier
for a package or dependency in the current workspace. This command will
generate an error if <em>SPEC</em> is ambiguous as to which package it refers to in
the dependency graph. If no <em>SPEC</em> is given, then the specifier for the local
package is printed.</p>
</div>
<div class="paragraph">
<p>This command requires that a lockfile is available and dependencies have been
fetched.</p>
</div>
<div class="paragraph">
<p>A package specifier consists of a name, version, and source URL. You are
allowed to use partial specifiers to succinctly match a specific package as
long as it matches only one package. The format of a <em>SPEC</em> can be one of the
following:</p>
</div>
<table class="tableblock frame-all grid-all fit-content">
<caption class="title">Table 1. SPEC Query Format</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SPEC Structure</th>
<th class="tableblock halign-left valign-top">Example SPEC</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>NAME</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bitflags</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>NAME</em><code>:</code><em>VERSION</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bitflags:1.0.4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>URL</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/rust-lang/cargo" class="bare">https://github.com/rust-lang/cargo</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>URL</em><code>#</code><em>VERSION</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/rust-lang/cargo#0.33.0" class="bare">https://github.com/rust-lang/cargo#0.33.0</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>URL</em><code>#</code><em>NAME</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/rust-lang/crates.io-index#bitflags" class="bare">https://github.com/rust-lang/crates.io-index#bitflags</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>URL</em><code>#</code><em>NAME</em><code>:</code><em>VERSION</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/rust-lang/cargo#crates-io:0.21.0" class="bare">https://github.com/rust-lang/cargo#crates-io:0.21.0</a></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_pkgid_package_selection">Package Selection</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em></dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em></dt>
<dd>
<p>Get the package ID for the given package instead of the current package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_pkgid_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_pkgid_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_pkgid_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Retrieve package specification for <code>foo</code> package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo pkgid foo</pre>
</div>
</div>
</li>
<li>
<p>Retrieve package specification for version 1.0.0 of <code>foo</code>:</p>
<div class="literalblock">
<div class="content">
<pre>cargo pkgid foo:1.0.0</pre>
</div>
</div>
</li>
<li>
<p>Retrieve package specification for <code>foo</code> from crates.io:</p>
<div class="literalblock">
<div class="content">
<pre>cargo pkgid https://github.com/rust-lang/crates.io-index#foo</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_pkgid_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-generate-lockfile.html">cargo-generate-lockfile(1)</a>, <a href="commands/cargo-metadata.html">cargo-metadata(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-tree" id="cargo-tree">cargo tree</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_tree_name">NAME</h2>
<div class="sectionbody">
<p>cargo-tree - Display a tree visualization of a dependency graph</p>
</div>
<div class="sect1">
<h2 id="cargo_tree_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo tree [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will display a tree of dependencies to the terminal. An example
of a simple project that depends on the "rand" package:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>myproject v0.1.0 (/myproject)
└── rand v0.7.3
    ├── getrandom v0.1.14
    │   ├── cfg-if v0.1.10
    │   └── libc v0.2.68
    ├── libc v0.2.68 (*)
    ├── rand_chacha v0.2.2
    │   ├── ppv-lite86 v0.2.6
    │   └── rand_core v0.5.1
    │       └── getrandom v0.1.14 (*)
    └── rand_core v0.5.1 (*)
[build-dependencies]
└── cc v1.0.50</pre>
</div>
</div>
<div class="paragraph">
<p>Packages marked with <code>(*)</code> have been "de-duplicated". The dependencies for the
package have already been shown elswhere in the graph, and so are not
repeated. Use the <code>--no-dedupe</code> option to repeat the duplicates.</p>
</div>
<div class="paragraph">
<p>The <code>-e</code> flag can be used to select the dependency kinds to display. The
"features" kind changes the output to display the features enabled by
each dependency. For example, <code>cargo tree -e features</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>myproject v0.1.0 (/myproject)
└── log feature "serde"
    └── log v0.4.8
        ├── serde v1.0.106
        └── cfg-if feature "default"
            └── cfg-if v0.1.10</pre>
</div>
</div>
<div class="paragraph">
<p>In this tree, <code>myproject</code> depends on <code>log</code> with the <code>serde</code> feature. <code>log</code> in
turn depends on <code>cfg-if</code> with "default" features. When using <code>-e features</code> it
can be helpful to use <code>-i</code> flag to show how the features flow into a package.
See the examples below for more detail.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_tree_tree_options">Tree Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-i</strong> <em>SPEC</em></dt>
<dt class="hdlist1"><strong>--invert</strong> <em>SPEC</em></dt>
<dd>
<p>Show the reverse dependencies for the given package. This flag will invert
the tree and display the packages that depend on the given package.</p>
<div class="paragraph">
<p>Note that in a workspace, by default it will only display the package&#8217;s
reverse dependencies inside the tree of the workspace member in the current
directory. The <code>--workspace</code> flag can be used to extend it so that it will
show the package&#8217;s reverse dependencies across the entire workspace. The <code>-p</code>
flag can be used to display the package&#8217;s reverse dependencies only with the
subtree of the package given to <code>-p</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--no-dedupe</strong></dt>
<dd>
<p>Do not de-duplicate repeated dependencies. Usually, when a package has
already displayed its dependencies, further occurrences will not
re-display its dependencies, and will include a <code>(*)</code> to indicate it has
already been shown. This flag will cause those duplicates to be repeated.</p>
</dd>
<dt class="hdlist1"><strong>-d</strong></dt>
<dt class="hdlist1"><strong>--duplicates</strong></dt>
<dd>
<p>Show only dependencies which come in multiple versions (implies
<code>--invert</code>). When used with the <code>-p</code> flag, only shows duplicates within
the subtree of the given package.</p>
<div class="paragraph">
<p>It can be beneficial for build times and executable sizes to avoid building
that same package multiple times. This flag can help identify the offending
packages. You can then investigate if the package that depends on the
duplicate with the older version can be updated to the newer version so that
only one instance is built.</p>
</div>
</dd>
<dt class="hdlist1"><strong>-e</strong> <em>KINDS</em></dt>
<dt class="hdlist1"><strong>--edges</strong> <em>KINDS</em></dt>
<dd>
<p>The dependency kinds to display. Takes a comma separated list of values:</p>
<div class="ulist">
<ul>
<li>
<p><code>all</code> — Show all edge kinds.</p>
</li>
<li>
<p><code>normal</code> — Show normal dependencies.</p>
</li>
<li>
<p><code>build</code> — Show build dependencies.</p>
</li>
<li>
<p><code>dev</code> — Show development dependencies.</p>
</li>
<li>
<p><code>features</code> — Show features enabled by each dependency. If this is
the only kind given, then it will automatically include the other
dependency kinds.</p>
</li>
<li>
<p><code>no-normal</code> — Do not include normal dependencies.</p>
</li>
<li>
<p><code>no-build</code> — Do not include build dependencies.</p>
</li>
<li>
<p><code>no-dev</code> — Do not include development dependencies.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>no-</code> prefixed options cannot be mixed with the other dependency kinds.</p>
</div>
<div class="paragraph">
<p>The default is <code>normal,build,dev</code>.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Filter dependencies matching the given target-triple.
The default is the host platform. Use the value <code>all</code> to include <strong>all</strong>
targets.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_tree_formatting_options">Tree Formatting Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--charset</strong> <em>CHARSET</em></dt>
<dd>
<p>Chooses the character set to use for the tree. Valid values are "utf8" or
"ascii". Default is "utf8".</p>
</dd>
<dt class="hdlist1"><strong>-f</strong> <em>FORMAT</em></dt>
<dt class="hdlist1"><strong>--format</strong> <em>FORMAT</em></dt>
<dd>
<p>Set the format string for each package. The default is "{p}".</p>
<div class="paragraph">
<p>This is an arbitrary string which will be used to display each package. The following
strings will be replaced with the corresponding value:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{p}</code> — The package name.</p>
</li>
<li>
<p><code>{l}</code> — The package license.</p>
</li>
<li>
<p><code>{r}</code> — The package repository URL.</p>
</li>
<li>
<p><code>{f}</code> — Comma-separated list of package features that are enabled.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>--prefix</strong> <em>PREFIX</em></dt>
<dd>
<p>Sets how each line is displayed. The <em>PREFIX</em> value can be one of:</p>
<div class="ulist">
<ul>
<li>
<p><code>indent</code> (default) — Shows each line indented as a tree.</p>
</li>
<li>
<p><code>depth</code> — Show as a list, with the numeric depth printed before each entry.</p>
</li>
<li>
<p><code>none</code> — Show as a flat list.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_package_selection">Package Selection</h3>
<div class="paragraph">
<p>By default, when no package selection options are given, the packages selected
depend on the selected manifest file (based on the current working directory if
<code>--manifest-path</code> is not given). If the manifest is the root of a workspace then
the workspaces default members are selected, otherwise only the package defined
by the manifest will be selected.</p>
</div>
<div class="paragraph">
<p>The default members of a workspace can be set explicitly with the
<code>workspace.default-members</code> key in the root manifest. If this is not set, a
virtual workspace will include all workspace members (equivalent to passing
<code>--workspace</code>), and a non-virtual workspace will include only the root crate itself.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Display only the specified packages. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the
SPEC format. This flag may be specified multiple times.</p>
</dd>
<dt class="hdlist1"><strong>--workspace</strong></dt>
<dd>
<p>Display all members in the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--exclude</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Exclude the specified packages. Must be used in conjunction with the
<code>--workspace</code> flag. This flag may be specified multiple times.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_tree_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Display the tree for the package in the current directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo tree</pre>
</div>
</div>
</li>
<li>
<p>Display all the packages that depend on the <code>syn</code> package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo tree -i syn</pre>
</div>
</div>
</li>
<li>
<p>Show the features enabled on each package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo tree --format "{p} {f}"</pre>
</div>
</div>
</li>
<li>
<p>Show all packages that are built multiple times. This can happen if multiple
semver-incompatible versions appear in the tree (like 1.0.0 and 2.0.0).</p>
<div class="literalblock">
<div class="content">
<pre>cargo tree -d</pre>
</div>
</div>
</li>
<li>
<p>Explain why features are enabled for the <code>syn</code> package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo tree -e features -i syn</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-e features</code> flag is used to show features. The <code>-i</code> flag is used to
invert the graph so that it displays the packages that depend on <code>syn</code>. An
example of what this would display:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>syn v1.0.17
├── syn feature "clone-impls"
│   └── syn feature "default"
│       └── rustversion v1.0.2
│           └── rustversion feature "default"
│               └── myproject v0.1.0 (/myproject)
│                   └── myproject feature "default" (command-line)
├── syn feature "default" (*)
├── syn feature "derive"
│   └── syn feature "default" (*)
├── syn feature "full"
│   └── rustversion v1.0.2 (*)
├── syn feature "parsing"
│   └── syn feature "default" (*)
├── syn feature "printing"
│   └── syn feature "default" (*)
├── syn feature "proc-macro"
│   └── syn feature "default" (*)
└── syn feature "quote"
    ├── syn feature "printing" (*)
    └── syn feature "proc-macro" (*)</pre>
</div>
</div>
<div class="paragraph">
<p>To read this graph, you can follow the chain for each feature from the root to
see why it is included. For example, the "full" feature is added by the
<code>rustversion</code> crate which is included from <code>myproject</code> (with the default
features), and <code>myproject</code> is the package selected on the command-line. All
of the other <code>syn</code> features are added by the "default" feature ("quote" is
added by "printing" and "proc-macro", both of which are default features).</p>
</div>
<div class="paragraph">
<p>If you&#8217;re having difficulty cross-referencing the de-duplicated <code>(*)</code> entries,
try with the <code>--no-dedupe</code> flag to get the full output.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_tree_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-metadata.html">cargo-metadata(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-update" id="cargo-update">cargo update</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_update_name">NAME</h2>
<div class="sectionbody">
<p>cargo-update - Update dependencies as recorded in the local lock file</p>
</div>
<div class="sect1">
<h2 id="cargo_update_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo update [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will update dependencies in the <code>Cargo.lock</code> file to the latest
version. It requires that the <code>Cargo.lock</code> file already exists as generated
by commands such as <a href="commands/cargo-build.html">cargo-build(1)</a> or <a href="commands/cargo-generate-lockfile.html">cargo-generate-lockfile(1)</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_update_update_options">Update Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Update only the specified packages. This flag may be specified
multiple times. See <a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a> for the SPEC format.</p>
<div class="paragraph">
<p>If packages are specified with the <code>-p</code> flag, then a conservative update of
the lockfile will be performed. This means that only the dependency specified
by SPEC will be updated. Its transitive dependencies will be updated only if
SPEC cannot be updated without updating dependencies.  All other dependencies
will remain locked at their currently recorded versions.</p>
</div>
<div class="paragraph">
<p>If <code>-p</code> is not specified, all dependencies are updated.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--aggressive</strong></dt>
<dd>
<p>When used with <code>-p</code>, dependencies of <em>SPEC</em> are forced to update as well.
Cannot be used with <code>--precise</code>.</p>
</dd>
<dt class="hdlist1"><strong>--precise</strong> <em>PRECISE</em></dt>
<dd>
<p>When used with <code>-p</code>, allows you to specify a specific version number to
set the package to. If the package comes from a git repository, this can
be a git revision (such as a SHA hash or tag).</p>
</dd>
<dt class="hdlist1"><strong>--dry-run</strong></dt>
<dd>
<p>Displays what would be updated, but doesn&#8217;t actually write the lockfile.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_update_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_update_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_update_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update all dependencies in the lockfile:</p>
<div class="literalblock">
<div class="content">
<pre>cargo update</pre>
</div>
</div>
</li>
<li>
<p>Update only specific dependencies:</p>
<div class="literalblock">
<div class="content">
<pre>cargo update -p foo -p bar</pre>
</div>
</div>
</li>
<li>
<p>Set a specific dependency to a specific version:</p>
<div class="literalblock">
<div class="content">
<pre>cargo update -p foo --precise 1.2.3</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_update_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-generate-lockfile.html">cargo-generate-lockfile(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-vendor" id="cargo-vendor">cargo vendor</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_vendor_name">NAME</h2>
<div class="sectionbody">
<p>cargo-vendor - Vendor all dependencies locally</p>
</div>
<div class="sect1">
<h2 id="cargo_vendor_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo vendor [<em>OPTIONS</em>] [<em>PATH</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This cargo subcommand will vendor all crates.io and git dependencies for a
project into the specified directory at <code>&lt;path&gt;</code>. After this command completes
the vendor directory specified by <code>&lt;path&gt;</code> will contain all remote sources from
dependencies specified. Additional manifests beyond the default one can be
specified with the <code>-s</code> option.</p>
</div>
<div class="paragraph">
<p>The <code>cargo vendor</code> command will also print out the configuration necessary
to use the vendored sources, which you will need to add to <code>.cargo/config.toml</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_vendor_vendor_options">Vendor Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-s</strong> <em>MANIFEST</em></dt>
<dt class="hdlist1"><strong>--sync</strong> <em>MANIFEST</em></dt>
<dd>
<p>Specify extra <code>Cargo.toml</code> manifests to workspaces which should also be
vendored and synced to the output.</p>
</dd>
<dt class="hdlist1"><strong>--no-delete</strong></dt>
<dd>
<p>Don&#8217;t delete the "vendor" directory when vendoring, but rather keep all
existing contents of the vendor directory</p>
</dd>
<dt class="hdlist1"><strong>--respect-source-config</strong></dt>
<dd>
<p>Instead of ignoring <code>[source]</code> configuration by default in <code>.cargo/config.toml</code>
read it and use it when downloading crates from crates.io, for example</p>
</dd>
<dt class="hdlist1"><strong>--versioned-dirs</strong></dt>
<dd>
<p>Normally versions are only added to disambiguate multiple versions of the
same package. This option causes all directories in the "vendor" directory
to be versioned, which makes it easier to track the history of vendored
packages over time, and can help with the performance of re-vendoring when
only a subset of the packages have changed.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_vendor_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_vendor_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_vendor_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Vendor all dependencies into a local "vendor" folder</p>
<div class="literalblock">
<div class="content">
<pre>cargo vendor</pre>
</div>
</div>
</li>
<li>
<p>Vendor all dependencies into a local "third-party/vendor" folder</p>
<div class="literalblock">
<div class="content">
<pre>cargo vendor third-party/vendor</pre>
</div>
</div>
</li>
<li>
<p>Vendor the current workspace as well as another to "vendor"</p>
<div class="literalblock">
<div class="content">
<pre>cargo vendor -s ../path/to/Cargo.toml</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_vendor_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-verify-project" id="cargo-verify-project">cargo verify-project</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_verify_project_name">NAME</h2>
<div class="sectionbody">
<p>cargo-verify-project - Check correctness of crate manifest</p>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo verify-project [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will parse the local manifest and check its validity. It emits a
JSON object with the result. A successful validation will display:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{"success":"true"}</pre>
</div>
</div>
<div class="paragraph">
<p>An invalid workspace will display:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>{"invalid":"human-readable error message"}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_verify_project_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_verify_project_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_verify_project_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>The workspace is OK.</p>
</dd>
<dt class="hdlist1">1</dt>
<dd>
<p>The workspace is invalid.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check the current workspace for errors:</p>
<div class="literalblock">
<div class="content">
<pre>cargo verify-project</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_verify_project_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-package.html">cargo-package(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#package-commands" id="package-commands">Package Commands</a></h1>
<ul>
<li><a href="commands/cargo-init.html">cargo init</a></li>
<li><a href="commands/cargo-install.html">cargo install</a></li>
<li><a href="commands/cargo-new.html">cargo new</a></li>
<li><a href="commands/cargo-search.html">cargo search</a></li>
<li><a href="commands/cargo-uninstall.html">cargo uninstall</a></li>
</ul>
<h1><a class="header" href="#cargo-init" id="cargo-init">cargo init</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_init_name">NAME</h2>
<div class="sectionbody">
<p>cargo-init - Create a new Cargo package in an existing directory</p>
</div>
<div class="sect1">
<h2 id="cargo_init_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo init [<em>OPTIONS</em>] [<em>PATH</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will create a new Cargo manifest in the current directory. Give a
path as an argument to create in the given directory.</p>
</div>
<div class="paragraph">
<p>If there are typically-named Rust source files already in the directory, those
will be used. If not, then a sample <code>src/main.rs</code> file will be created, or
<code>src/lib.rs</code> if <code>--lib</code> is passed.</p>
</div>
<div class="paragraph">
<p>If the directory is not already in a VCS repository, then a new repository
is created (see <code>--vcs</code> below).</p>
</div>
<div class="paragraph">
<p>The "authors" field in the manifest is determined from the environment or
configuration settings. A name is required and is determined from (first match
wins):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cargo-new.name</code> Cargo config value</p>
</li>
<li>
<p><code>CARGO_NAME</code> environment variable</p>
</li>
<li>
<p><code>GIT_AUTHOR_NAME</code> environment variable</p>
</li>
<li>
<p><code>GIT_COMMITTER_NAME</code> environment variable</p>
</li>
<li>
<p><code>user.name</code> git configuration value</p>
</li>
<li>
<p><code>USER</code> environment variable</p>
</li>
<li>
<p><code>USERNAME</code> environment variable</p>
</li>
<li>
<p><code>NAME</code> environment variable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The email address is optional and is determined from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cargo-new.email</code> Cargo config value</p>
</li>
<li>
<p><code>CARGO_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>GIT_AUTHOR_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>GIT_COMMITTER_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>user.email</code> git configuration value</p>
</li>
<li>
<p><code>EMAIL</code> environment variable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="commands/../reference/config.html">the reference</a> for more information about
configuration files.</p>
</div>
<div class="paragraph">
<p>See <a href="commands/cargo-new.html">cargo-new(1)</a> for a similar command which will create a new package in
a new directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_init_init_options">Init Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--bin</strong></dt>
<dd>
<p>Create a package with a binary target (<code>src/main.rs</code>).
This is the default behavior.</p>
</dd>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Create a package with a library target (<code>src/lib.rs</code>).</p>
</dd>
<dt class="hdlist1"><strong>--edition</strong> <em>EDITION</em></dt>
<dd>
<p>Specify the Rust edition to use. Default is 2018.
Possible values: 2015, 2018</p>
</dd>
<dt class="hdlist1"><strong>--name</strong> <em>NAME</em></dt>
<dd>
<p>Set the package name. Defaults to the directory name.</p>
</dd>
<dt class="hdlist1"><strong>--vcs</strong> <em>VCS</em></dt>
<dd>
<p>Initialize a new VCS repository for the given version control system (git,
hg, pijul, or fossil) or do not initialize any version control at all
(none). If not specified, defaults to <code>git</code> or the configuration value
<code>cargo-new.vcs</code>, or <code>none</code> if already inside a VCS repository.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>This sets the <code>publish</code> field in <code>Cargo.toml</code> to the given registry name
which will restrict publishing only to that registry.</p>
<div class="paragraph">
<p>Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry defined by the <code>registry.default</code>
config key is used. If the default registry is not set and <code>--registry</code> is not
used, the <code>publish</code> field will not be set which means that publishing will not
be restricted.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_init_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_init_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a binary Cargo package in the current directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo init</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_init_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-new.html">cargo-new(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-install" id="cargo-install">cargo install</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_install_name">NAME</h2>
<div class="sectionbody">
<p>cargo-install - Build and install a Rust binary</p>
</div>
<div class="sect1">
<h2 id="cargo_install_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo install [<em>OPTIONS</em>] <em>CRATE</em>&#8230;&#8203;</code><br>
<code>cargo install [<em>OPTIONS</em>] --path <em>PATH</em></code><br>
<code>cargo install [<em>OPTIONS</em>] --git <em>URL</em> [<em>CRATE</em>&#8230;&#8203;]</code><br>
<code>cargo install [<em>OPTIONS</em>] --list</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command manages Cargo&#8217;s local set of installed binary crates. Only
packages which have executable <code>[[bin]]</code> or <code>[[example]]</code> targets can be
installed, and all executables are installed into the installation root&#8217;s
<code>bin</code> folder.</p>
</div>
<div class="paragraph">
<p>The installation root is determined, in order of precedence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--root</code> option</p>
</li>
<li>
<p><code>CARGO_INSTALL_ROOT</code> environment variable</p>
</li>
<li>
<p><code>install.root</code> Cargo <a href="commands/../reference/config.html">config value</a></p>
</li>
<li>
<p><code>CARGO_HOME</code> environment variable</p>
</li>
<li>
<p><code>$HOME/.cargo</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are multiple sources from which a crate can be installed. The default
location is crates.io but the <code>--git</code>, <code>--path</code>, and <code>--registry</code> flags can
change this source. If the source contains more than one package (such as
crates.io or a git repository with multiple crates) the <em>CRATE</em> argument is
required to indicate which crate should be installed.</p>
</div>
<div class="paragraph">
<p>Crates from crates.io can optionally specify the version they wish to install
via the <code>--version</code> flags, and similarly packages from git repositories can
optionally specify the branch, tag, or revision that should be installed. If a
crate has multiple binaries, the <code>--bin</code> argument can selectively install only
one of them, and if you&#8217;d rather install examples the <code>--example</code> argument can
be used as well.</p>
</div>
<div class="paragraph">
<p>If the package is already installed, Cargo will reinstall it if the installed
version does not appear to be up-to-date. If any of the following values
change, then Cargo will reinstall the package:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The package version and source.</p>
</li>
<li>
<p>The set of binary names installed.</p>
</li>
<li>
<p>The chosen features.</p>
</li>
<li>
<p>The release mode (<code>--debug</code>).</p>
</li>
<li>
<p>The target (<code>--target</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Installing with <code>--path</code> will always build and install, unless there are
conflicting binaries from another package. The <code>--force</code> flag may be used to
force Cargo to always reinstall the package.</p>
</div>
<div class="paragraph">
<p>If the source is crates.io or <code>--git</code> then by default the crate will be built
in a temporary target directory. To avoid this, the target directory can be
specified by setting the <code>CARGO_TARGET_DIR</code> environment variable to a relative
path. In particular, this can be useful for caching build artifacts on
continuous integration systems.</p>
</div>
<div class="paragraph">
<p>By default, the <code>Cargo.lock</code> file that is included with the package will be
ignored. This means that Cargo will recompute which versions of dependencies
to use, possibly using newer versions that have been released since the
package was published. The <code>--locked</code> flag can be used to force Cargo to use
the packaged <code>Cargo.lock</code> file if it is available. This may be useful for
ensuring reproducible builds, to use the exact same set of dependencies that
were available when the package was published. It may also be useful if a
newer version of a dependency is published that no longer builds on your
system, or has other problems. The downside to using <code>--locked</code> is that you
will not receive any fixes or updates to any dependency. Note that Cargo did
not start publishing <code>Cargo.lock</code> files until version 1.37, which means
packages published with prior versions will not have a <code>Cargo.lock</code> file
available.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_install_install_options">Install Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--vers</strong> <em>VERSION</em></dt>
<dt class="hdlist1"><strong>--version</strong> <em>VERSION</em></dt>
<dd>
<p>Specify a version to install. This may be a
<a href="commands/../reference/specifying-dependencies.html">version requirement</a>, like
<code>~1.2</code>, to have Cargo select the newest version from the given
requirement. If the version does not have a requirement operator (such as
<code>^</code> or <code>~</code>), then it must be in the form <em>MAJOR.MINOR.PATCH</em>, and will
install exactly that version; it is <strong>not</strong> treated as a caret requirement
like Cargo dependencies are.</p>
</dd>
<dt class="hdlist1"><strong>--git</strong> <em>URL</em></dt>
<dd>
<p>Git URL to install the specified crate from.</p>
</dd>
<dt class="hdlist1"><strong>--branch</strong> <em>BRANCH</em></dt>
<dd>
<p>Branch to use when installing from git.</p>
</dd>
<dt class="hdlist1"><strong>--tag</strong> <em>TAG</em></dt>
<dd>
<p>Tag to use when installing from git.</p>
</dd>
<dt class="hdlist1"><strong>--rev</strong> <em>SHA</em></dt>
<dd>
<p>Specific commit to use when installing from git.</p>
</dd>
<dt class="hdlist1"><strong>--path</strong> <em>PATH</em></dt>
<dd>
<p>Filesystem path to local crate to install.</p>
</dd>
<dt class="hdlist1"><strong>--list</strong></dt>
<dd>
<p>List all installed packages and their versions.</p>
</dd>
<dt class="hdlist1"><strong>-f</strong></dt>
<dt class="hdlist1"><strong>--force</strong></dt>
<dd>
<p>Force overwriting existing crates or binaries. This can be used if a
package has installed a binary with the same name as another package. This
is also useful if something has changed on the system that you want to
rebuild with, such as a newer version of <code>rustc</code>.</p>
</dd>
<dt class="hdlist1"><strong>--no-track</strong></dt>
<dd>
<p>By default, Cargo keeps track of the installed packages with a metadata
file stored in the installation root directory. This flag tells Cargo not
to use or create that file. With this flag, Cargo will refuse to overwrite
any existing files unless the <code>--force</code> flag is used. This also disables
Cargo&#8217;s ability to protect against multiple concurrent invocations of
Cargo installing at the same time.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Install only the specified binary.</p>
</dd>
<dt class="hdlist1"><strong>--bins</strong></dt>
<dd>
<p>Install all binaries.</p>
</dd>
<dt class="hdlist1"><strong>--example</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Install only the specified example.</p>
</dd>
<dt class="hdlist1"><strong>--examples</strong></dt>
<dd>
<p>Install all examples.</p>
</dd>
<dt class="hdlist1"><strong>--root</strong> <em>DIR</em></dt>
<dd>
<p>Directory to install packages into.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
<dt class="hdlist1"><strong>--index</strong> <em>INDEX</em></dt>
<dd>
<p>The URL of the registry index to use.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Install for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
<dt class="hdlist1"><strong>--debug</strong></dt>
<dd>
<p>Build with the <code>dev</code> profile instead the <code>release</code> profile.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_install_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install or upgrade a package from crates.io:</p>
<div class="literalblock">
<div class="content">
<pre>cargo install ripgrep</pre>
</div>
</div>
</li>
<li>
<p>Install or reinstall the package in the current directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo install --path .</pre>
</div>
</div>
</li>
<li>
<p>View the list of installed packages:</p>
<div class="literalblock">
<div class="content">
<pre>cargo install --list</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_install_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-uninstall.html">cargo-uninstall(1)</a>, <a href="commands/cargo-search.html">cargo-search(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-new-1" id="cargo-new-1">cargo new</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_new_name">NAME</h2>
<div class="sectionbody">
<p>cargo-new - Create a new Cargo package</p>
</div>
<div class="sect1">
<h2 id="cargo_new_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo new [<em>OPTIONS</em>] <em>PATH</em></code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will create a new Cargo package in the given directory. This
includes a simple template with a <code>Cargo.toml</code> manifest, sample source file,
and a VCS ignore file. If the directory is not already in a VCS repository,
then a new repository is created (see <code>--vcs</code> below).</p>
</div>
<div class="paragraph">
<p>The "authors" field in the manifest is determined from the environment or
configuration settings. A name is required and is determined from (first match
wins):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cargo-new.name</code> Cargo config value</p>
</li>
<li>
<p><code>CARGO_NAME</code> environment variable</p>
</li>
<li>
<p><code>GIT_AUTHOR_NAME</code> environment variable</p>
</li>
<li>
<p><code>GIT_COMMITTER_NAME</code> environment variable</p>
</li>
<li>
<p><code>user.name</code> git configuration value</p>
</li>
<li>
<p><code>USER</code> environment variable</p>
</li>
<li>
<p><code>USERNAME</code> environment variable</p>
</li>
<li>
<p><code>NAME</code> environment variable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The email address is optional and is determined from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cargo-new.email</code> Cargo config value</p>
</li>
<li>
<p><code>CARGO_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>GIT_AUTHOR_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>GIT_COMMITTER_EMAIL</code> environment variable</p>
</li>
<li>
<p><code>user.email</code> git configuration value</p>
</li>
<li>
<p><code>EMAIL</code> environment variable</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="commands/../reference/config.html">the reference</a> for more information about
configuration files.</p>
</div>
<div class="paragraph">
<p>See <a href="commands/cargo-init.html">cargo-init(1)</a> for a similar command which will create a new manifest
in an existing directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_new_new_options">New Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--bin</strong></dt>
<dd>
<p>Create a package with a binary target (<code>src/main.rs</code>).
This is the default behavior.</p>
</dd>
<dt class="hdlist1"><strong>--lib</strong></dt>
<dd>
<p>Create a package with a library target (<code>src/lib.rs</code>).</p>
</dd>
<dt class="hdlist1"><strong>--edition</strong> <em>EDITION</em></dt>
<dd>
<p>Specify the Rust edition to use. Default is 2018.
Possible values: 2015, 2018</p>
</dd>
<dt class="hdlist1"><strong>--name</strong> <em>NAME</em></dt>
<dd>
<p>Set the package name. Defaults to the directory name.</p>
</dd>
<dt class="hdlist1"><strong>--vcs</strong> <em>VCS</em></dt>
<dd>
<p>Initialize a new VCS repository for the given version control system (git,
hg, pijul, or fossil) or do not initialize any version control at all
(none). If not specified, defaults to <code>git</code> or the configuration value
<code>cargo-new.vcs</code>, or <code>none</code> if already inside a VCS repository.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>This sets the <code>publish</code> field in <code>Cargo.toml</code> to the given registry name
which will restrict publishing only to that registry.</p>
<div class="paragraph">
<p>Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry defined by the <code>registry.default</code>
config key is used. If the default registry is not set and <code>--registry</code> is not
used, the <code>publish</code> field will not be set which means that publishing will not
be restricted.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_new_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_new_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a binary Cargo package in the given directory:</p>
<div class="literalblock">
<div class="content">
<pre>cargo new foo</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_new_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-init.html">cargo-init(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-search" id="cargo-search">cargo search</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_search_name">NAME</h2>
<div class="sectionbody">
<p>cargo-search - Search packages in crates.io</p>
</div>
<div class="sect1">
<h2 id="cargo_search_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo search [<em>OPTIONS</em>] [<em>QUERY</em>&#8230;&#8203;]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This performs a textual search for crates on <a href="https://crates.io" class="bare">https://crates.io</a>. The matching
crates will be displayed along with their description in TOML format suitable
for copying into a <code>Cargo.toml</code> manifest.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_search_search_options">Search Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--limit</strong> <em>LIMIT</em></dt>
<dd>
<p>Limit the number of results (default: 10, max: 100).</p>
</dd>
<dt class="hdlist1"><strong>--index</strong> <em>INDEX</em></dt>
<dd>
<p>The URL of the registry index to use.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_search_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_search_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Search for a package from crates.io:</p>
<div class="literalblock">
<div class="content">
<pre>cargo search serde</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_search_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-install.html">cargo-install(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-uninstall" id="cargo-uninstall">cargo uninstall</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_uninstall_name">NAME</h2>
<div class="sectionbody">
<p>cargo-uninstall - Remove a Rust binary</p>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo uninstall [<em>OPTIONS</em>] [<em>SPEC</em>&#8230;&#8203;]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command removes a package installed with <a href="commands/cargo-install.html">cargo-install(1)</a>. The <em>SPEC</em>
argument is a package ID specification of the package to remove (see
<a href="commands/cargo-pkgid.html">cargo-pkgid(1)</a>).</p>
</div>
<div class="paragraph">
<p>By default all binaries are removed for a crate but the <code>--bin</code> and
<code>--example</code> flags can be used to only remove particular binaries.</p>
</div>
<div class="paragraph">
<p>The installation root is determined, in order of precedence:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--root</code> option</p>
</li>
<li>
<p><code>CARGO_INSTALL_ROOT</code> environment variable</p>
</li>
<li>
<p><code>install.root</code> Cargo <a href="commands/../reference/config.html">config value</a></p>
</li>
<li>
<p><code>CARGO_HOME</code> environment variable</p>
</li>
<li>
<p><code>$HOME/.cargo</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_uninstall_install_options">Install Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-p</strong></dt>
<dt class="hdlist1"><strong>--package</strong> <em>SPEC</em>&#8230;&#8203;</dt>
<dd>
<p>Package to uninstall.</p>
</dd>
<dt class="hdlist1"><strong>--bin</strong> <em>NAME</em>&#8230;&#8203;</dt>
<dd>
<p>Only uninstall the binary <em>NAME</em>.</p>
</dd>
<dt class="hdlist1"><strong>--root</strong> <em>DIR</em></dt>
<dd>
<p>Directory to uninstall packages from.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_uninstall_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_uninstall_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Uninstall a previously installed package.</p>
<div class="literalblock">
<div class="content">
<pre>cargo uninstall ripgrep</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_uninstall_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-install.html">cargo-install(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#publishing-commands" id="publishing-commands">Publishing Commands</a></h1>
<ul>
<li><a href="commands/cargo-login.html">cargo login</a></li>
<li><a href="commands/cargo-owner.html">cargo owner</a></li>
<li><a href="commands/cargo-package.html">cargo package</a></li>
<li><a href="commands/cargo-publish.html">cargo publish</a></li>
<li><a href="commands/cargo-yank.html">cargo yank</a></li>
</ul>
<h1><a class="header" href="#cargo-login" id="cargo-login">cargo login</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_login_name">NAME</h2>
<div class="sectionbody">
<p>cargo-login - Save an API token from the registry locally</p>
</div>
<div class="sect1">
<h2 id="cargo_login_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo login [<em>OPTIONS</em>] [<em>TOKEN</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will save the API token to disk so that commands that require
authentication, such as <a href="commands/cargo-publish.html">cargo-publish(1)</a>, will be automatically
authenticated. The token is saved in <code>$CARGO_HOME/credentials.toml</code>. <code>CARGO_HOME</code>
defaults to <code>.cargo</code> in your home directory.</p>
</div>
<div class="paragraph">
<p>If the <em>TOKEN</em> argument is not specified, it will be read from stdin.</p>
</div>
<div class="paragraph">
<p>The API token for crates.io may be retrieved from <a href="https://crates.io/me" class="bare">https://crates.io/me</a>.</p>
</div>
<div class="paragraph">
<p>Take care to keep the token secret, it should not be shared with anyone else.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_login_login_options">Login Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_login_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_login_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Save the API token to disk:</p>
<div class="literalblock">
<div class="content">
<pre>cargo login</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_login_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-owner-1" id="cargo-owner-1">cargo owner</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_owner_name">NAME</h2>
<div class="sectionbody">
<p>cargo-owner - Manage the owners of a crate on the registry</p>
</div>
<div class="sect1">
<h2 id="cargo_owner_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo owner [<em>OPTIONS</em>] --add <em>LOGIN</em> [<em>CRATE</em>]</code><br>
<code>cargo owner [<em>OPTIONS</em>] --remove <em>LOGIN</em> [<em>CRATE</em>]</code><br>
<code>cargo owner [<em>OPTIONS</em>] --list [<em>CRATE</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will modify the owners for a crate on the registry. Owners of a
crate can upload new versions and yank old versions. Non-team owners can also
modify the set of owners, so take care!</p>
</div>
<div class="paragraph">
<p>This command requires you to be authenticated with either the <code>--token</code> option
or using <a href="commands/cargo-login.html">cargo-login(1)</a>.</p>
</div>
<div class="paragraph">
<p>If the crate name is not specified, it will use the package name from the
current directory.</p>
</div>
<div class="paragraph">
<p>See <a href="commands/../reference/publishing.html#cargo-owner">the reference</a> for more
information about owners and publishing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_owner_owner_options">Owner Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-a</strong></dt>
<dt class="hdlist1"><strong>--add</strong> <em>LOGIN</em>&#8230;&#8203;</dt>
<dd>
<p>Invite the given user or team as an owner.</p>
</dd>
<dt class="hdlist1"><strong>-r</strong></dt>
<dt class="hdlist1"><strong>--remove</strong> <em>LOGIN</em>&#8230;&#8203;</dt>
<dd>
<p>Remove the given user or team as an owner.</p>
</dd>
<dt class="hdlist1"><strong>-l</strong></dt>
<dt class="hdlist1"><strong>--list</strong></dt>
<dd>
<p>List owners of a crate.</p>
</dd>
<dt class="hdlist1"><strong>--token</strong> <em>TOKEN</em></dt>
<dd>
<p>API token to use when authenticating. This overrides the token stored in
the credentials file (which is created by <a href="commands/cargo-login.html">cargo-login(1)</a>).</p>
<div class="paragraph">
<p><a href="commands/../reference/config.html">Cargo config</a> environment variables can be
used to override the tokens stored in the credentials file. The token for
crates.io may be specified with the <code>CARGO_REGISTRY_TOKEN</code> environment
variable. Tokens for other registries may be specified with environment
variables of the form <code>CARGO_REGISTRIES_NAME_TOKEN</code> where <code>NAME</code> is the name
of the registry in all capital letters.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--index</strong> <em>INDEX</em></dt>
<dd>
<p>The URL of the registry index to use.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_owner_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_owner_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>List owners of a package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo owner --list foo</pre>
</div>
</div>
</li>
<li>
<p>Invite an owner to a package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo owner --add username foo</pre>
</div>
</div>
</li>
<li>
<p>Remove an owner from a package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo owner --remove username foo</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_owner_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-login.html">cargo-login(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-package" id="cargo-package">cargo package</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_package_name">NAME</h2>
<div class="sectionbody">
<p>cargo-package - Assemble the local package into a distributable tarball</p>
</div>
<div class="sect1">
<h2 id="cargo_package_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo package [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will create a distributable, compressed <code>.crate</code> file with the
source code of the package in the current directory. The resulting file will
be stored in the <code>target/package</code> directory. This performs the following
steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Load and check the current workspace, performing some basic checks.</p>
<div class="ulist">
<ul>
<li>
<p>Path dependencies are not allowed unless they have a version key. Cargo
will ignore the path key for dependencies in published packages.
<code>dev-dependencies</code> do not have this restriction.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create the compressed <code>.crate</code> file.</p>
<div class="ulist">
<ul>
<li>
<p>The original <code>Cargo.toml</code> file is rewritten and normalized.</p>
</li>
<li>
<p><code>[patch]</code>, <code>[replace]</code>, and <code>[workspace]</code> sections are removed from the
manifest.</p>
</li>
<li>
<p><code>Cargo.lock</code> is automatically included if the package contains an
executable binary or example target. <a href="commands/cargo-install.html">cargo-install(1)</a> will use the
packaged lock file if the <code>--locked</code> flag is used.</p>
</li>
<li>
<p>A <code>.cargo_vcs_info.json</code> file is included that contains information
about the current VCS checkout hash if available (not included with
<code>--allow-dirty</code>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Extract the <code>.crate</code> file and build it to verify it can build.</p>
<div class="ulist">
<ul>
<li>
<p>This will rebuild your package from scratch to ensure that it can be
built from a pristine state. The <code>--no-verify</code> flag can be used to skip
this step.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Check that build scripts did not modify any source files.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The list of files included can be controlled with the <code>include</code> and <code>exclude</code>
fields in the manifest.</p>
</div>
<div class="paragraph">
<p>See <a href="commands/../reference/publishing.html">the reference</a> for more details about
packaging and publishing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_package_package_options">Package Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-l</strong></dt>
<dt class="hdlist1"><strong>--list</strong></dt>
<dd>
<p>Print files included in a package without making one.</p>
</dd>
<dt class="hdlist1"><strong>--no-verify</strong></dt>
<dd>
<p>Don&#8217;t verify the contents by building them.</p>
</dd>
<dt class="hdlist1"><strong>--no-metadata</strong></dt>
<dd>
<p>Ignore warnings about a lack of human-usable metadata (such as the
description or the license).</p>
</dd>
<dt class="hdlist1"><strong>--allow-dirty</strong></dt>
<dd>
<p>Allow working directories with uncommitted VCS changes to be packaged.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Package for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_package_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a compressed <code>.crate</code> file of the current package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo package</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_package_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-publish" id="cargo-publish">cargo publish</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_publish_name">NAME</h2>
<div class="sectionbody">
<p>cargo-publish - Upload a package to the registry</p>
</div>
<div class="sect1">
<h2 id="cargo_publish_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo publish [<em>OPTIONS</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This command will create a distributable, compressed <code>.crate</code> file with the
source code of the package in the current directory and upload it to a
registry. The default registry is <a href="https://crates.io" class="bare">https://crates.io</a>. This performs the
following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Performs a few checks, including:</p>
<div class="ulist">
<ul>
<li>
<p>Checks the <code>package.publish</code> key in the manifest for restrictions on which
registries you are allowed to publish to.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a <code>.crate</code> file by following the steps in <a href="commands/cargo-package.html">cargo-package(1)</a>.</p>
</li>
<li>
<p>Upload the crate to the registry. Note that the server will perform
additional checks on the crate.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This command requires you to be authenticated with either the <code>--token</code> option
or using <a href="commands/cargo-login.html">cargo-login(1)</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="commands/../reference/publishing.html">the reference</a> for more details about
packaging and publishing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_publish_publish_options">Publish Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--dry-run</strong></dt>
<dd>
<p>Perform all checks without uploading.</p>
</dd>
<dt class="hdlist1"><strong>--token</strong> <em>TOKEN</em></dt>
<dd>
<p>API token to use when authenticating. This overrides the token stored in
the credentials file (which is created by <a href="commands/cargo-login.html">cargo-login(1)</a>).</p>
<div class="paragraph">
<p><a href="commands/../reference/config.html">Cargo config</a> environment variables can be
used to override the tokens stored in the credentials file. The token for
crates.io may be specified with the <code>CARGO_REGISTRY_TOKEN</code> environment
variable. Tokens for other registries may be specified with environment
variables of the form <code>CARGO_REGISTRIES_NAME_TOKEN</code> where <code>NAME</code> is the name
of the registry in all capital letters.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--no-verify</strong></dt>
<dd>
<p>Don&#8217;t verify the contents by building them.</p>
</dd>
<dt class="hdlist1"><strong>--allow-dirty</strong></dt>
<dd>
<p>Allow working directories with uncommitted VCS changes to be packaged.</p>
</dd>
<dt class="hdlist1"><strong>--index</strong> <em>INDEX</em></dt>
<dd>
<p>The URL of the registry index to use.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_compilation_options">Compilation Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--target</strong> <em>TRIPLE</em></dt>
<dd>
<p>Publish for the given architecture. The default is the host
architecture. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>. Run <code>rustc --print target-list</code> for a
list of supported targets.</p>
<div class="paragraph">
<p>This may also be specified with the <code>build.target</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
<div class="paragraph">
<p>Note that specifying this flag makes Cargo run in a different mode where the
target artifacts are placed in a separate directory. See the
<a href="commands/../guide/build-cache.html">build cache</a> documentation for more details.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--target-dir</strong> <em>DIRECTORY</em></dt>
<dd>
<p>Directory for all generated artifacts and intermediate files. May also be
specified with the <code>CARGO_TARGET_DIR</code> environment variable, or the
<code>build.target-dir</code> <a href="commands/../reference/config.html">config value</a>. Defaults
to <code>target</code> in the root of the workspace.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_feature_selection">Feature Selection</h3>
<div class="paragraph">
<p>The feature flags allow you to control the enabled features for the "current"
package. The "current" package is the package in the current directory, or the
one specified in <code>--manifest-path</code>. If running in the root of a virtual
workspace, then the default features are selected for all workspace members,
or all features if <code>--all-features</code> is specified.</p>
</div>
<div class="paragraph">
<p>When no feature options are given, the <code>default</code> feature is activated for
every selected package.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--features</strong> <em>FEATURES</em></dt>
<dd>
<p>Space or comma separated list of features to activate. These features only
apply to the current directory&#8217;s package. Features of direct dependencies
may be enabled with <code>&lt;dep-name&gt;/&lt;feature-name&gt;</code> syntax. This flag may be
specified multiple times, which enables all specified features.</p>
</dd>
<dt class="hdlist1"><strong>--all-features</strong></dt>
<dd>
<p>Activate all available features of all selected packages.</p>
</dd>
<dt class="hdlist1"><strong>--no-default-features</strong></dt>
<dd>
<p>Do not activate the <code>default</code> feature of the current directory&#8217;s
package.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_manifest_options">Manifest Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--manifest-path</strong> <em>PATH</em></dt>
<dd>
<p>Path to the <code>Cargo.toml</code> file. By default, Cargo searches for the
<code>Cargo.toml</code> file in the current directory or any parent directory.</p>
</dd>
<dt class="hdlist1"><strong>--frozen</strong></dt>
<dt class="hdlist1"><strong>--locked</strong></dt>
<dd>
<p>Either of these flags requires that the <code>Cargo.lock</code> file is
up-to-date. If the lock file is missing, or it needs to be updated, Cargo will
exit with an error. The <code>--frozen</code> flag also prevents Cargo from
attempting to access the network to determine if it is out-of-date.</p>
<div class="paragraph">
<p>These may be used in environments where you want to assert that the
<code>Cargo.lock</code> file is up-to-date (such as a CI build) or want to avoid network
access.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--offline</strong></dt>
<dd>
<p>Prevents Cargo from accessing the network for any reason. Without this
flag, Cargo will stop with an error if it needs to access the network and
the network is not available. With this flag, Cargo will attempt to
proceed without the network if possible.</p>
<div class="paragraph">
<p>Beware that this may result in different dependency resolution than online
mode. Cargo will restrict itself to crates that are downloaded locally, even
if there might be a newer version as indicated in the local copy of the index.
See the <a href="commands/cargo-fetch.html">cargo-fetch(1)</a> command to download dependencies before going
offline.</p>
</div>
<div class="paragraph">
<p>May also be specified with the <code>net.offline</code> <a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_miscellaneous_options">Miscellaneous Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-j</strong> <em>N</em></dt>
<dt class="hdlist1"><strong>--jobs</strong> <em>N</em></dt>
<dd>
<p>Number of parallel jobs to run. May also be specified with the
<code>build.jobs</code> <a href="commands/../reference/config.html">config value</a>. Defaults to
the number of CPUs.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_publish_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Publish the current package:</p>
<div class="literalblock">
<div class="content">
<pre>cargo publish</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_publish_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-package.html">cargo-package(1)</a>, <a href="commands/cargo-login.html">cargo-login(1)</a></p>
</div>
</div>
</div>
<h1><a class="header" href="#cargo-yank-1" id="cargo-yank-1">cargo yank</a></h1>
<style>
    /* Include some space between definition elements. */
    dd {
        margin-bottom: 1em;
    }
    /* asciidoctor includes extra <p> tags which causes too much spacing. */
    dd p {
        margin-top: 0;
    }
    li p {
        margin: 0;
    }
    /* asciidoctor uses a content class which conflicts with mdbook's content
    class which causes too much spacing. */
    .content {
        padding-bottom: 0;
    }
</style>
<h2 id="cargo_yank_name">NAME</h2>
<div class="sectionbody">
<p>cargo-yank - Remove a pushed crate from the index</p>
</div>
<div class="sect1">
<h2 id="cargo_yank_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>cargo yank [<em>OPTIONS</em>] --vers <em>VERSION</em> [<em>CRATE</em>]</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The yank command removes a previously published crate&#8217;s version from the
server&#8217;s index. This command does not delete any data, and the crate will
still be available for download via the registry&#8217;s download link.</p>
</div>
<div class="paragraph">
<p>Note that existing crates locked to a yanked version will still be able to
download the yanked version to use it. Cargo will, however, not allow any new
crates to be locked to any yanked version.</p>
</div>
<div class="paragraph">
<p>This command requires you to be authenticated with either the <code>--token</code> option
or using <a href="commands/cargo-login.html">cargo-login(1)</a>.</p>
</div>
<div class="paragraph">
<p>If the crate name is not specified, it will use the package name from the
current directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_options">OPTIONS</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="cargo_yank_yank_options">Yank Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--vers</strong> <em>VERSION</em></dt>
<dd>
<p>The version to yank or un-yank.</p>
</dd>
<dt class="hdlist1"><strong>--undo</strong></dt>
<dd>
<p>Undo a yank, putting a version back into the index.</p>
</dd>
<dt class="hdlist1"><strong>--token</strong> <em>TOKEN</em></dt>
<dd>
<p>API token to use when authenticating. This overrides the token stored in
the credentials file (which is created by <a href="commands/cargo-login.html">cargo-login(1)</a>).</p>
<div class="paragraph">
<p><a href="commands/../reference/config.html">Cargo config</a> environment variables can be
used to override the tokens stored in the credentials file. The token for
crates.io may be specified with the <code>CARGO_REGISTRY_TOKEN</code> environment
variable. Tokens for other registries may be specified with environment
variables of the form <code>CARGO_REGISTRIES_NAME_TOKEN</code> where <code>NAME</code> is the name
of the registry in all capital letters.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--index</strong> <em>INDEX</em></dt>
<dd>
<p>The URL of the registry index to use.</p>
</dd>
<dt class="hdlist1"><strong>--registry</strong> <em>REGISTRY</em></dt>
<dd>
<p>Name of the registry to use. Registry names are defined in <a href="commands/../reference/config.html">Cargo config files</a>.
If not specified, the default registry is used, which is defined by the
<code>registry.default</code> config key which defaults to <code>crates-io</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_yank_display_options">Display Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>-v</strong></dt>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Use verbose output. May be specified twice for "very verbose" output which
includes extra output such as dependency warnings and build script output.
May also be specified with the <code>term.verbose</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</dd>
<dt class="hdlist1"><strong>-q</strong></dt>
<dt class="hdlist1"><strong>--quiet</strong></dt>
<dd>
<p>No output printed to stdout.</p>
</dd>
<dt class="hdlist1"><strong>--color</strong> <em>WHEN</em></dt>
<dd>
<p>Control when colored output is used. Valid values:</p>
<div class="ulist">
<ul>
<li>
<p><code>auto</code> (default): Automatically detect if color support is available on the
terminal.</p>
</li>
<li>
<p><code>always</code>: Always display colors.</p>
</li>
<li>
<p><code>never</code>: Never display colors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>May also be specified with the <code>term.color</code>
<a href="commands/../reference/config.html">config value</a>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="cargo_yank_common_options">Common Options</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>+TOOLCHAIN</strong></dt>
<dd>
<p>If Cargo has been installed with rustup, and the first argument to <code>cargo</code>
begins with <code>+</code>, it will be interpreted as a rustup toolchain name (such
as <code>+stable</code> or <code>+nightly</code>).
See the <a href="https://github.com/rust-lang/rustup/">rustup documentation</a>
for more information about how toolchain overrides work.</p>
</dd>
<dt class="hdlist1"><strong>-h</strong></dt>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Prints help information.</p>
</dd>
<dt class="hdlist1"><strong>-Z</strong> <em>FLAG</em>&#8230;&#8203;</dt>
<dd>
<p>Unstable (nightly-only) flags to Cargo. Run <code>cargo -Z help</code> for
details.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_environment">ENVIRONMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See <a href="commands/../reference/environment-variables.html">the reference</a> for
details on environment variables that Cargo reads.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_exit_status">Exit Status</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">0</dt>
<dd>
<p>Cargo succeeded.</p>
</dd>
<dt class="hdlist1">101</dt>
<dd>
<p>Cargo failed to complete.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Yank a crate from the index:</p>
<div class="literalblock">
<div class="content">
<pre>cargo yank --vers 1.0.7 foo</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cargo_yank_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="commands/index.html">cargo(1)</a>, <a href="commands/cargo-login.html">cargo-login(1)</a>, <a href="commands/cargo-publish.html">cargo-publish(1)</a></p>
</div>
</div>
</div>
<h2><a class="header" href="#frequently-asked-questions" id="frequently-asked-questions">Frequently Asked Questions</a></h2>
<h3><a class="header" href="#is-the-plan-to-use-github-as-a-package-repository" id="is-the-plan-to-use-github-as-a-package-repository">Is the plan to use GitHub as a package repository?</a></h3>
<p>No. The plan for Cargo is to use <a href="https://crates.io/">crates.io</a>, like npm or Rubygems do with
npmjs.org and rubygems.org.</p>
<p>We plan to support git repositories as a source of packages forever,
because they can be used for early development and temporary patches,
even when people use the registry as the primary source of packages.</p>
<h3><a class="header" href="#why-build-cratesio-rather-than-use-github-as-a-registry" id="why-build-cratesio-rather-than-use-github-as-a-registry">Why build crates.io rather than use GitHub as a registry?</a></h3>
<p>We think that it’s very important to support multiple ways to download
packages, including downloading from GitHub and copying packages into
your package itself.</p>
<p>That said, we think that <a href="https://crates.io/">crates.io</a> offers a number of important benefits, and
will likely become the primary way that people download packages in Cargo.</p>
<p>For precedent, both Node.js’s <a href="https://www.npmjs.org">npm</a> and Ruby’s <a href="https://bundler.io">bundler</a> support both a
central registry model as well as a Git-based model, and most packages
are downloaded through the registry in those ecosystems, with an
important minority of packages making use of git-based packages.</p>
<p>Some of the advantages that make a central registry popular in other
languages include:</p>
<ul>
<li><strong>Discoverability</strong>. A central registry provides an easy place to look
for existing packages. Combined with tagging, this also makes it
possible for a registry to provide ecosystem-wide information, such as a
list of the most popular or most-depended-on packages.</li>
<li><strong>Speed</strong>. A central registry makes it possible to easily fetch just
the metadata for packages quickly and efficiently, and then to
efficiently download just the published package, and not other bloat
that happens to exist in the repository. This adds up to a significant
improvement in the speed of dependency resolution and fetching. As
dependency graphs scale up, downloading all of the git repositories bogs
down fast. Also remember that not everybody has a high-speed,
low-latency Internet connection.</li>
</ul>
<h3><a class="header" href="#will-cargo-work-with-c-code-or-other-languages" id="will-cargo-work-with-c-code-or-other-languages">Will Cargo work with C code (or other languages)?</a></h3>
<p>Yes!</p>
<p>Cargo handles compiling Rust code, but we know that many Rust packages
link against C code. We also know that there are decades of tooling
built up around compiling languages other than Rust.</p>
<p>Our solution: Cargo allows a package to <a href="reference/build-scripts.html">specify a script</a>
(written in Rust) to run before invoking <code>rustc</code>. Rust is leveraged to
implement platform-specific configuration and refactor out common build
functionality among packages.</p>
<h3><a class="header" href="#can-cargo-be-used-inside-of-make-or-ninja-or-" id="can-cargo-be-used-inside-of-make-or-ninja-or-">Can Cargo be used inside of <code>make</code> (or <code>ninja</code>, or ...)</a></h3>
<p>Indeed. While we intend Cargo to be useful as a standalone way to
compile Rust packages at the top-level, we know that some people will
want to invoke Cargo from other build tools.</p>
<p>We have designed Cargo to work well in those contexts, paying attention
to things like error codes and machine-readable output modes. We still
have some work to do on those fronts, but using Cargo in the context of
conventional scripts is something we designed for from the beginning and
will continue to prioritize.</p>
<h3><a class="header" href="#does-cargo-handle-multi-platform-packages-or-cross-compilation" id="does-cargo-handle-multi-platform-packages-or-cross-compilation">Does Cargo handle multi-platform packages or cross-compilation?</a></h3>
<p>Rust itself provides facilities for configuring sections of code based
on the platform. Cargo also supports <a href="reference/specifying-dependencies.html#platform-specific-dependencies">platform-specific
dependencies</a>, and we plan to support more per-platform
configuration in <code>Cargo.toml</code> in the future.</p>
<p>In the longer-term, we’re looking at ways to conveniently cross-compile
packages using Cargo.</p>
<h3><a class="header" href="#does-cargo-support-environments-like-production-or-test" id="does-cargo-support-environments-like-production-or-test">Does Cargo support environments, like <code>production</code> or <code>test</code>?</a></h3>
<p>We support environments through the use of <a href="reference/profiles.html">profiles</a> to support:</p>
<ul>
<li>environment-specific flags (like <code>-g --opt-level=0</code> for development
and <code>--opt-level=3</code> for production).</li>
<li>environment-specific dependencies (like <code>hamcrest</code> for test assertions).</li>
<li>environment-specific <code>#[cfg]</code></li>
<li>a <code>cargo test</code> command</li>
</ul>
<h3><a class="header" href="#does-cargo-work-on-windows" id="does-cargo-work-on-windows">Does Cargo work on Windows?</a></h3>
<p>Yes!</p>
<p>All commits to Cargo are required to pass the local test suite on Windows.
If, however, you find a Windows issue, we consider it a bug, so <a href="https://github.com/rust-lang/cargo/issues">please file an
issue</a>.</p>
<h3><a class="header" href="#why-do-binaries-have-cargolock-in-version-control-but-not-libraries" id="why-do-binaries-have-cargolock-in-version-control-but-not-libraries">Why do binaries have <code>Cargo.lock</code> in version control, but not libraries?</a></h3>
<p>The purpose of a <code>Cargo.lock</code> is to describe the state of the world at the time
of a successful build. It is then used to provide deterministic builds across
whatever machine is building the package by ensuring that the exact same
dependencies are being compiled.</p>
<p>This property is most desirable from applications and packages which are at the
very end of the dependency chain (binaries). As a result, it is recommended that
all binaries check in their <code>Cargo.lock</code>.</p>
<p>For libraries the situation is somewhat different. A library is not only used by
the library developers, but also any downstream consumers of the library. Users
dependent on the library will not inspect the library’s <code>Cargo.lock</code> (even if it
exists). This is precisely because a library should <strong>not</strong> be deterministically
recompiled for all users of the library.</p>
<p>If a library ends up being used transitively by several dependencies, it’s
likely that just a single copy of the library is desired (based on semver
compatibility). If Cargo used all of the dependencies' <code>Cargo.lock</code> files,
then multiple copies of the library could be used, and perhaps even a version
conflict.</p>
<p>In other words, libraries specify semver requirements for their dependencies but
cannot see the full picture. Only end products like binaries have a full
picture to decide what versions of dependencies should be used.</p>
<h3><a class="header" href="#can-libraries-use--as-a-version-for-their-dependencies" id="can-libraries-use--as-a-version-for-their-dependencies">Can libraries use <code>*</code> as a version for their dependencies?</a></h3>
<p><strong>As of January 22nd, 2016, <a href="https://crates.io/">crates.io</a> rejects all packages (not just libraries)
with wildcard dependency constraints.</strong></p>
<p>While libraries <em>can</em>, strictly speaking, they should not. A version requirement
of <code>*</code> says “This will work with every version ever,” which is never going
to be true. Libraries should always specify the range that they do work with,
even if it’s something as general as “every 1.x.y version.”</p>
<h3><a class="header" href="#why-cargotoml" id="why-cargotoml">Why <code>Cargo.toml</code>?</a></h3>
<p>As one of the most frequent interactions with Cargo, the question of why the
configuration file is named <code>Cargo.toml</code> arises from time to time. The leading
capital-<code>C</code> was chosen to ensure that the manifest was grouped with other
similar configuration files in directory listings. Sorting files often puts
capital letters before lowercase letters, ensuring files like <code>Makefile</code> and
<code>Cargo.toml</code> are placed together. The trailing <code>.toml</code> was chosen to emphasize
the fact that the file is in the <a href="https://github.com/toml-lang/toml">TOML configuration
format</a>.</p>
<p>Cargo does not allow other names such as <code>cargo.toml</code> or <code>Cargofile</code> to
emphasize the ease of how a Cargo repository can be identified. An option of
many possible names has historically led to confusion where one case was handled
but others were accidentally forgotten.</p>
<h3><a class="header" href="#how-can-cargo-work-offline" id="how-can-cargo-work-offline">How can Cargo work offline?</a></h3>
<p>Cargo is often used in situations with limited or no network access such as
airplanes, CI environments, or embedded in large production deployments. Users
are often surprised when Cargo attempts to fetch resources from the network, and
hence the request for Cargo to work offline comes up frequently.</p>
<p>Cargo, at its heart, will not attempt to access the network unless told to do
so. That is, if no crates comes from crates.io, a git repository, or some other
network location, Cargo will never attempt to make a network connection. As a
result, if Cargo attempts to touch the network, then it's because it needs to
fetch a required resource.</p>
<p>Cargo is also quite aggressive about caching information to minimize the amount
of network activity. It will guarantee, for example, that if <code>cargo build</code> (or
an equivalent) is run to completion then the next <code>cargo build</code> is guaranteed to
not touch the network so long as <code>Cargo.toml</code> has not been modified in the
meantime. This avoidance of the network boils down to a <code>Cargo.lock</code> existing
and a populated cache of the crates reflected in the lock file. If either of
these components are missing, then they're required for the build to succeed and
must be fetched remotely.</p>
<p>As of Rust 1.11.0, Cargo understands a new flag, <code>--frozen</code>, which is an
assertion that it shouldn't touch the network. When passed, Cargo will
immediately return an error if it would otherwise attempt a network request.
The error should include contextual information about why the network request is
being made in the first place to help debug as well. Note that this flag <em>does
not change the behavior of Cargo</em>, it simply asserts that Cargo shouldn't touch
the network as a previous command has been run to ensure that network activity
shouldn't be necessary.</p>
<p>The <code>--offline</code> flag was added in Rust 1.36.0. This flag tells Cargo to not
access the network, and try to proceed with available cached data if possible.
You can use <a href="commands/cargo-fetch.html"><code>cargo fetch</code></a> in one project to download dependencies before
going offline, and then use those same dependencies in another project with
the <code>--offline</code> flag (or <a href="reference/config.html#netoffline">configuration value</a>).</p>
<p>For more information about vendoring, see documentation on <a href="reference/source-replacement.html">source
replacement</a>.</p>
<h1><a class="header" href="#glossary" id="glossary">Glossary</a></h1>
<h3><a class="header" href="#artifact" id="artifact">Artifact</a></h3>
<p>An <em>artifact</em> is the file or set of files created as a result of the
compilation process. This includes linkable libraries and executable binaries.</p>
<h3><a class="header" href="#crate" id="crate">Crate</a></h3>
<p>Every target in a package is a <em>crate</em>. Crates are either libraries or
executable binaries. It may loosely refer to either the source code of the
target, or the compiled artifact that the target produces. A crate may also
refer to a compressed package fetched from a registry.</p>
<h3><a class="header" href="#edition" id="edition">Edition</a></h3>
<p>A <em>Rust edition</em> is a developmental landmark of the Rust language. The
<a href="appendix/../reference/manifest.html#the-edition-field">edition of a package</a> is specified in the <code>Cargo.toml</code>
manifest, and individual targets can specify which edition they use. See the
<a href="appendix/../../edition-guide/index.html">Edition Guide</a> for more information.</p>
<h3><a class="header" href="#feature" id="feature">Feature</a></h3>
<p>The meaning of <em>feature</em> depends on the context:</p>
<ul>
<li>
<p>A <a href="appendix/../reference/features.html"><em>feature</em></a> is a named flag which allows for conditional
compilation. A feature can refer to an optional dependency, or an arbitrary
name defined in a <code>Cargo.toml</code> manifest that can be checked within source
code.</p>
</li>
<li>
<p>Cargo has <a href="appendix/../reference/unstable.html"><em>unstable feature flags</em></a> which can be used to
enable experimental behavior of Cargo itself.</p>
</li>
<li>
<p>The Rust compiler and Rustdoc have their own unstable feature flags (see
<a href="https://doc.rust-lang.org/nightly/unstable-book/index.html">The Unstable Book</a> and <a href="https://doc.rust-lang.org/nightly/rustdoc/unstable-features.html">The Rustdoc
Book</a>).</p>
</li>
<li>
<p>CPU targets have <a href="appendix/../../reference/attributes/codegen.html#the-target_feature-attribute"><em>target features</em></a> which specify
capabilities of a CPU.</p>
</li>
</ul>
<h3><a class="header" href="#index" id="index">Index</a></h3>
<p>The index is the searchable list of crates in a registry.</p>
<h3><a class="header" href="#lock-file" id="lock-file">Lock file</a></h3>
<p>The <code>Cargo.lock</code> <em>lock file</em> is a file that captures the exact version of
every dependency used in a workspace or package. It is automatically generated
by Cargo. See <a href="appendix/../guide/cargo-toml-vs-cargo-lock.html">Cargo.toml vs Cargo.lock</a>.</p>
<h3><a class="header" href="#manifest" id="manifest">Manifest</a></h3>
<p>A <a href="appendix/../reference/manifest.html"><em>manifest</em></a> is a description of a package or a workspace in a
file named <code>Cargo.toml</code>.</p>
<p>A <a href="appendix/../reference/workspaces.html"><em>virtual manifest</em></a> is a <code>Cargo.toml</code> file that only describes a
workspace, and does not include a package.</p>
<h3><a class="header" href="#member" id="member">Member</a></h3>
<p>A <em>member</em> is a package that belongs to a workspace.</p>
<h3><a class="header" href="#package" id="package">Package</a></h3>
<p>A <em>package</em> is a collection of source files and a <code>Cargo.toml</code> manifest which
describes the package. A package has a name and version which is used for
specifying dependencies between packages. A package contains multiple targets,
which are either libraries or executable binaries.</p>
<p>The <em>package root</em> is the directory where the package's <code>Cargo.toml</code> manifest
is located.</p>
<p>The <a href="appendix/../reference/pkgid-spec.html"><em>package ID specification</em></a>, or <em>SPEC</em>, is a string used to
uniquely reference a specific version of a package from a specific source.</p>
<h3><a class="header" href="#project" id="project">Project</a></h3>
<p>Another name for a <a href="appendix/glossary.html#package">package</a>.</p>
<h3><a class="header" href="#registry-1" id="registry-1">Registry</a></h3>
<p>A <em>registry</em> is a service that contains a collection of downloadable crates
that can be installed or used as dependencies for a package. The default
registry is <a href="https://crates.io">crates.io</a>. The registry has an <em>index</em> which
contains a list of all crates, and tells Cargo how to download the crates that
are needed.</p>
<h3><a class="header" href="#source-1" id="source-1">Source</a></h3>
<p>A <em>source</em> is a provider that contains crates that may be included as
dependencies for a package. There are several kinds of sources:</p>
<ul>
<li><strong>Registry source</strong> — See <a href="appendix/glossary.html#registry">registry</a>.</li>
<li><strong>Local registry source</strong> — A set of crates stored as compressed files on
the filesystem. See <a href="appendix/../reference/source-replacement.html#local-registry-sources">Local Registry Sources</a>.</li>
<li><strong>Directory source</strong> — A set of crates stored as uncompressed files on the
filesystem. See <a href="appendix/../reference/source-replacement.html#directory-sources">Directory Sources</a>.</li>
<li><strong>Path source</strong> — An individual package located on the filesystem (such as a
<a href="appendix/../reference/specifying-dependencies.html#specifying-path-dependencies">path dependency</a>) or a set of multiple packages (such as <a href="appendix/../reference/overriding-dependencies.html#paths-overrides">path overrides</a>).</li>
<li><strong>Git source</strong> — Packages located in a git repository (such as a <a href="appendix/../reference/specifying-dependencies.html#specifying-dependencies-from-git-repositories">git
dependency</a> or <a href="appendix/../reference/source-replacement.html">git source</a>).</li>
</ul>
<p>See <a href="appendix/../reference/source-replacement.html">Source Replacement</a> for more information.</p>
<h3><a class="header" href="#spec" id="spec">Spec</a></h3>
<p>See <a href="appendix/glossary.html#package">package ID specification</a>.</p>
<h3><a class="header" href="#target-1" id="target-1">Target</a></h3>
<p>The meaning of the term <em>target</em> depends on the context:</p>
<ul>
<li>
<p><strong>Cargo Target</strong> — Cargo packages consist of <em>targets</em> which correspond to
artifacts that will be produced. Packages can have library, binary, example,
test, and benchmark targets. The <a href="appendix/../reference/cargo-targets.html#configuring-a-target">list of targets</a> are configured
in the <code>Cargo.toml</code> manifest, often inferred automatically by the <a href="appendix/../guide/project-layout.html">directory
layout</a> of the source files.</p>
</li>
<li>
<p><strong>Target Directory</strong> — Cargo places all built artifacts and intermediate
files in the <em>target</em> directory. By default this is a directory named
<code>target</code> at the workspace root, or the package root if not using a
workspace. The directory may be changed with the <code>--target-dir</code> command-line
option, the <code>CARGO_TARGET_DIR</code> <a href="appendix/../reference/environment-variables.html">environment variable</a>, or the
<code>build.target-dir</code> <a href="appendix/../reference/config.html">config option</a>.</p>
</li>
<li>
<p><strong>Target Architecture</strong> — The OS and machine architecture for the built
artifacts are typically referred to as a <em>target</em>.</p>
</li>
<li>
<p><strong>Target Triple</strong> — A triple is a specific format for specifying a target
architecture. Triples may be referred to as a <em>target triple</em> which is the
architecture for the artifact produced, and the <em>host triple</em> which is the
architecture that the compiler is running on. The target triple can be
specified with the <code>--target</code> command-line option or the <code>build.target</code>
<a href="appendix/../reference/config.html">config option</a>. The general format of the triple is
<code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code> where:</p>
<ul>
<li><code>arch</code> = The base CPU architecture, for example <code>x86_64</code>, <code>i686</code>, <code>arm</code>,
<code>thumb</code>, <code>mips</code>, etc.</li>
<li><code>sub</code> = The CPU sub-architecture, for example <code>arm</code> has <code>v7</code>, <code>v7s</code>,
<code>v5te</code>, etc.</li>
<li><code>vendor</code> = The vendor, for example <code>unknown</code>, <code>apple</code>, <code>pc</code>, <code>nvidia</code>, etc.</li>
<li><code>sys</code> = The system name, for example <code>linux</code>, <code>windows</code>, <code>darwin</code>, etc.
<code>none</code> is typically used for bare-metal without an OS.</li>
<li><code>abi</code> = The ABI, for example <code>gnu</code>, <code>android</code>, <code>eabi</code>, etc.</li>
</ul>
<p>Some parameters may be omitted. Run <code>rustc --print target-list</code> for a list of
supported targets.</p>
</li>
</ul>
<h3><a class="header" href="#test-targets" id="test-targets">Test Targets</a></h3>
<p>Cargo <em>test targets</em> generate binaries which help verify proper operation and
correctness of code. There are two types of test artifacts:</p>
<ul>
<li><strong>Unit test</strong> — A <em>unit test</em> is an executable binary compiled directly from
a library or a binary target. It contains the entire contents of the library
or binary code, and runs <code>#[test]</code> annotated functions, intended to verify
individual units of code.</li>
<li><strong>Integration test target</strong> — An <a href="appendix/../reference/cargo-targets.html#integration-tests"><em>integration test
target</em></a> is an executable binary compiled from a <em>test
target</em> which is a distinct crate whose source is located in the <code>tests</code>
directory or specified by the <a href="appendix/../reference/cargo-targets.html#configuring-a-target"><code>[[test]]</code> table</a> in the
<code>Cargo.toml</code> manifest. It is intended to only test the public API of a
library, or execute a binary to verify its operation.</li>
</ul>
<h3><a class="header" href="#workspace" id="workspace">Workspace</a></h3>
<p>A <a href="appendix/../reference/workspaces.html"><em>workspace</em></a> is a collection of one or more packages that share
common dependency resolution (with a shared <code>Cargo.lock</code>), output directory,
and various settings such as profiles.</p>
<p>A <a href="appendix/../reference/workspaces.html"><em>virtual workspace</em></a> is a workspace where the root <code>Cargo.toml</code>
manifest does not define a package, and only lists the workspace members.</p>
<p>The <em>workspace root</em> is the directory where the workspace's <code>Cargo.toml</code>
manifest is located.</p>
<h1><a class="header" href="#git-authentication" id="git-authentication">Git Authentication</a></h1>
<p>Cargo supports some forms of authentication when using git dependencies and
registries. This appendix contains some information for setting up git
authentication in a way that works with Cargo.</p>
<p>If you need other authentication methods, the <a href="appendix/../reference/config.html#netgit-fetch-with-cli"><code>net.git-fetch-with-cli</code></a>
config value can be set to cause Cargo to execute the <code>git</code> executable to
handle fetching remote repositories instead of using the built-in support.
This can be enabled with the <code>CARGO_NET_GIT_FETCH_WITH_CLI=true</code> environment
variable.</p>
<h2><a class="header" href="#https-authentication" id="https-authentication">HTTPS authentication</a></h2>
<p>HTTPS authentication requires the <a href="https://git-scm.com/book/en/v2/Git-Tools-Credential-Storage"><code>credential.helper</code></a> mechanism. There are
multiple credential helpers, and you specify the one you want to use in your
global git configuration file.</p>
<pre><code class="language-ini"># ~/.gitconfig

[credential]
helper = store
</code></pre>
<p>Cargo does not ask for passwords, so for most helpers you will need to give
the helper the initial username/password before running Cargo. One way to do
this is to run <code>git clone</code> of the private git repo and enter the
username/password.</p>
<blockquote>
<p><strong>Tip:</strong><br>
macOS users may want to consider using the osxkeychain helper.<br>
Windows users may want to consider using the <a href="https://github.com/Microsoft/Git-Credential-Manager-for-Windows/">GCM</a> helper.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> Windows users will need to make sure that the <code>sh</code> shell is
available in your <code>PATH</code>. This typically is available with the Git for
Windows installation.</p>
</blockquote>
<h2><a class="header" href="#ssh-authentication" id="ssh-authentication">SSH authentication</a></h2>
<p>SSH authentication requires <code>ssh-agent</code> to be running to acquire the SSH key.
Make sure the appropriate environment variables are set up (<code>SSH_AUTH_SOCK</code> on
most Unix-like systems), and that the correct keys are added (with <code>ssh-add</code>).
Windows uses Pageant for SSH authentication.</p>
<blockquote>
<p><strong>Note:</strong> Cargo does not support git's shorthand SSH URLs like
<code>git@example.com/user/repo.git</code>. Use a full SSH URL like
<code>ssh://git@example.com/user/repo.git</code>.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> SSH configuration files (like OpenSSH's <code>~/.ssh/config</code>) are not
used by Cargo's built-in SSH library. More advanced requirements should use
<a href="appendix/../reference/config.html#netgit-fetch-with-cli"><code>net.git-fetch-with-cli</code></a>.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
