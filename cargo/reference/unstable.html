<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Unstable Features - The Cargo Book</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting-started/first-steps.html"><strong aria-hidden="true">1.2.</strong> First Steps with Cargo</a></li></ol></li><li class="chapter-item expanded "><a href="../guide/index.html"><strong aria-hidden="true">2.</strong> Cargo Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../guide/why-cargo-exists.html"><strong aria-hidden="true">2.1.</strong> Why Cargo Exists</a></li><li class="chapter-item expanded "><a href="../guide/creating-a-new-project.html"><strong aria-hidden="true">2.2.</strong> Creating a New Package</a></li><li class="chapter-item expanded "><a href="../guide/working-on-an-existing-project.html"><strong aria-hidden="true">2.3.</strong> Working on an Existing Package</a></li><li class="chapter-item expanded "><a href="../guide/dependencies.html"><strong aria-hidden="true">2.4.</strong> Dependencies</a></li><li class="chapter-item expanded "><a href="../guide/project-layout.html"><strong aria-hidden="true">2.5.</strong> Package Layout</a></li><li class="chapter-item expanded "><a href="../guide/cargo-toml-vs-cargo-lock.html"><strong aria-hidden="true">2.6.</strong> Cargo.toml vs Cargo.lock</a></li><li class="chapter-item expanded "><a href="../guide/tests.html"><strong aria-hidden="true">2.7.</strong> Tests</a></li><li class="chapter-item expanded "><a href="../guide/continuous-integration.html"><strong aria-hidden="true">2.8.</strong> Continuous Integration</a></li><li class="chapter-item expanded "><a href="../guide/cargo-home.html"><strong aria-hidden="true">2.9.</strong> Cargo Home</a></li><li class="chapter-item expanded "><a href="../guide/build-cache.html"><strong aria-hidden="true">2.10.</strong> Build Cache</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/index.html"><strong aria-hidden="true">3.</strong> Cargo Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/specifying-dependencies.html"><strong aria-hidden="true">3.1.</strong> Specifying Dependencies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/overriding-dependencies.html"><strong aria-hidden="true">3.1.1.</strong> Overriding Dependencies</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/manifest.html"><strong aria-hidden="true">3.2.</strong> The Manifest Format</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/cargo-targets.html"><strong aria-hidden="true">3.2.1.</strong> Cargo Targets</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/workspaces.html"><strong aria-hidden="true">3.3.</strong> Workspaces</a></li><li class="chapter-item expanded "><a href="../reference/features.html"><strong aria-hidden="true">3.4.</strong> Features</a></li><li class="chapter-item expanded "><a href="../reference/profiles.html"><strong aria-hidden="true">3.5.</strong> Profiles</a></li><li class="chapter-item expanded "><a href="../reference/config.html"><strong aria-hidden="true">3.6.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../reference/environment-variables.html"><strong aria-hidden="true">3.7.</strong> Environment Variables</a></li><li class="chapter-item expanded "><a href="../reference/build-scripts.html"><strong aria-hidden="true">3.8.</strong> Build Scripts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/build-script-examples.html"><strong aria-hidden="true">3.8.1.</strong> Build Script Examples</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/publishing.html"><strong aria-hidden="true">3.9.</strong> Publishing on crates.io</a></li><li class="chapter-item expanded "><a href="../reference/pkgid-spec.html"><strong aria-hidden="true">3.10.</strong> Package ID Specifications</a></li><li class="chapter-item expanded "><a href="../reference/source-replacement.html"><strong aria-hidden="true">3.11.</strong> Source Replacement</a></li><li class="chapter-item expanded "><a href="../reference/external-tools.html"><strong aria-hidden="true">3.12.</strong> External Tools</a></li><li class="chapter-item expanded "><a href="../reference/registries.html"><strong aria-hidden="true">3.13.</strong> Registries</a></li><li class="chapter-item expanded "><a href="../reference/unstable.html" class="active"><strong aria-hidden="true">3.14.</strong> Unstable Features</a></li></ol></li><li class="chapter-item expanded "><a href="../commands/index.html"><strong aria-hidden="true">4.</strong> Cargo Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/general-commands.html"><strong aria-hidden="true">4.1.</strong> General Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/cargo.html"><strong aria-hidden="true">4.1.1.</strong> cargo</a></li><li class="chapter-item expanded "><a href="../commands/cargo-help.html"><strong aria-hidden="true">4.1.2.</strong> cargo help</a></li><li class="chapter-item expanded "><a href="../commands/cargo-version.html"><strong aria-hidden="true">4.1.3.</strong> cargo version</a></li></ol></li><li class="chapter-item expanded "><a href="../commands/build-commands.html"><strong aria-hidden="true">4.2.</strong> Build Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/cargo-bench.html"><strong aria-hidden="true">4.2.1.</strong> cargo bench</a></li><li class="chapter-item expanded "><a href="../commands/cargo-build.html"><strong aria-hidden="true">4.2.2.</strong> cargo build</a></li><li class="chapter-item expanded "><a href="../commands/cargo-check.html"><strong aria-hidden="true">4.2.3.</strong> cargo check</a></li><li class="chapter-item expanded "><a href="../commands/cargo-clean.html"><strong aria-hidden="true">4.2.4.</strong> cargo clean</a></li><li class="chapter-item expanded "><a href="../commands/cargo-doc.html"><strong aria-hidden="true">4.2.5.</strong> cargo doc</a></li><li class="chapter-item expanded "><a href="../commands/cargo-fetch.html"><strong aria-hidden="true">4.2.6.</strong> cargo fetch</a></li><li class="chapter-item expanded "><a href="../commands/cargo-fix.html"><strong aria-hidden="true">4.2.7.</strong> cargo fix</a></li><li class="chapter-item expanded "><a href="../commands/cargo-run.html"><strong aria-hidden="true">4.2.8.</strong> cargo run</a></li><li class="chapter-item expanded "><a href="../commands/cargo-rustc.html"><strong aria-hidden="true">4.2.9.</strong> cargo rustc</a></li><li class="chapter-item expanded "><a href="../commands/cargo-rustdoc.html"><strong aria-hidden="true">4.2.10.</strong> cargo rustdoc</a></li><li class="chapter-item expanded "><a href="../commands/cargo-test.html"><strong aria-hidden="true">4.2.11.</strong> cargo test</a></li></ol></li><li class="chapter-item expanded "><a href="../commands/manifest-commands.html"><strong aria-hidden="true">4.3.</strong> Manifest Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/cargo-generate-lockfile.html"><strong aria-hidden="true">4.3.1.</strong> cargo generate-lockfile</a></li><li class="chapter-item expanded "><a href="../commands/cargo-locate-project.html"><strong aria-hidden="true">4.3.2.</strong> cargo locate-project</a></li><li class="chapter-item expanded "><a href="../commands/cargo-metadata.html"><strong aria-hidden="true">4.3.3.</strong> cargo metadata</a></li><li class="chapter-item expanded "><a href="../commands/cargo-pkgid.html"><strong aria-hidden="true">4.3.4.</strong> cargo pkgid</a></li><li class="chapter-item expanded "><a href="../commands/cargo-tree.html"><strong aria-hidden="true">4.3.5.</strong> cargo tree</a></li><li class="chapter-item expanded "><a href="../commands/cargo-update.html"><strong aria-hidden="true">4.3.6.</strong> cargo update</a></li><li class="chapter-item expanded "><a href="../commands/cargo-vendor.html"><strong aria-hidden="true">4.3.7.</strong> cargo vendor</a></li><li class="chapter-item expanded "><a href="../commands/cargo-verify-project.html"><strong aria-hidden="true">4.3.8.</strong> cargo verify-project</a></li></ol></li><li class="chapter-item expanded "><a href="../commands/package-commands.html"><strong aria-hidden="true">4.4.</strong> Package Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/cargo-init.html"><strong aria-hidden="true">4.4.1.</strong> cargo init</a></li><li class="chapter-item expanded "><a href="../commands/cargo-install.html"><strong aria-hidden="true">4.4.2.</strong> cargo install</a></li><li class="chapter-item expanded "><a href="../commands/cargo-new.html"><strong aria-hidden="true">4.4.3.</strong> cargo new</a></li><li class="chapter-item expanded "><a href="../commands/cargo-search.html"><strong aria-hidden="true">4.4.4.</strong> cargo search</a></li><li class="chapter-item expanded "><a href="../commands/cargo-uninstall.html"><strong aria-hidden="true">4.4.5.</strong> cargo uninstall</a></li></ol></li><li class="chapter-item expanded "><a href="../commands/publishing-commands.html"><strong aria-hidden="true">4.5.</strong> Publishing Commands</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../commands/cargo-login.html"><strong aria-hidden="true">4.5.1.</strong> cargo login</a></li><li class="chapter-item expanded "><a href="../commands/cargo-owner.html"><strong aria-hidden="true">4.5.2.</strong> cargo owner</a></li><li class="chapter-item expanded "><a href="../commands/cargo-package.html"><strong aria-hidden="true">4.5.3.</strong> cargo package</a></li><li class="chapter-item expanded "><a href="../commands/cargo-publish.html"><strong aria-hidden="true">4.5.4.</strong> cargo publish</a></li><li class="chapter-item expanded "><a href="../commands/cargo-yank.html"><strong aria-hidden="true">4.5.5.</strong> cargo yank</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../faq.html"><strong aria-hidden="true">5.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="../appendix/glossary.html"><strong aria-hidden="true">6.</strong> Appendix: Glossary</a></li><li class="chapter-item expanded "><a href="../appendix/git-authentication.html"><strong aria-hidden="true">7.</strong> Appendix: Git Authentication</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Cargo Book</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rust-lang/cargo/tree/master/src/doc/src" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2><a class="header" href="#unstable-features" id="unstable-features">Unstable Features</a></h2>
<p>Experimental Cargo features are only available on the nightly channel. You
typically use one of the <code>-Z</code> flags to enable them. Run <code>cargo -Z help</code> to
see a list of flags available.</p>
<p><code>-Z unstable-options</code> is a generic flag for enabling other unstable
command-line flags. Options requiring this will be called out below.</p>
<p>Anything which can be configured with a Z flag can also be set in the cargo
config file (<code>.cargo/config.toml</code>) in the <code>unstable</code> table. For example:</p>
<pre><code class="language-toml">[unstable]
mtime-on-use = 'yes'
multitarget = 'yes'
timings = 'yes'
</code></pre>
<p>Some unstable features will require you to specify the <code>cargo-features</code> key in
<code>Cargo.toml</code>.</p>
<h3><a class="header" href="#no-index-update" id="no-index-update">no-index-update</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/3479">#3479</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7404">#7404</a></li>
</ul>
<p>The <code>-Z no-index-update</code> flag ensures that Cargo does not attempt to update
the registry index. This is intended for tools such as Crater that issue many
Cargo commands, and you want to avoid the network latency for updating the
index each time.</p>
<h3><a class="header" href="#mtime-on-use" id="mtime-on-use">mtime-on-use</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/pull/6477">#6477</a></li>
<li>Cache usage meta tracking issue: <a href="https://github.com/rust-lang/cargo/issues/7150">#7150</a></li>
</ul>
<p>The <code>-Z mtime-on-use</code> flag is an experiment to have Cargo update the mtime of
used files to make it easier for tools like cargo-sweep to detect which files
are stale. For many workflows this needs to be set on <em>all</em> invocations of cargo.
To make this more practical setting the <code>unstable.mtime_on_use</code> flag in <code>.cargo/config.toml</code>
or the corresponding ENV variable will apply the <code>-Z mtime-on-use</code> to all
invocations of nightly cargo. (the config flag is ignored by stable)</p>
<h3><a class="header" href="#avoid-dev-deps" id="avoid-dev-deps">avoid-dev-deps</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4988">#4988</a></li>
<li>Stabilization Issue: <a href="https://github.com/rust-lang/cargo/issues/5133">#5133</a></li>
</ul>
<p>When running commands such as <code>cargo install</code> or <code>cargo build</code>, Cargo
currently requires dev-dependencies to be downloaded, even if they are not
used. The <code>-Z avoid-dev-deps</code> flag allows Cargo to avoid downloading
dev-dependencies if they are not needed. The <code>Cargo.lock</code> file will not be
generated if dev-dependencies are skipped.</p>
<h3><a class="header" href="#minimal-versions" id="minimal-versions">minimal-versions</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4100">#4100</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5657">#5657</a></li>
</ul>
<blockquote>
<p>Note: It is not recommended to use this feature. Because it enforces minimal
versions for all transitive dependencies, its usefulness is limited since
not all external dependencies declare proper lower version bounds. It is
intended that it will be changed in the future to only enforce minimal
versions for direct dependencies.</p>
</blockquote>
<p>When a <code>Cargo.lock</code> file is generated, the <code>-Z minimal-versions</code> flag will
resolve the dependencies to the minimum semver version that will satisfy the
requirements (instead of the greatest version).</p>
<p>The intended use-case of this flag is to check, during continuous integration,
that the versions specified in Cargo.toml are a correct reflection of the
minimum versions that you are actually using. That is, if Cargo.toml says
<code>foo = &quot;1.0.0&quot;</code> that you don't accidentally depend on features added only in
<code>foo 1.5.0</code>.</p>
<h3><a class="header" href="#out-dir" id="out-dir">out-dir</a></h3>
<ul>
<li>Original Issue: <a href="https://github.com/rust-lang/cargo/issues/4875">#4875</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/6790">#6790</a></li>
</ul>
<p>This feature allows you to specify the directory where artifacts will be
copied to after they are built. Typically artifacts are only written to the
<code>target/release</code> or <code>target/debug</code> directories. However, determining the
exact filename can be tricky since you need to parse JSON output. The
<code>--out-dir</code> flag makes it easier to predictably access the artifacts. Note
that the artifacts are copied, so the originals are still in the <code>target</code>
directory. Example:</p>
<pre><code>cargo +nightly build --out-dir=out -Z unstable-options
</code></pre>
<p>This can also be specified in <code>.cargo/config.toml</code> files.</p>
<pre><code class="language-toml">[build]
out-dir = &quot;out&quot;
</code></pre>
<h3><a class="header" href="#doctest-xcompile" id="doctest-xcompile">doctest-xcompile</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7040">#7040</a></li>
<li>Tracking Rustc Issue: <a href="https://github.com/rust-lang/rust/issues/64245">#64245</a></li>
</ul>
<p>This flag changes <code>cargo test</code>'s behavior when handling doctests when
a target is passed. Currently, if a target is passed that is different
from the host cargo will simply skip testing doctests. If this flag is
present, cargo will continue as normal, passing the tests to doctest,
while also passing it a <code>--target</code> option, as well as enabling
<code>-Zunstable-features --enable-per-target-ignores</code> and passing along
information from <code>.cargo/config.toml</code>. See the rustc issue for more information.</p>
<pre><code>cargo test --target foo -Zdoctest-xcompile
</code></pre>
<h3><a class="header" href="#multitarget" id="multitarget">multitarget</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8176">#8176</a></li>
</ul>
<p>This flag allows passing multiple <code>--target</code> flags to the <code>cargo</code> subcommand
selected. When multiple <code>--target</code> flags are passed the selected build targets
will be built for each of the selected architectures.</p>
<p>For example to compile a library for both 32 and 64-bit:</p>
<pre><code>cargo build --target x86_64-unknown-linux-gnu --target i686-unknown-linux-gnu
</code></pre>
<p>or running tests for both targets:</p>
<pre><code>cargo test --target x86_64-unknown-linux-gnu --target i686-unknown-linux-gnu
</code></pre>
<h3><a class="header" href="#custom-named-profiles" id="custom-named-profiles">Custom named profiles</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/6988">rust-lang/cargo#6988</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/pull/2678">#2678</a></li>
</ul>
<p>With this feature you can define custom profiles having new names. With the
custom profile enabled, build artifacts can be emitted by default to
directories other than <code>release</code> or <code>debug</code>, based on the custom profile's
name.</p>
<p>For example:</p>
<pre><code class="language-toml">cargo-features = [&quot;named-profiles&quot;]

[profile.release-lto]
inherits = &quot;release&quot;
lto = true
</code></pre>
<p>An <code>inherits</code> key is used in order to receive attributes from other profiles,
so that a new custom profile can be based on the standard <code>dev</code> or <code>release</code>
profile presets. Cargo emits errors in case <code>inherits</code> loops are detected. When
considering inheritance hierarchy, all profiles directly or indirectly inherit
from either from <code>release</code> or from <code>dev</code>.</p>
<p>Valid profile names are: must not be empty, use only alphanumeric characters or
<code>-</code> or <code>_</code>.</p>
<p>Passing <code>--profile</code> with the profile's name to various Cargo commands, directs
operations to use the profile's attributes. Overrides that are specified in the
profiles from which the custom profile inherits are inherited too.</p>
<p>For example, using <code>cargo build</code> with <code>--profile</code> and the manifest from above:</p>
<pre><code>cargo +nightly build --profile release-lto -Z unstable-options
</code></pre>
<p>When a custom profile is used, build artifcats go to a different target by
default. In the example above, you can expect to see the outputs under
<code>target/release-lto</code>.</p>
<h4><a class="header" href="#new-dir-name-attribute" id="new-dir-name-attribute">New <code>dir-name</code> attribute</a></h4>
<p>Some of the paths generated under <code>target/</code> have resulted in a de-facto &quot;build
protocol&quot;, where <code>cargo</code> is invoked as a part of a larger project build. So, to
preserve the existing behavior, there is also a new attribute <code>dir-name</code>, which
when left unspecified, defaults to the name of the profile. For example:</p>
<pre><code class="language-toml">[profile.release-lto]
inherits = &quot;release&quot;
dir-name = &quot;lto&quot;  # Emits to target/lto instead of target/release-lto
lto = true
</code></pre>
<h3><a class="header" href="#namespaced-features" id="namespaced-features">Namespaced features</a></h3>
<ul>
<li>Original issue: <a href="https://github.com/rust-lang/cargo/issues/1286">#1286</a></li>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5565">#5565</a></li>
</ul>
<p>Currently, it is not possible to have a feature and a dependency with the same
name in the manifest. If you set <code>namespaced-features</code> to <code>true</code>, the namespaces
for features and dependencies are separated. The effect of this is that, in the
feature requirements, dependencies have to be prefixed with <code>crate:</code>. Like this:</p>
<pre><code class="language-toml">[package]
namespaced-features = true

[features]
bar = [&quot;crate:baz&quot;, &quot;foo&quot;]
foo = []

[dependencies]
baz = { version = &quot;0.1&quot;, optional = true }
</code></pre>
<p>To prevent unnecessary boilerplate from having to explicitly declare features
for each optional dependency, implicit features get created for any optional
dependencies where a feature of the same name is not defined. However, if
a feature of the same name as a dependency is defined, that feature must
include the dependency as a requirement, as <code>foo = [&quot;crate:foo&quot;]</code>.</p>
<h3><a class="header" href="#build-plan" id="build-plan">Build-plan</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5579">#5579</a></li>
</ul>
<p>The <code>--build-plan</code> argument for the <code>build</code> command will output JSON with
information about which commands would be run without actually executing
anything. This can be useful when integrating with another build tool.
Example:</p>
<pre><code>cargo +nightly build --build-plan -Z unstable-options
</code></pre>
<h3><a class="header" href="#metabuild" id="metabuild">Metabuild</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/49803">rust-lang/rust#49803</a></li>
<li>RFC: <a href="https://github.com/rust-lang/rfcs/blob/master/text/2196-metabuild.md">#2196</a></li>
</ul>
<p>Metabuild is a feature to have declarative build scripts. Instead of writing
a <code>build.rs</code> script, you specify a list of build dependencies in the
<code>metabuild</code> key in <code>Cargo.toml</code>. A build script is automatically generated
that runs each build dependency in order. Metabuild packages can then read
metadata from <code>Cargo.toml</code> to specify their behavior.</p>
<p>Include <code>cargo-features</code> at the top of <code>Cargo.toml</code>, a <code>metabuild</code> key in the
<code>package</code>, list the dependencies in <code>build-dependencies</code>, and add any metadata
that the metabuild packages require under <code>package.metadata</code>. Example:</p>
<pre><code class="language-toml">cargo-features = [&quot;metabuild&quot;]

[package]
name = &quot;mypackage&quot;
version = &quot;0.0.1&quot;
metabuild = [&quot;foo&quot;, &quot;bar&quot;]

[build-dependencies]
foo = &quot;1.0&quot;
bar = &quot;1.0&quot;

[package.metadata.foo]
extra-info = &quot;qwerty&quot;
</code></pre>
<p>Metabuild packages should have a public function called <code>metabuild</code> that
performs the same actions as a regular <code>build.rs</code> script would perform.</p>
<h3><a class="header" href="#public-dependency" id="public-dependency">public-dependency</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/44663">#44663</a></li>
</ul>
<p>The 'public-dependency' feature allows marking dependencies as 'public'
or 'private'. When this feature is enabled, additional information is passed to rustc to allow
the 'exported_private_dependencies' lint to function properly.</p>
<p>This requires the appropriate key to be set in <code>cargo-features</code>:</p>
<pre><code class="language-toml">cargo-features = [&quot;public-dependency&quot;]

[dependencies]
my_dep = { version = &quot;1.2.3&quot;, public = true }
private_dep = &quot;2.0.0&quot; # Will be 'private' by default
</code></pre>
<h3><a class="header" href="#build-std" id="build-std">build-std</a></h3>
<ul>
<li>Tracking Repository: https://github.com/rust-lang/wg-cargo-std-aware</li>
</ul>
<p>The <code>build-std</code> feature enables Cargo to compile the standard library itself as
part of a crate graph compilation. This feature has also historically been known
as &quot;std-aware Cargo&quot;. This feature is still in very early stages of development,
and is also a possible massive feature addition to Cargo. This is a very large
feature to document, even in the minimal form that it exists in today, so if
you're curious to stay up to date you'll want to follow the <a href="https://github.com/rust-lang/wg-cargo-std-aware">tracking
repository</a> and its set of
issues.</p>
<p>The functionality implemented today is behind a flag called <code>-Z build-std</code>. This
flag indicates that Cargo should compile the standard library from source code
using the same profile as the main build itself. Note that for this to work you
need to have the source code for the standard library available, and at this
time the only supported method of doing so is to add the <code>rust-src</code> rust rustup
component:</p>
<pre><code>$ rustup component add rust-src --toolchain nightly
</code></pre>
<p>It is also required today that the <code>-Z build-std</code> flag is combined with the
<code>--target</code> flag. Note that you're not forced to do a cross compilation, you're
just forced to pass <code>--target</code> in one form or another.</p>
<p>Usage looks like:</p>
<pre><code>$ cargo new foo
$ cd foo
$ cargo +nightly run -Z build-std --target x86_64-unknown-linux-gnu
   Compiling core v0.0.0 (...)
   ...
   Compiling foo v0.1.0 (...)
    Finished dev [unoptimized + debuginfo] target(s) in 21.00s
     Running `target/x86_64-unknown-linux-gnu/debug/foo`
Hello, world!
</code></pre>
<p>Here we recompiled the standard library in debug mode with debug assertions
(like <code>src/main.rs</code> is compiled) and everything was linked together at the end.</p>
<p>Using <code>-Z build-std</code> will implicitly compile the stable crates <code>core</code>, <code>std</code>,
<code>alloc</code>, and <code>proc_macro</code>. If you're using <code>cargo test</code> it will also compile the
<code>test</code> crate. If you're working with an environment which does not support some
of these crates, then you can pass an argument to <code>-Zbuild-std</code> as well:</p>
<pre><code>$ cargo +nightly build -Z build-std=core,alloc
</code></pre>
<p>The value here is a comma-separated list of standard library crates to build.</p>
<h4><a class="header" href="#requirements" id="requirements">Requirements</a></h4>
<p>As a summary, a list of requirements today to use <code>-Z build-std</code> are:</p>
<ul>
<li>You must install libstd's source code through <code>rustup component add rust-src</code></li>
<li>You must pass <code>--target</code></li>
<li>You must use both a nightly Cargo and a nightly rustc</li>
<li>The <code>-Z build-std</code> flag must be passed to all <code>cargo</code> invocations.</li>
</ul>
<h4><a class="header" href="#reporting-bugs-and-helping-out" id="reporting-bugs-and-helping-out">Reporting bugs and helping out</a></h4>
<p>The <code>-Z build-std</code> feature is in the very early stages of development! This
feature for Cargo has an extremely long history and is very large in scope, and
this is just the beginning. If you'd like to report bugs please either report
them to:</p>
<ul>
<li>Cargo - https://github.com/rust-lang/cargo/issues/new - for implementation bugs</li>
<li>The tracking repository -
https://github.com/rust-lang/wg-cargo-std-aware/issues/new - for larger design
questions.</li>
</ul>
<p>Also if you'd like to see a feature that's not yet implemented and/or if
something doesn't quite work the way you'd like it to, feel free to check out
the <a href="https://github.com/rust-lang/wg-cargo-std-aware/issues">issue tracker</a> of
the tracking repository, and if it's not there please file a new issue!</p>
<h3><a class="header" href="#build-std-features" id="build-std-features">build-std-features</a></h3>
<ul>
<li>Tracking Repository: https://github.com/rust-lang/wg-cargo-std-aware</li>
</ul>
<p>This flag is a sibling to the <code>-Zbuild-std</code> feature flag. This will configure
the features enabled for the standard library itself when building the standard
library. The default enabled features, at this time, are <code>backtrace</code> and
<code>panic_unwind</code>. This flag expects a comma-separated list and, if provided, will
override the default list of features enabled.</p>
<h3><a class="header" href="#timings" id="timings">timings</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7405">#7405</a></li>
</ul>
<p>The <code>timings</code> feature gives some information about how long each compilation
takes, and tracks concurrency information over time.</p>
<pre><code>cargo +nightly build -Z timings
</code></pre>
<p>The <code>-Ztimings</code> flag can optionally take a comma-separated list of the
following values:</p>
<ul>
<li><code>html</code> — Saves a file called <code>cargo-timing.html</code> to the current directory
with a report of the compilation. Files are also saved with a timestamp in
the filename if you want to look at older runs.</li>
<li><code>info</code> — Displays a message to stdout after each compilation finishes with
how long it took.</li>
<li><code>json</code> — Emits some JSON information about timing information.</li>
</ul>
<p>The default if none are specified is <code>html,info</code>.</p>
<h4><a class="header" href="#reading-the-graphs" id="reading-the-graphs">Reading the graphs</a></h4>
<p>There are two graphs in the output. The &quot;unit&quot; graph shows the duration of
each unit over time. A &quot;unit&quot; is a single compiler invocation. There are lines
that show which additional units are &quot;unlocked&quot; when a unit finishes. That is,
it shows the new units that are now allowed to run because their dependencies
are all finished. Hover the mouse over a unit to highlight the lines. This can
help visualize the critical path of dependencies. This may change between runs
because the units may finish in different orders.</p>
<p>The &quot;codegen&quot; times are highlighted in a lavender color. In some cases, build
pipelining allows units to start when their dependencies are performing code
generation. This information is not always displayed (for example, binary
units do not show when code generation starts).</p>
<p>The &quot;custom build&quot; units are <code>build.rs</code> scripts, which when run are
highlighted in orange.</p>
<p>The second graph shows Cargo's concurrency over time. The three lines are:</p>
<ul>
<li>&quot;Waiting&quot; (red) — This is the number of units waiting for a CPU slot to
open.</li>
<li>&quot;Inactive&quot; (blue) — This is the number of units that are waiting for their
dependencies to finish.</li>
<li>&quot;Active&quot; (green) — This is the number of units currently running.</li>
</ul>
<p>Note: This does not show the concurrency in the compiler itself. <code>rustc</code>
coordinates with Cargo via the &quot;job server&quot; to stay within the concurrency
limit. This currently mostly applies to the code generation phase.</p>
<p>Tips for addressing compile times:</p>
<ul>
<li>Look for slow dependencies.
<ul>
<li>Check if they have features that you may wish to consider disabling.</li>
<li>Consider trying to remove the dependency completely.</li>
</ul>
</li>
<li>Look for a crate being built multiple times with different versions. Try to
remove the older versions from the dependency graph.</li>
<li>Split large crates into smaller pieces.</li>
<li>If there are a large number of crates bottlenecked on a single crate, focus
your attention on improving that one crate to improve parallelism.</li>
</ul>
<h3><a class="header" href="#binary-dep-depinfo" id="binary-dep-depinfo">binary-dep-depinfo</a></h3>
<ul>
<li>Tracking rustc issue: <a href="https://github.com/rust-lang/rust/issues/63012">#63012</a></li>
</ul>
<p>The <code>-Z binary-dep-depinfo</code> flag causes Cargo to forward the same flag to
<code>rustc</code> which will then cause <code>rustc</code> to include the paths of all binary
dependencies in the &quot;dep info&quot; file (with the <code>.d</code> extension). Cargo then uses
that information for change-detection (if any binary dependency changes, then
the crate will be rebuilt). The primary use case is for building the compiler
itself, which has implicit dependencies on the standard library that would
otherwise be untracked for change-detection.</p>
<h3><a class="header" href="#panic-abort-tests" id="panic-abort-tests">panic-abort-tests</a></h3>
<p>The <code>-Z panic-abort-tests</code> flag will enable nightly support to compile test
harness crates with <code>-Cpanic=abort</code>. Without this flag Cargo will compile tests,
and everything they depend on, with <code>-Cpanic=unwind</code> because it's the only way
<code>test</code>-the-crate knows how to operate. As of <a href="https://github.com/rust-lang/rust/pull/64158">rust-lang/rust#64158</a>, however,
the <code>test</code> crate supports <code>-C panic=abort</code> with a test-per-process, and can help
avoid compiling crate graphs multiple times.</p>
<p>It's currently unclear how this feature will be stabilized in Cargo, but we'd
like to stabilize it somehow!</p>
<h3><a class="header" href="#config-cli" id="config-cli">config-cli</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7722">#7722</a></li>
</ul>
<p>The <code>--config</code> CLI option allows arbitrary config values to be passed
in via the command-line. The argument should be in TOML syntax of KEY=VALUE:</p>
<pre><code class="language-console">cargo +nightly -Zunstable-options --config net.git-fetch-with-cli=true fetch
</code></pre>
<p>The <code>--config</code> option may be specified multiple times, in which case the
values are merged in left-to-right order, using the same merging logic that
multiple config files use. CLI values take precedence over environment
variables, which take precedence over config files.</p>
<p>Some examples of what it looks like using Bourne shell syntax:</p>
<pre><code class="language-sh"># Most shells will require escaping.
cargo --config http.proxy=\&quot;http://example.com\&quot; …

# Spaces may be used.
cargo --config &quot;net.git-fetch-with-cli = true&quot; …

# TOML array example. Single quotes make it easier to read and write.
cargo --config 'build.rustdocflags = [&quot;--html-in-header&quot;, &quot;header.html&quot;]' …

# Example of a complex TOML key.
cargo --config &quot;target.'cfg(all(target_arch = \&quot;arm\&quot;, target_os = \&quot;none\&quot;))'.runner = 'my-runner'&quot; …

# Example of overriding a profile setting.
cargo --config profile.dev.package.image.opt-level=3 …
</code></pre>
<h3><a class="header" href="#config-include" id="config-include">config-include</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/7723">#7723</a></li>
</ul>
<p>The <code>include</code> key in a config file can be used to load another config file. It
takes a string for a path to another file relative to the config file, or a
list of strings. It requires the <code>-Zconfig-include</code> command-line option.</p>
<pre><code class="language-toml"># .cargo/config
include = '../../some-common-config.toml'
</code></pre>
<p>The config values are first loaded from the include path, and then the config
file's own values are merged on top of it.</p>
<p>This can be paired with <a href="#config-cli">config-cli</a> to specify a file to load
from the command-line. Pass a path to a config file as the argument to
<code>--config</code>:</p>
<pre><code class="language-console">cargo +nightly -Zunstable-options -Zconfig-include --config somefile.toml build
</code></pre>
<p>CLI paths are relative to the current working directory.</p>
<h3><a class="header" href="#features" id="features">Features</a></h3>
<ul>
<li>Tracking Issues:
<ul>
<li><a href="https://github.com/rust-lang/cargo/issues/7914">itarget #7914</a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/7915">build_dep #7915</a></li>
<li><a href="https://github.com/rust-lang/cargo/issues/7916">dev_dep #7916</a></li>
</ul>
</li>
</ul>
<p>The <code>-Zfeatures</code> option causes Cargo to use a new feature resolver that can
resolve features differently from before. It takes a comma separated list of
options to indicate which new behaviors to enable. With no options, it should
behave the same as without the flag.</p>
<pre><code class="language-console">cargo +nightly -Zfeatures=itarget,build_dep
</code></pre>
<p>The available options are:</p>
<ul>
<li>
<p><code>itarget</code> — Ignores features for target-specific dependencies for targets
that don't match the current compile target. For example:</p>
<pre><code class="language-toml">[dependency.common]
version = &quot;1.0&quot;
features = [&quot;f1&quot;]

[target.'cfg(windows)'.dependencies.common]
version = &quot;1.0&quot;
features = [&quot;f2&quot;]
</code></pre>
<p>When building this example for a non-Windows platform, the <code>f2</code> feature will
<em>not</em> be enabled.</p>
</li>
<li>
<p><code>host_dep</code> — Prevents features enabled on build dependencies or proc-macros
from being enabled for normal dependencies. For example:</p>
<pre><code class="language-toml">[dependencies]
log = &quot;0.4&quot;

[build-dependencies]
log = {version = &quot;0.4&quot;, features=['std']}
</code></pre>
<p>When building the build script, the <code>log</code> crate will be built with the <code>std</code>
feature. When building the library of your package, it will not enable the
feature.</p>
<p>Note that proc-macro decoupling requires changes to the registry, so it
won't be decoupled until the registry is updated to support the new field.</p>
</li>
<li>
<p><code>dev_dep</code> — Prevents features enabled on dev dependencies from being enabled
for normal dependencies. For example:</p>
<pre><code class="language-toml">[dependencies]
serde = {version = &quot;1.0&quot;, default-features = false}

[dev-dependencies]
serde = {version = &quot;1.0&quot;, features = [&quot;std&quot;]}
</code></pre>
<p>In this example, the library will normally link against <code>serde</code> without the
<code>std</code> feature. However, when built as a test or example, it will include the
<code>std</code> feature.</p>
<p>This mode is ignored if you are building any test, bench, or example. That
is, dev dependency features will still be unified if you run commands like
<code>cargo test</code> or <code>cargo build --all-targets</code>.</p>
</li>
<li>
<p><code>all</code> — Enable all feature options (<code>itarget,build_dep,dev_dep</code>).</p>
</li>
<li>
<p><code>compare</code> — This option compares the resolved features to the old resolver,
and will print any differences.</p>
</li>
</ul>
<h3><a class="header" href="#package-features" id="package-features">package-features</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/5364">#5364</a></li>
</ul>
<p>The <code>-Zpackage-features</code> flag changes the way features can be passed on the
command-line for a workspace. The normal behavior can be confusing, as the
features passed are always enabled on the package in the current directory,
even if that package is not selected with a <code>-p</code> flag. Feature flags also do
not work in the root of a virtual workspace. <code>-Zpackage-features</code> tries to
make feature flags behave in a more intuitive manner.</p>
<ul>
<li><code>cargo build -p other_member --features …</code> — This now only enables the given
features as defined in <code>other_member</code> (ignores whatever is in the current
directory).</li>
<li><code>cargo build -p a -p b --features …</code> — This now enables the given features
on both <code>a</code> and <code>b</code>. Not all packages need to define every feature, it only
enables matching features. It is still an error if none of the packages
define a given feature.</li>
<li><code>--features</code> and <code>--no-default-features</code> are now allowed in the root of a
virtual workspace.</li>
<li><code>member_name/feature_name</code> syntax may now be used on the command-line to
enable features for a specific member.</li>
</ul>
<p>The ability to set features for non-workspace members is no longer allowed, as
the resolver fundamentally does not support that ability.</p>
<h3><a class="header" href="#resolver" id="resolver">Resolver</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8088">#8088</a></li>
</ul>
<p>The <code>resolver</code> feature allows the resolver version to be specified in the
<code>Cargo.toml</code> manifest. This allows a project to opt-in to
backwards-incompatible changes in the resolver.</p>
<pre><code class="language-toml">cargo-features = [&quot;resolver&quot;]

[package]
name = &quot;my-package&quot;
version = &quot;1.0.0&quot;
resolver = &quot;2&quot;
</code></pre>
<p>Currently the only allowed value is <code>&quot;2&quot;</code>. This declaration enables all of the
new feature behavior of <a href="#features"><code>-Zfeatures=all</code></a> and
<a href="#package-features"><code>-Zpackage-features</code></a>.</p>
<p>This flag is global for a workspace. If using a virtual workspace, the root
definition should be in the <code>[workspace]</code> table like this:</p>
<pre><code class="language-toml">cargo-features = [&quot;resolver&quot;]

[workspace]
members = [&quot;member1&quot;, &quot;member2&quot;]
resolver = &quot;2&quot;
</code></pre>
<p>The <code>resolver</code> field is ignored in dependencies, only the top-level project or
workspace can control the new behavior.</p>
<h3><a class="header" href="#unit-graph" id="unit-graph">unit-graph</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8002">#8002</a></li>
</ul>
<p>The <code>--unit-graph</code> flag can be passed to any build command (<code>build</code>, <code>check</code>,
<code>run</code>, <code>test</code>, <code>bench</code>, <code>doc</code>, etc.) to emit a JSON object to stdout which
represents Cargo's internal unit graph. Nothing is actually built, and the
command returns immediately after printing. Each &quot;unit&quot; corresponds to an
execution of the compiler. These objects also include which unit each unit
depends on.</p>
<pre><code>cargo +nightly build --unit-graph -Z unstable-options
</code></pre>
<p>This structure provides a more complete view of the dependency relationship as
Cargo sees it. In particular, the &quot;features&quot; field supports the new feature
resolver where a dependency can be built multiple times with different
features. <code>cargo metadata</code> fundamentally cannot represent the relationship of
features between different dependency kinds, and features now depend on which
command is run and which packages and targets are selected. Additionally it
can provide details about intra-package dependencies like build scripts or
tests.</p>
<p>The following is a description of the JSON structure:</p>
<pre><code class="language-javascript">{
  /* Version of the JSON output structure. If any backwards incompatible
     changes are made, this value will be increased.
  */
  &quot;version&quot;: 1,
  /* Array of all build units. */
  &quot;units&quot;: [
    {
      /* An opaque string which indicates the package.
         Information about the package can be obtained from `cargo metadata`.
      */
      &quot;pkg_id&quot;: &quot;my-package 0.1.0 (path+file:///path/to/my-package)&quot;,
      /* The Cargo target. See the `cargo metadata` documentation for more
         information about these fields.
         https://doc.rust-lang.org/cargo/commands/cargo-metadata.html
      */
      &quot;target&quot;: {
        &quot;kind&quot;: [&quot;lib&quot;],
        &quot;crate_types&quot;: [&quot;lib&quot;],
        &quot;name&quot;: &quot;my-package&quot;,
        &quot;src_path&quot;: &quot;/path/to/my-package/src/lib.rs&quot;,
        &quot;edition&quot;: &quot;2018&quot;,
        &quot;doctest&quot;: true
      },
      /* The profile settings for this unit.
         These values may not match the profile defined in the manifest.
         Units can use modified profile settings. For example, the &quot;panic&quot;
         setting can be overridden for tests to force it to &quot;unwind&quot;.
      */
      &quot;profile&quot;: {
        /* The profile name these settings are derived from. */
        &quot;name&quot;: &quot;dev&quot;,
        /* The optimization level as a string. */
        &quot;opt_level&quot;: &quot;0&quot;,
        /* The LTO setting as a string. */
        &quot;lto&quot;: &quot;false&quot;,
        /* The codegen units as an integer.
           `null` if it should use the compiler's default.
        */
        &quot;codegen_units&quot;: null,
        /* The debug information level as an integer.
           `null` if it should use the compiler's default (0).
        */
        &quot;debuginfo&quot;: 2,
        /* Whether or not debug-assertions are enabled. */
        &quot;debug_assertions&quot;: true,
        /* Whether or not overflow-checks are enabled. */
        &quot;overflow_checks&quot;: true,
        /* Whether or not rpath is enabled. */
        &quot;rpath&quot;: false,
        /* Whether or not incremental is enabled. */
        &quot;incremental&quot;: true,
        /* The panic strategy, &quot;unwind&quot; or &quot;abort&quot;. */
        &quot;panic&quot;: &quot;unwind&quot;
      },
      /* Which platform this target is being built for.
         A value of `null` indicates it is for the host.
         Otherwise it is a string of the target triple (such as
         &quot;x86_64-unknown-linux-gnu&quot;).
      */
      &quot;platform&quot;: null,
      /* The &quot;mode&quot; for this unit. Valid values:

         * &quot;test&quot; — Build using `rustc` as a test.
         * &quot;build&quot; — Build using `rustc`.
         * &quot;check&quot; — Build using `rustc` in &quot;check&quot; mode.
         * &quot;doc&quot; — Build using `rustdoc`.
         * &quot;doctest&quot; — Test using `rustdoc`.
         * &quot;run-custom-build&quot; — Represents the execution of a build script.
      */
      &quot;mode&quot;: &quot;build&quot;,
      /* Array of features enabled on this unit as strings. */
      &quot;features&quot;: [&quot;somefeat&quot;],
      /* Whether or not this is a standard-library unit,
         part of the unstable build-std feature.
         If not set, treat as `false`.
      */
      &quot;is_std&quot;: false,
      /* Array of dependencies of this unit. */
      &quot;dependencies&quot;: [
        {
          /* Index in the &quot;units&quot; array for the dependency. */
          &quot;index&quot;: 1,
          /* The name that this dependency will be referred as. */
          &quot;extern_crate_name&quot;: &quot;unicode_xid&quot;,
          /* Whether or not this dependency is &quot;public&quot;,
             part of the unstable public-dependency feature.
             If not set, the public-dependency feature is not enabled.
          */
          &quot;public&quot;: false,
          /* Whether or not this dependency is injected into the prelude,
             currently used by the build-std feature.
             If not set, treat as `false`.
          */
          &quot;noprelude&quot;: false
        }
      ]
    },
    // ...
  ],
  /* Array of indices in the &quot;units&quot; array that are the &quot;roots&quot; of the
     dependency graph.
  */
  &quot;roots&quot;: [0],
}
</code></pre>
<h3><a class="header" href="#profile-strip-option" id="profile-strip-option">Profile <code>strip</code> option</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/rust/issues/72110">rust-lang/rust#72110</a></li>
</ul>
<p>This feature provides a new option in the <code>[profile]</code> section to strip either
symbols or debuginfo from a binary. This can be enabled like so:</p>
<pre><code class="language-toml">cargo-features = [&quot;strip&quot;]

[package]
# ...

[profile.release]
strip = &quot;debuginfo&quot;
</code></pre>
<p>Other possible values of <code>strip</code> are <code>none</code> and <code>symbols</code>. The default is
<code>none</code>.</p>
<h3><a class="header" href="#rustdoc-map" id="rustdoc-map">rustdoc-map</a></h3>
<ul>
<li>Tracking Issue: <a href="https://github.com/rust-lang/cargo/issues/8296">#8296</a></li>
</ul>
<p>This feature adds configuration settings that are passed to <code>rustdoc</code> so that
it can generate links to dependencies whose documentation is hosted elsewhere
when the dependency is not documented. First, add this to <code>.cargo/config</code>:</p>
<pre><code class="language-toml">[doc.extern-map.registries]
crates-io = &quot;https://docs.rs/&quot;
</code></pre>
<p>Then, when building documentation, use the following flags to cause links
to dependencies to link to <a href="https://docs.rs/">docs.rs</a>:</p>
<pre><code>cargo +nightly doc --no-deps -Zrustdoc-map
</code></pre>
<p>The <code>registries</code> table contains a mapping of registry name to the URL to link
to. The URL may have the markers <code>{pkg_name}</code> and <code>{version}</code> which will get
replaced with the corresponding values. If neither are specified, then Cargo
defaults to appending <code>{pkg_name}/{version}/</code> to the end of the URL.</p>
<p>Another config setting is available to redirect standard library links. By
default, rustdoc creates links to <a href="https://doc.rust-lang.org/nightly/">https://doc.rust-lang.org/nightly/</a>. To
change this behavior, use the <code>doc.extern-map.std</code> setting:</p>
<pre><code class="language-toml">[doc.extern-map]
std = &quot;local&quot;
</code></pre>
<p>A value of <code>&quot;local&quot;</code> means to link to the documentation found in the <code>rustc</code>
sysroot. If you are using rustup, this documentation can be installed with
<code>rustup component add rust-docs</code>.</p>
<p>The default value is <code>&quot;remote&quot;</code>.</p>
<p>The value may also take a URL for a custom location.</p>
<h3><a class="header" href="#terminal-width" id="terminal-width">terminal-width</a></h3>
<p>This feature provides a new flag, <code>-Z terminal-width</code>, which is used to pass
a terminal width to <code>rustc</code> so that error messages containing long lines
can be intelligently truncated.</p>
<p>For example, passing <code>-Z terminal-width=20</code> (an arbitrarily low value) might
produce the following error:</p>
<pre><code class="language-text">error[E0308]: mismatched types
  --&gt; src/main.rs:2:17
  |
2 | ..._: () = 42;
  |       --   ^^ expected `()`, found integer
  |       |
  |       expected due to this

error: aborting due to previous error
</code></pre>
<p>In contrast, without <code>-Z terminal-width</code>, the error would look as shown below:</p>
<pre><code class="language-text">error[E0308]: mismatched types
 --&gt; src/main.rs:2:17
  |
2 |     let _: () = 42;
  |            --   ^^ expected `()`, found integer
  |            |
  |            expected due to this

error: aborting due to previous error
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../reference/registries.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../commands/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../reference/registries.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../commands/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
