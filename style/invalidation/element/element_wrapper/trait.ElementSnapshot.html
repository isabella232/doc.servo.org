<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `ElementSnapshot` trait in crate `style`."><meta name="keywords" content="rust, rustlang, rust-lang, ElementSnapshot"><title>style::invalidation::element::element_wrapper::ElementSnapshot - Rust</title><link rel="stylesheet" type="text/css" href="../../../../normalize.css"><link rel="stylesheet" type="text/css" href="../../../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../../../ayu.css" disabled ><script src="../../../../storage.js"></script><noscript><link rel="stylesheet" href="../../../../noscript.css"></noscript><link rel="shortcut icon" href="../../../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../../../style/index.html'><div class='logo-container'><img src='../../../../rust-logo.png' alt='logo'></div></a><p class='location'>Trait ElementSnapshot</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.each_class">each_class</a><a href="#tymethod.has_attrs">has_attrs</a><a href="#tymethod.has_class">has_class</a><a href="#tymethod.id_attr">id_attr</a><a href="#tymethod.imported_part">imported_part</a><a href="#tymethod.is_part">is_part</a><a href="#tymethod.lang_attr">lang_attr</a><a href="#tymethod.state">state</a></div><a class="sidebar-title" href="#provided-methods">Provided Methods</a><div class="sidebar-links"><a href="#method.debug_list_attributes">debug_list_attributes</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class='location'><a href='../../../index.html'>style</a>::<wbr><a href='../../index.html'>invalidation</a>::<wbr><a href='../index.html'>element</a>::<wbr><a href='index.html'>element_wrapper</a></p><script>window.sidebarCurrent = {name: 'ElementSnapshot', ty: 'trait', relpath: ''};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../../../settings.html"><img src="../../../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../../../src/style/invalidation/element/element_wrapper.rs.html#39-76' title='goto source code'>[src]</a></span><span class='in-band'>Trait <a href='../../../index.html'>style</a>::<wbr><a href='../../index.html'>invalidation</a>::<wbr><a href='../index.html'>element</a>::<wbr><a href='index.html'>element_wrapper</a>::<wbr><a class="trait" href=''>ElementSnapshot</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class='rust trait'>pub trait ElementSnapshot: <a class="trait" href="../../../../core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a> {
    fn <a href='#tymethod.state' class='fnname'>state</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../../style/element_state/struct.ElementState.html" title="struct style::element_state::ElementState">ElementState</a>&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.has_attrs' class='fnname'>has_attrs</a>(&amp;self) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class='item-spacer'></div>    fn <a href='#tymethod.id_attr' class='fnname'>id_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">WeakAtom</a>&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.has_class' class='fnname'>has_class</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>, case_sensitivity: <a class="enum" href="../../../../selectors/attr/enum.CaseSensitivity.html" title="enum selectors::attr::CaseSensitivity">CaseSensitivity</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class='item-spacer'></div>    fn <a href='#tymethod.is_part' class='fnname'>is_part</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a>;
<div class='item-spacer'></div>    fn <a href='#tymethod.imported_part' class='fnname'>imported_part</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>&gt;;
<div class='item-spacer'></div>    fn <a href='#tymethod.each_class' class='fnname'>each_class</a>&lt;F&gt;(&amp;self, _: F)<br>&nbsp;&nbsp;&nbsp; <span class="where">where<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>)</span>;
<div class='item-spacer'></div>    fn <a href='#tymethod.lang_attr' class='fnname'>lang_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/selector_parser/type.AttrValue.html" title="type style::selector_parser::AttrValue">AttrValue</a>&gt;;

    fn <a href='#method.debug_list_attributes' class='fnname'>debug_list_attributes</a>(&amp;self) -&gt; <a class="struct" href="../../../../alloc/string/struct.String.html" title="struct alloc::string::String">String</a> { ... }
}</pre></div><div class='docblock'><p>In order to compute restyle hints, we perform a selector match against a
list of partial selectors whose rightmost simple selector may be sensitive
to the thing being changed. We do this matching twice, once for the element
as it exists now and once for the element as it existed at the time of the
last restyle. If the results of the selector match differ, that means that
the given partial selector is sensitive to the change, and we compute a
restyle hint based on its combinator.</p>
<p>In order to run selector matching against the old element state, we generate
a wrapper for the element which claims to have the old state. This is the
ElementWrapper logic below.</p>
<p>Gecko does this differently for element states, and passes a mask called
mStateMask, which indicates the states that need to be ignored during
selector matching. This saves an ElementWrapper allocation and an additional
selector match call at the expense of additional complexity inside the
selector matching logic. This only works for boolean states though, so we
still need to take the ElementWrapper approach for attribute-dependent
style. So we do it the same both ways for now to reduce complexity, but it's
worth measuring the performance impact (if any) of the mStateMask approach.</p>
</div>
            <h2 id='required-methods' class='small-section-header'>Required methods<a href='#required-methods' class='anchor'></a></h2><div class='methods'><h3 id='tymethod.state' class='method'><code>fn <a href='#tymethod.state' class='fnname'>state</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../../style/element_state/struct.ElementState.html" title="struct style::element_state::ElementState">ElementState</a>&gt;</code></h3><div class='docblock'><p>The state of the snapshot, if any.</p>
</div><h3 id='tymethod.has_attrs' class='method'><code>fn <a href='#tymethod.has_attrs' class='fnname'>has_attrs</a>(&amp;self) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code></h3><div class='docblock'><p>If this snapshot contains attribute information.</p>
</div><h3 id='tymethod.id_attr' class='method'><code>fn <a href='#tymethod.id_attr' class='fnname'>id_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">WeakAtom</a>&gt;</code></h3><div class='docblock'><p>The ID attribute per this snapshot. Should only be called if
<code>has_attrs()</code> returns true.</p>
</div><h3 id='tymethod.has_class' class='method'><code>fn <a href='#tymethod.has_class' class='fnname'>has_class</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>, case_sensitivity: <a class="enum" href="../../../../selectors/attr/enum.CaseSensitivity.html" title="enum selectors::attr::CaseSensitivity">CaseSensitivity</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code></h3><div class='docblock'><p>Whether this snapshot contains the class <code>name</code>. Should only be called
if <code>has_attrs()</code> returns true.</p>
</div><h3 id='tymethod.is_part' class='method'><code>fn <a href='#tymethod.is_part' class='fnname'>is_part</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code></h3><div class='docblock'><p>Whether this snapshot represents the part named <code>name</code>. Should only be
called if <code>has_attrs()</code> returns true.</p>
</div><h3 id='tymethod.imported_part' class='method'><code>fn <a href='#tymethod.imported_part' class='fnname'>imported_part</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>&gt;</code></h3><div class='docblock'><p>See Element::imported_part.</p>
</div><h3 id='tymethod.each_class' class='method'><code>fn <a href='#tymethod.each_class' class='fnname'>each_class</a>&lt;F&gt;(&amp;self, _: F) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>),&nbsp;</span></code></h3><div class='docblock'><p>A callback that should be called for each class of the snapshot. Should
only be called if <code>has_attrs()</code> returns true.</p>
</div><h3 id='tymethod.lang_attr' class='method'><code>fn <a href='#tymethod.lang_attr' class='fnname'>lang_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/selector_parser/type.AttrValue.html" title="type style::selector_parser::AttrValue">AttrValue</a>&gt;</code></h3><div class='docblock'><p>The <code>xml:lang=&quot;&quot;</code> or <code>lang=&quot;&quot;</code> attribute value per this snapshot.</p>
</div></div><span class='loading-content'>Loading content...</span>
            <h2 id='provided-methods' class='small-section-header'>Provided methods<a href='#provided-methods' class='anchor'></a></h2><div class='methods'><h3 id='method.debug_list_attributes' class='method'><code>fn <a href='#method.debug_list_attributes' class='fnname'>debug_list_attributes</a>(&amp;self) -&gt; <a class="struct" href="../../../../alloc/string/struct.String.html" title="struct alloc::string::String">String</a></code></h3><div class='docblock'><p>Gets the attribute information of the snapshot as a string.</p>
<p>Only for debugging purposes.</p>
</div></div><span class='loading-content'>Loading content...</span>
            <h2 id='implementors' class='small-section-header'>Implementors<a href='#implementors' class='anchor'></a></h2><div class='item-list' id='implementors-list'><h3 id='impl-ElementSnapshot' class='impl'><code class='in-band'>impl ElementSnapshot for <a class="struct" href="../../../../style/servo/selector_parser/struct.ServoElementSnapshot.html" title="struct style::servo::selector_parser::ServoElementSnapshot">ServoElementSnapshot</a></code><a href='#impl-ElementSnapshot' class='anchor'></a><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#687-734' title='goto source code'>[src]</a></h3><div class='impl-items'><h4 id='method.state' class="method hidden"><code>fn <a href='#method.state' class='fnname'>state</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../../../../style/element_state/struct.ElementState.html" title="struct style::element_state::ElementState">ElementState</a>&gt;</code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#688-690' title='goto source code'>[src]</a></h4><h4 id='method.has_attrs' class="method hidden"><code>fn <a href='#method.has_attrs' class='fnname'>has_attrs</a>(&amp;self) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#692-694' title='goto source code'>[src]</a></h4><h4 id='method.id_attr' class="method hidden"><code>fn <a href='#method.id_attr' class='fnname'>id_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>&gt;</code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#696-699' title='goto source code'>[src]</a></h4><h4 id='method.is_part' class="method hidden"><code>fn <a href='#method.is_part' class='fnname'>is_part</a>(&amp;self, _name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#701-703' title='goto source code'>[src]</a></h4><h4 id='method.imported_part' class="method hidden"><code>fn <a href='#method.imported_part' class='fnname'>imported_part</a>(&amp;self, _: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>&gt;</code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#705-707' title='goto source code'>[src]</a></h4><h4 id='method.has_class' class="method hidden"><code>fn <a href='#method.has_class' class='fnname'>has_class</a>(&amp;self, name: &amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>, case_sensitivity: <a class="enum" href="../../../../selectors/attr/enum.CaseSensitivity.html" title="enum selectors::attr::CaseSensitivity">CaseSensitivity</a>) -&gt; <a class="primitive" href="../../../../std/primitive.bool.html">bool</a></code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#709-716' title='goto source code'>[src]</a></h4><h4 id='method.each_class' class="method hidden"><code>fn <a href='#method.each_class' class='fnname'>each_class</a>&lt;F&gt;(&amp;self, callback: F) <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="../../../../core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="type" href="../../../../style/type.Atom.html" title="type style::Atom">Atom</a>),&nbsp;</span></code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#718-727' title='goto source code'>[src]</a></h4><h4 id='method.lang_attr' class="method hidden"><code>fn <a href='#method.lang_attr' class='fnname'>lang_attr</a>(&amp;self) -&gt; <a class="enum" href="../../../../core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="type" href="../../../../style/selector_parser/type.AttrValue.html" title="type style::selector_parser::AttrValue">SelectorAttrValue</a>&gt;</code><a class='srclink' href='../../../../src/style/servo/selector_parser.rs.html#729-733' title='goto source code'>[src]</a></h4></div></div><span class='loading-content'>Loading content...</span><script type="text/javascript" src="../../../../implementors/style/invalidation/element/element_wrapper/trait.ElementSnapshot.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../../../";window.currentCrate = "style";</script><script src="../../../../main.js"></script><script defer src="../../../../search-index.js"></script></body></html>